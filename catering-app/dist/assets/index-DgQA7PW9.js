function Qf(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Yf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rd={exports:{}},Fi={},nd={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),Xf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.memo"),lm=Symbol.for("react.lazy"),du=Symbol.iterator;function om(e){return e===null||typeof e!="object"?null:(e=du&&e[du]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,ad={};function gn(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}gn.prototype.isReactComponent={};gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ld(){}ld.prototype=gn.prototype;function so(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}var io=so.prototype=new ld;io.constructor=so;id(io,gn.prototype);io.isPureReactComponent=!0;var hu=Array.isArray,od=Object.prototype.hasOwnProperty,ao={current:null},ud={key:!0,ref:!0,__self:!0,__source:!0};function cd(e,t,r){var n,s={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)od.call(t,n)&&!ud.hasOwnProperty(n)&&(s[n]=t[n]);var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){for(var o=Array(u),c=0;c<u;c++)o[c]=arguments[c+2];s.children=o}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)s[n]===void 0&&(s[n]=u[n]);return{$$typeof:_s,type:e,key:i,ref:l,props:s,_owner:ao.current}}function um(e,t){return{$$typeof:_s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===_s}function cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fu=/\/+/g;function ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cm(""+e.key):t.toString(36)}function ei(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case _s:case Xf:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+ha(l,0):n,hu(s)?(r="",e!=null&&(r=e.replace(fu,"$&/")+"/"),ei(s,t,r,"",function(c){return c})):s!=null&&(lo(s)&&(s=um(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(fu,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",hu(e))for(var u=0;u<e.length;u++){i=e[u];var o=n+ha(i,u);l+=ei(i,t,r,o,s)}else if(o=om(e),typeof o=="function")for(e=o.call(e),u=0;!(i=e.next()).done;)i=i.value,o=n+ha(i,u++),l+=ei(i,t,r,o,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Rs(e,t,r){if(e==null)return e;var n=[],s=0;return ei(e,n,"","",function(i){return t.call(r,i,s++)}),n}function dm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ce={current:null},ti={transition:null},hm={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ti,ReactCurrentOwner:ao};function dd(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Rs,forEach:function(e,t,r){Rs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Rs(e,function(){t++}),t},toArray:function(e){return Rs(e,function(t){return t})||[]},only:function(e){if(!lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=gn;F.Fragment=Zf;F.Profiler=tm;F.PureComponent=so;F.StrictMode=em;F.Suspense=im;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hm;F.act=dd;F.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=id({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=ao.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(o in t)od.call(t,o)&&!ud.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&u!==void 0?u[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){u=Array(o);for(var c=0;c<o;c++)u[c]=arguments[c+2];n.children=u}return{$$typeof:_s,type:e.type,key:s,ref:i,props:n,_owner:l}};F.createContext=function(e){return e={$$typeof:nm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rm,_context:e},e.Consumer=e};F.createElement=cd;F.createFactory=function(e){var t=cd.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:sm,render:e}};F.isValidElement=lo;F.lazy=function(e){return{$$typeof:lm,_payload:{_status:-1,_result:e},_init:dm}};F.memo=function(e,t){return{$$typeof:am,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=ti.transition;ti.transition={};try{e()}finally{ti.transition=t}};F.unstable_act=dd;F.useCallback=function(e,t){return Ce.current.useCallback(e,t)};F.useContext=function(e){return Ce.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return Ce.current.useDeferredValue(e)};F.useEffect=function(e,t){return Ce.current.useEffect(e,t)};F.useId=function(){return Ce.current.useId()};F.useImperativeHandle=function(e,t,r){return Ce.current.useImperativeHandle(e,t,r)};F.useInsertionEffect=function(e,t){return Ce.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return Ce.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return Ce.current.useMemo(e,t)};F.useReducer=function(e,t,r){return Ce.current.useReducer(e,t,r)};F.useRef=function(e){return Ce.current.useRef(e)};F.useState=function(e){return Ce.current.useState(e)};F.useSyncExternalStore=function(e,t,r){return Ce.current.useSyncExternalStore(e,t,r)};F.useTransition=function(){return Ce.current.useTransition()};F.version="18.3.1";nd.exports=F;var j=nd.exports;const hd=Yf(j),fm=Qf({__proto__:null,default:hd},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=j,pm=Symbol.for("react.element"),gm=Symbol.for("react.fragment"),vm=Object.prototype.hasOwnProperty,ym=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xm={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)vm.call(t,n)&&!xm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:pm,type:e,key:i,ref:l,props:s,_owner:ym.current}}Fi.Fragment=gm;Fi.jsx=fd;Fi.jsxs=fd;rd.exports=Fi;var a=rd.exports,Ga={},md={exports:{}},We={},pd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,C){var R=_.length;_.push(C);e:for(;0<R;){var V=R-1>>>1,H=_[V];if(0<s(H,C))_[V]=C,_[R]=H,R=V;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var C=_[0],R=_.pop();if(R!==C){_[0]=R;e:for(var V=0,H=_.length,be=H>>>1;V<be;){var Q=2*(V+1)-1,Le=_[Q],Ge=Q+1,Os=_[Ge];if(0>s(Le,R))Ge<H&&0>s(Os,Le)?(_[V]=Os,_[Ge]=R,V=Ge):(_[V]=Le,_[Q]=R,V=Q);else if(Ge<H&&0>s(Os,R))_[V]=Os,_[Ge]=R,V=Ge;else break e}}return C}function s(_,C){var R=_.sortIndex-C.sortIndex;return R!==0?R:_.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var o=[],c=[],h=1,f=null,d=3,v=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(_){for(var C=r(c);C!==null;){if(C.callback===null)n(c);else if(C.startTime<=_)n(c),C.sortIndex=C.expirationTime,t(o,C);else break;C=r(c)}}function b(_){if(w=!1,g(_),!y)if(r(o)!==null)y=!0,D(k);else{var C=r(c);C!==null&&$e(b,C.startTime-_)}}function k(_,C){y=!1,w&&(w=!1,p(O),O=-1),v=!0;var R=d;try{for(g(C),f=r(o);f!==null&&(!(f.expirationTime>C)||_&&!ae());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var H=V(f.expirationTime<=C);C=e.unstable_now(),typeof H=="function"?f.callback=H:f===r(o)&&n(o),g(C)}else n(o);f=r(o)}if(f!==null)var be=!0;else{var Q=r(c);Q!==null&&$e(b,Q.startTime-C),be=!1}return be}finally{f=null,d=R,v=!1}}var S=!1,E=null,O=-1,U=5,z=-1;function ae(){return!(e.unstable_now()-z<U)}function tt(){if(E!==null){var _=e.unstable_now();z=_;var C=!0;try{C=E(!0,_)}finally{C?Ke():(S=!1,E=null)}}else S=!1}var Ke;if(typeof m=="function")Ke=function(){m(tt)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,N=P.port2;P.port1.onmessage=tt,Ke=function(){N.postMessage(null)}}else Ke=function(){x(tt,0)};function D(_){E=_,S||(S=!0,Ke())}function $e(_,C){O=x(function(){_(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,D(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(_){switch(d){case 1:case 2:case 3:var C=3;break;default:C=d}var R=d;d=C;try{return _()}finally{d=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,C){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var R=d;d=_;try{return C()}finally{d=R}},e.unstable_scheduleCallback=function(_,C,R){var V=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?V+R:V):R=V,_){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=R+H,_={id:h++,callback:C,priorityLevel:_,startTime:R,expirationTime:H,sortIndex:-1},R>V?(_.sortIndex=R,t(c,_),r(o)===null&&_===r(c)&&(w?(p(O),O=-1):w=!0,$e(b,R-V))):(_.sortIndex=H,t(o,_),y||v||(y=!0,D(k))),_},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(_){var C=d;return function(){var R=d;d=C;try{return _.apply(this,arguments)}finally{d=R}}}})(gd);pd.exports=gd;var wm=pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=j,Ve=wm;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vd=new Set,Gn={};function Cr(e,t){ln(e,t),ln(e+"Capture",t)}function ln(e,t){for(Gn[e]=t,e=0;e<t.length;e++)vd.add(t[e])}var St=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=Object.prototype.hasOwnProperty,_m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mu={},pu={};function jm(e){return Ja.call(pu,e)?!0:Ja.call(mu,e)?!1:_m.test(e)?pu[e]=!0:(mu[e]=!0,!1)}function km(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sm(e,t,r,n){if(t===null||typeof t>"u"||km(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Te(e,t,r,n,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new Te(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new Te(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new Te(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new Te(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new Te(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){we[e]=new Te(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){we[e]=new Te(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){we[e]=new Te(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){we[e]=new Te(e,5,!1,e.toLowerCase(),null,!1,!1)});var oo=/[\-:]([a-z])/g;function uo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oo,uo);we[t]=new Te(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oo,uo);we[t]=new Te(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oo,uo);we[t]=new Te(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){we[e]=new Te(e,1,!1,e.toLowerCase(),null,!1,!1)});we.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){we[e]=new Te(e,1,!1,e.toLowerCase(),null,!0,!0)});function co(e,t,r,n){var s=we.hasOwnProperty(t)?we[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sm(t,r,s,n)&&(r=null),n||s===null?jm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Pt=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),ho=Symbol.for("react.strict_mode"),Qa=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),fo=Symbol.for("react.forward_ref"),Ya=Symbol.for("react.suspense"),Xa=Symbol.for("react.suspense_list"),mo=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),wd=Symbol.for("react.offscreen"),gu=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,fa;function On(e){if(fa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);fa=t&&t[1]||""}return`
`+fa+e}var ma=!1;function pa(e,t){if(!e||ma)return"";ma=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,u=i.length-1;1<=l&&0<=u&&s[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==i[u]){var o=`
`+s[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=u);break}}}finally{ma=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?On(e):""}function Nm(e){switch(e.tag){case 5:return On(e.type);case 16:return On("Lazy");case 13:return On("Suspense");case 19:return On("SuspenseList");case 0:case 2:case 15:return e=pa(e.type,!1),e;case 11:return e=pa(e.type.render,!1),e;case 1:return e=pa(e.type,!0),e;default:return""}}function Za(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Br:return"Fragment";case Mr:return"Portal";case Qa:return"Profiler";case ho:return"StrictMode";case Ya:return"Suspense";case Xa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case yd:return(e._context.displayName||"Context")+".Provider";case fo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mo:return t=e.displayName||null,t!==null?t:Za(e.type)||"Memo";case It:t=e._payload,e=e._init;try{return Za(e(t))}catch{}}return null}function Em(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Za(t);case 8:return t===ho?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cm(e){var t=bd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=Cm(e))}function _d(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=bd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function el(e,t){var r=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function vu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Xt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jd(e,t){t=t.checked,t!=null&&co(e,"checked",t,!1)}function tl(e,t){jd(e,t);var r=Xt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rl(e,t.type,r):t.hasOwnProperty("defaultValue")&&rl(e,t.type,Xt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function rl(e,t,r){(t!=="number"||hi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rn=Array.isArray;function Zr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Xt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function nl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(T(92));if(Rn(r)){if(1<r.length)throw Error(T(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Xt(r)}}function kd(e,t){var r=Xt(t.value),n=Xt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function wu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $s,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tm=["Webkit","ms","Moz","O"];Object.keys(Ln).forEach(function(e){Tm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ln[t]=Ln[e]})});function Ed(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ln.hasOwnProperty(e)&&Ln[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ed(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Pm=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(e,t){if(t){if(Pm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function al(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ll=null;function po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ol=null,en=null,tn=null;function bu(e){if(e=Ss(e)){if(typeof ol!="function")throw Error(T(280));var t=e.stateNode;t&&(t=Ki(t),ol(e.stateNode,e.type,t))}}function Td(e){en?tn?tn.push(e):tn=[e]:en=e}function Pd(){if(en){var e=en,t=tn;if(tn=en=null,bu(e),t)for(e=0;e<t.length;e++)bu(t[e])}}function Od(e,t){return e(t)}function Rd(){}var ga=!1;function Ad(e,t,r){if(ga)return e(t,r);ga=!0;try{return Od(e,t,r)}finally{ga=!1,(en!==null||tn!==null)&&(Rd(),Pd())}}function Qn(e,t){var r=e.stateNode;if(r===null)return null;var n=Ki(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(T(231,t,typeof r));return r}var ul=!1;if(St)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){ul=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{ul=!1}function Om(e,t,r,n,s,i,l,u,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Dn=!1,fi=null,mi=!1,cl=null,Rm={onError:function(e){Dn=!0,fi=e}};function Am(e,t,r,n,s,i,l,u,o){Dn=!1,fi=null,Om.apply(Rm,arguments)}function Im(e,t,r,n,s,i,l,u,o){if(Am.apply(this,arguments),Dn){if(Dn){var c=fi;Dn=!1,fi=null}else throw Error(T(198));mi||(mi=!0,cl=c)}}function Tr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Id(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _u(e){if(Tr(e)!==e)throw Error(T(188))}function $m(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return _u(s),e;if(i===n)return _u(s),t;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,u=s.child;u;){if(u===r){l=!0,r=s,n=i;break}if(u===n){l=!0,n=s,r=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===r){l=!0,r=i,n=s;break}if(u===n){l=!0,n=i,r=s;break}u=u.sibling}if(!l)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?e:t}function $d(e){return e=$m(e),e!==null?Ld(e):null}function Ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ld(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Ve.unstable_scheduleCallback,ju=Ve.unstable_cancelCallback,Lm=Ve.unstable_shouldYield,Dm=Ve.unstable_requestPaint,le=Ve.unstable_now,Um=Ve.unstable_getCurrentPriorityLevel,go=Ve.unstable_ImmediatePriority,Ud=Ve.unstable_UserBlockingPriority,pi=Ve.unstable_NormalPriority,zm=Ve.unstable_LowPriority,zd=Ve.unstable_IdlePriority,qi=null,gt=null;function Mm(e){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(qi,e,void 0,(e.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:qm,Bm=Math.log,Fm=Math.LN2;function qm(e){return e>>>=0,e===0?32:31-(Bm(e)/Fm|0)|0}var Ls=64,Ds=4194304;function An(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var u=l&~s;u!==0?n=An(u):(i&=l,i!==0&&(n=An(i)))}else l=r&~s,l!==0?n=An(l):i!==0&&(n=An(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ut(t),s=1<<r,n|=e[r],t&=~s;return n}function Vm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-ut(i),u=1<<l,o=s[l];o===-1?(!(u&r)||u&n)&&(s[l]=Vm(u,t)):o<=t&&(e.expiredLanes|=u),i&=~u}}function dl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Md(){var e=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),e}function va(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function js(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ut(t),e[t]=r}function Hm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ut(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function vo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ut(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var K=0;function Bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fd,yo,qd,Vd,Wd,hl=!1,Us=[],qt=null,Vt=null,Wt=null,Yn=new Map,Xn=new Map,Dt=[],Km="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,t){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(t.pointerId)}}function kn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ss(t),t!==null&&yo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gm(e,t,r,n,s){switch(t){case"focusin":return qt=kn(qt,e,t,r,n,s),!0;case"dragenter":return Vt=kn(Vt,e,t,r,n,s),!0;case"mouseover":return Wt=kn(Wt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Yn.set(i,kn(Yn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Xn.set(i,kn(Xn.get(i)||null,e,t,r,n,s)),!0}return!1}function Hd(e){var t=fr(e.target);if(t!==null){var r=Tr(t);if(r!==null){if(t=r.tag,t===13){if(t=Id(r),t!==null){e.blockedOn=t,Wd(e.priority,function(){qd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ll=n,r.target.dispatchEvent(n),ll=null}else return t=Ss(r),t!==null&&yo(t),e.blockedOn=r,!1;t.shift()}return!0}function Su(e,t,r){ri(e)&&r.delete(t)}function Jm(){hl=!1,qt!==null&&ri(qt)&&(qt=null),Vt!==null&&ri(Vt)&&(Vt=null),Wt!==null&&ri(Wt)&&(Wt=null),Yn.forEach(Su),Xn.forEach(Su)}function Sn(e,t){e.blockedOn===t&&(e.blockedOn=null,hl||(hl=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,Jm)))}function Zn(e){function t(s){return Sn(s,e)}if(0<Us.length){Sn(Us[0],e);for(var r=1;r<Us.length;r++){var n=Us[r];n.blockedOn===e&&(n.blockedOn=null)}}for(qt!==null&&Sn(qt,e),Vt!==null&&Sn(Vt,e),Wt!==null&&Sn(Wt,e),Yn.forEach(t),Xn.forEach(t),r=0;r<Dt.length;r++)n=Dt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&(r=Dt[0],r.blockedOn===null);)Hd(r),r.blockedOn===null&&Dt.shift()}var rn=Pt.ReactCurrentBatchConfig,vi=!0;function Qm(e,t,r,n){var s=K,i=rn.transition;rn.transition=null;try{K=1,xo(e,t,r,n)}finally{K=s,rn.transition=i}}function Ym(e,t,r,n){var s=K,i=rn.transition;rn.transition=null;try{K=4,xo(e,t,r,n)}finally{K=s,rn.transition=i}}function xo(e,t,r,n){if(vi){var s=fl(e,t,r,n);if(s===null)Ea(e,t,n,yi,r),ku(e,n);else if(Gm(s,e,t,r,n))n.stopPropagation();else if(ku(e,n),t&4&&-1<Km.indexOf(e)){for(;s!==null;){var i=Ss(s);if(i!==null&&Fd(i),i=fl(e,t,r,n),i===null&&Ea(e,t,n,yi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ea(e,t,n,null,r)}}var yi=null;function fl(e,t,r,n){if(yi=null,e=po(n),e=fr(e),e!==null)if(t=Tr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Id(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yi=e,null}function Kd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Um()){case go:return 1;case Ud:return 4;case pi:case zm:return 16;case zd:return 536870912;default:return 16}default:return 16}}var Mt=null,wo=null,ni=null;function Gd(){if(ni)return ni;var e,t=wo,r=t.length,n,s="value"in Mt?Mt.value:Mt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[i-n];n++);return ni=s.slice(e,1<n?1-n:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zs(){return!0}function Nu(){return!1}function He(e){function t(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zs:Nu,this.isPropagationStopped=Nu,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),t}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=He(vn),ks=ne({},vn,{view:0,detail:0}),Xm=He(ks),ya,xa,Nn,Vi=ne({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nn&&(Nn&&e.type==="mousemove"?(ya=e.screenX-Nn.screenX,xa=e.screenY-Nn.screenY):xa=ya=0,Nn=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),Eu=He(Vi),Zm=ne({},Vi,{dataTransfer:0}),ep=He(Zm),tp=ne({},ks,{relatedTarget:0}),wa=He(tp),rp=ne({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),np=He(rp),sp=ne({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ip=He(sp),ap=ne({},vn,{data:0}),Cu=He(ap),lp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=up[e])?!!t[e]:!1}function _o(){return cp}var dp=ne({},ks,{key:function(e){if(e.key){var t=lp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?op[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hp=He(dp),fp=ne({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=He(fp),mp=ne({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),pp=He(mp),gp=ne({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),vp=He(gp),yp=ne({},Vi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xp=He(yp),wp=[9,13,27,32],jo=St&&"CompositionEvent"in window,Un=null;St&&"documentMode"in document&&(Un=document.documentMode);var bp=St&&"TextEvent"in window&&!Un,Jd=St&&(!jo||Un&&8<Un&&11>=Un),Pu=" ",Ou=!1;function Qd(e,t){switch(e){case"keyup":return wp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function _p(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(Ou=!0,Pu);case"textInput":return e=t.data,e===Pu&&Ou?null:e;default:return null}}function jp(e,t){if(Fr)return e==="compositionend"||!jo&&Qd(e,t)?(e=Gd(),ni=wo=Mt=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jd&&t.locale!=="ko"?null:t.data;default:return null}}var kp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kp[e.type]:t==="textarea"}function Xd(e,t,r,n){Td(n),t=xi(t,"onChange"),0<t.length&&(r=new bo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zn=null,es=null;function Sp(e){uh(e,0)}function Wi(e){var t=Wr(e);if(_d(t))return e}function Np(e,t){if(e==="change")return t}var Zd=!1;if(St){var ba;if(St){var _a="oninput"in document;if(!_a){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),_a=typeof Au.oninput=="function"}ba=_a}else ba=!1;Zd=ba&&(!document.documentMode||9<document.documentMode)}function Iu(){zn&&(zn.detachEvent("onpropertychange",eh),es=zn=null)}function eh(e){if(e.propertyName==="value"&&Wi(es)){var t=[];Xd(t,es,e,po(e)),Ad(Sp,t)}}function Ep(e,t,r){e==="focusin"?(Iu(),zn=t,es=r,zn.attachEvent("onpropertychange",eh)):e==="focusout"&&Iu()}function Cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wi(es)}function Tp(e,t){if(e==="click")return Wi(t)}function Pp(e,t){if(e==="input"||e==="change")return Wi(t)}function Op(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ht=typeof Object.is=="function"?Object.is:Op;function ts(e,t){if(ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ja.call(t,s)||!ht(e[s],t[s]))return!1}return!0}function $u(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lu(e,t){var r=$u(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$u(r)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rh(){for(var e=window,t=hi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hi(e.document)}return t}function ko(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rp(e){var t=rh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&th(r.ownerDocument.documentElement,r)){if(n!==null&&ko(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Lu(r,i);var l=Lu(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ap=St&&"documentMode"in document&&11>=document.documentMode,qr=null,ml=null,Mn=null,pl=!1;function Du(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pl||qr==null||qr!==hi(n)||(n=qr,"selectionStart"in n&&ko(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mn&&ts(Mn,n)||(Mn=n,n=xi(ml,"onSelect"),0<n.length&&(t=new bo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qr)))}function Ms(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionend:Ms("Transition","TransitionEnd")},ja={},nh={};St&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Hi(e){if(ja[e])return ja[e];if(!Vr[e])return e;var t=Vr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nh)return ja[e]=t[r];return e}var sh=Hi("animationend"),ih=Hi("animationiteration"),ah=Hi("animationstart"),lh=Hi("transitionend"),oh=new Map,Uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){oh.set(e,t),Cr(t,[e])}for(var ka=0;ka<Uu.length;ka++){var Sa=Uu[ka],Ip=Sa.toLowerCase(),$p=Sa[0].toUpperCase()+Sa.slice(1);er(Ip,"on"+$p)}er(sh,"onAnimationEnd");er(ih,"onAnimationIteration");er(ah,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(lh,"onTransitionEnd");ln("onMouseEnter",["mouseout","mouseover"]);ln("onMouseLeave",["mouseout","mouseover"]);ln("onPointerEnter",["pointerout","pointerover"]);ln("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var In="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(In));function zu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Im(n,t,void 0,e),e.currentTarget=null}function uh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var u=n[l],o=u.instance,c=u.currentTarget;if(u=u.listener,o!==i&&s.isPropagationStopped())break e;zu(s,u,c),i=o}else for(l=0;l<n.length;l++){if(u=n[l],o=u.instance,c=u.currentTarget,u=u.listener,o!==i&&s.isPropagationStopped())break e;zu(s,u,c),i=o}}}if(mi)throw e=cl,mi=!1,cl=null,e}function Y(e,t){var r=t[wl];r===void 0&&(r=t[wl]=new Set);var n=e+"__bubble";r.has(n)||(ch(t,e,2,!1),r.add(n))}function Na(e,t,r){var n=0;t&&(n|=4),ch(r,e,n,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[Bs]){e[Bs]=!0,vd.forEach(function(r){r!=="selectionchange"&&(Lp.has(r)||Na(r,!1,e),Na(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bs]||(t[Bs]=!0,Na("selectionchange",!1,t))}}function ch(e,t,r,n){switch(Kd(t)){case 1:var s=Qm;break;case 4:s=Ym;break;default:s=xo}r=s.bind(null,t,r,e),s=void 0,!ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ea(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var u=n.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;l=l.return}for(;u!==null;){if(l=fr(u),l===null)return;if(o=l.tag,o===5||o===6){n=i=l;continue e}u=u.parentNode}}n=n.return}Ad(function(){var c=i,h=po(r),f=[];e:{var d=oh.get(e);if(d!==void 0){var v=bo,y=e;switch(e){case"keypress":if(si(r)===0)break e;case"keydown":case"keyup":v=hp;break;case"focusin":y="focus",v=wa;break;case"focusout":y="blur",v=wa;break;case"beforeblur":case"afterblur":v=wa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ep;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=pp;break;case sh:case ih:case ah:v=np;break;case lh:v=vp;break;case"scroll":v=Xm;break;case"wheel":v=xp;break;case"copy":case"cut":case"paste":v=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Tu}var w=(t&4)!==0,x=!w&&e==="scroll",p=w?d!==null?d+"Capture":null:d;w=[];for(var m=c,g;m!==null;){g=m;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,p!==null&&(b=Qn(m,p),b!=null&&w.push(ns(m,b,g)))),x)break;m=m.return}0<w.length&&(d=new v(d,y,null,r,h),f.push({event:d,listeners:w}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",d&&r!==ll&&(y=r.relatedTarget||r.fromElement)&&(fr(y)||y[Nt]))break e;if((v||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,v?(y=r.relatedTarget||r.toElement,v=c,y=y?fr(y):null,y!==null&&(x=Tr(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(w=Eu,b="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=Tu,b="onPointerLeave",p="onPointerEnter",m="pointer"),x=v==null?d:Wr(v),g=y==null?d:Wr(y),d=new w(b,m+"leave",v,r,h),d.target=x,d.relatedTarget=g,b=null,fr(h)===c&&(w=new w(p,m+"enter",y,r,h),w.target=g,w.relatedTarget=x,b=w),x=b,v&&y)t:{for(w=v,p=y,m=0,g=w;g;g=Pr(g))m++;for(g=0,b=p;b;b=Pr(b))g++;for(;0<m-g;)w=Pr(w),m--;for(;0<g-m;)p=Pr(p),g--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=Pr(w),p=Pr(p)}w=null}else w=null;v!==null&&Mu(f,d,v,w,!1),y!==null&&x!==null&&Mu(f,x,y,w,!0)}}e:{if(d=c?Wr(c):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var k=Np;else if(Ru(d))if(Zd)k=Pp;else{k=Cp;var S=Ep}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=Tp);if(k&&(k=k(e,c))){Xd(f,k,r,h);break e}S&&S(e,d,c),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&rl(d,"number",d.value)}switch(S=c?Wr(c):window,e){case"focusin":(Ru(S)||S.contentEditable==="true")&&(qr=S,ml=c,Mn=null);break;case"focusout":Mn=ml=qr=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,Du(f,r,h);break;case"selectionchange":if(Ap)break;case"keydown":case"keyup":Du(f,r,h)}var E;if(jo)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Fr?Qd(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Jd&&r.locale!=="ko"&&(Fr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Fr&&(E=Gd()):(Mt=h,wo="value"in Mt?Mt.value:Mt.textContent,Fr=!0)),S=xi(c,O),0<S.length&&(O=new Cu(O,e,null,r,h),f.push({event:O,listeners:S}),E?O.data=E:(E=Yd(r),E!==null&&(O.data=E)))),(E=bp?_p(e,r):jp(e,r))&&(c=xi(c,"onBeforeInput"),0<c.length&&(h=new Cu("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=E))}uh(f,t)})}function ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qn(e,r),i!=null&&n.unshift(ns(e,i,s)),i=Qn(e,t),i!=null&&n.push(ns(e,i,s))),e=e.return}return n}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mu(e,t,r,n,s){for(var i=t._reactName,l=[];r!==null&&r!==n;){var u=r,o=u.alternate,c=u.stateNode;if(o!==null&&o===n)break;u.tag===5&&c!==null&&(u=c,s?(o=Qn(r,i),o!=null&&l.unshift(ns(r,o,u))):s||(o=Qn(r,i),o!=null&&l.push(ns(r,o,u)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Dp=/\r\n?/g,Up=/\u0000|\uFFFD/g;function Bu(e){return(typeof e=="string"?e:""+e).replace(Dp,`
`).replace(Up,"")}function Fs(e,t,r){if(t=Bu(t),Bu(e)!==t&&r)throw Error(T(425))}function wi(){}var gl=null,vl=null;function yl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xl=typeof setTimeout=="function"?setTimeout:void 0,zp=typeof clearTimeout=="function"?clearTimeout:void 0,Fu=typeof Promise=="function"?Promise:void 0,Mp=typeof queueMicrotask=="function"?queueMicrotask:typeof Fu<"u"?function(e){return Fu.resolve(null).then(e).catch(Bp)}:xl;function Bp(e){setTimeout(function(){throw e})}function Ca(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Zn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Zn(t)}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),pt="__reactFiber$"+yn,ss="__reactProps$"+yn,Nt="__reactContainer$"+yn,wl="__reactEvents$"+yn,Fp="__reactListeners$"+yn,qp="__reactHandles$"+yn;function fr(e){var t=e[pt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Nt]||r[pt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qu(e);e!==null;){if(r=e[pt])return r;e=qu(e)}return t}e=r,r=e.parentNode}return null}function Ss(e){return e=e[pt]||e[Nt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function Ki(e){return e[ss]||null}var bl=[],Hr=-1;function tr(e){return{current:e}}function X(e){0>Hr||(e.current=bl[Hr],bl[Hr]=null,Hr--)}function J(e,t){Hr++,bl[Hr]=e.current,e.current=t}var Zt={},Se=tr(Zt),Re=tr(!1),wr=Zt;function on(e,t){var r=e.type.contextTypes;if(!r)return Zt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ae(e){return e=e.childContextTypes,e!=null}function bi(){X(Re),X(Se)}function Vu(e,t,r){if(Se.current!==Zt)throw Error(T(168));J(Se,t),J(Re,r)}function dh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(T(108,Em(e)||"Unknown",s));return ne({},r,n)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zt,wr=Se.current,J(Se,e),J(Re,Re.current),!0}function Wu(e,t,r){var n=e.stateNode;if(!n)throw Error(T(169));r?(e=dh(e,t,wr),n.__reactInternalMemoizedMergedChildContext=e,X(Re),X(Se),J(Se,e)):X(Re),J(Re,r)}var wt=null,Gi=!1,Ta=!1;function hh(e){wt===null?wt=[e]:wt.push(e)}function Vp(e){Gi=!0,hh(e)}function rr(){if(!Ta&&wt!==null){Ta=!0;var e=0,t=K;try{var r=wt;for(K=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wt=null,Gi=!1}catch(s){throw wt!==null&&(wt=wt.slice(e+1)),Dd(go,rr),s}finally{K=t,Ta=!1}}return null}var Kr=[],Gr=0,ji=null,ki=0,Je=[],Qe=0,br=null,bt=1,_t="";function or(e,t){Kr[Gr++]=ki,Kr[Gr++]=ji,ji=e,ki=t}function fh(e,t,r){Je[Qe++]=bt,Je[Qe++]=_t,Je[Qe++]=br,br=e;var n=bt;e=_t;var s=32-ut(n)-1;n&=~(1<<s),r+=1;var i=32-ut(t)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,bt=1<<32-ut(t)+s|r<<s|n,_t=i+e}else bt=1<<i|r<<s|n,_t=e}function So(e){e.return!==null&&(or(e,1),fh(e,1,0))}function No(e){for(;e===ji;)ji=Kr[--Gr],Kr[Gr]=null,ki=Kr[--Gr],Kr[Gr]=null;for(;e===br;)br=Je[--Qe],Je[Qe]=null,_t=Je[--Qe],Je[Qe]=null,bt=Je[--Qe],Je[Qe]=null}var qe=null,Fe=null,Z=!1,ot=null;function mh(e,t){var r=Ye(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Hu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Fe=Ht(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Fe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=br!==null?{id:bt,overflow:_t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ye(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qe=e,Fe=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jl(e){if(Z){var t=Fe;if(t){var r=t;if(!Hu(e,t)){if(_l(e))throw Error(T(418));t=Ht(r.nextSibling);var n=qe;t&&Hu(e,t)?mh(n,r):(e.flags=e.flags&-4097|2,Z=!1,qe=e)}}else{if(_l(e))throw Error(T(418));e.flags=e.flags&-4097|2,Z=!1,qe=e}}}function Ku(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function qs(e){if(e!==qe)return!1;if(!Z)return Ku(e),Z=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yl(e.type,e.memoizedProps)),t&&(t=Fe)){if(_l(e))throw ph(),Error(T(418));for(;t;)mh(e,t),t=Ht(t.nextSibling)}if(Ku(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fe=Ht(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fe=null}}else Fe=qe?Ht(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=Fe;e;)e=Ht(e.nextSibling)}function un(){Fe=qe=null,Z=!1}function Eo(e){ot===null?ot=[e]:ot.push(e)}var Wp=Pt.ReactCurrentBatchConfig;function En(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var u=s.refs;l===null?delete u[i]:u[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gu(e){var t=e._init;return t(e._payload)}function gh(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=Qt(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function u(p,m,g,b){return m===null||m.tag!==6?(m=La(g,p.mode,b),m.return=p,m):(m=s(m,g),m.return=p,m)}function o(p,m,g,b){var k=g.type;return k===Br?h(p,m,g.props.children,b,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===It&&Gu(k)===m.type)?(b=s(m,g.props),b.ref=En(p,m,g),b.return=p,b):(b=di(g.type,g.key,g.props,null,p.mode,b),b.ref=En(p,m,g),b.return=p,b)}function c(p,m,g,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Da(g,p.mode,b),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,b,k){return m===null||m.tag!==7?(m=yr(g,p.mode,b,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function f(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=La(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case As:return g=di(m.type,m.key,m.props,null,p.mode,g),g.ref=En(p,null,m),g.return=p,g;case Mr:return m=Da(m,p.mode,g),m.return=p,m;case It:var b=m._init;return f(p,b(m._payload),g)}if(Rn(m)||_n(m))return m=yr(m,p.mode,g,null),m.return=p,m;Vs(p,m)}return null}function d(p,m,g,b){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:u(p,m,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case As:return g.key===k?o(p,m,g,b):null;case Mr:return g.key===k?c(p,m,g,b):null;case It:return k=g._init,d(p,m,k(g._payload),b)}if(Rn(g)||_n(g))return k!==null?null:h(p,m,g,b,null);Vs(p,g)}return null}function v(p,m,g,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(g)||null,u(m,p,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case As:return p=p.get(b.key===null?g:b.key)||null,o(m,p,b,k);case Mr:return p=p.get(b.key===null?g:b.key)||null,c(m,p,b,k);case It:var S=b._init;return v(p,m,g,S(b._payload),k)}if(Rn(b)||_n(b))return p=p.get(g)||null,h(m,p,b,k,null);Vs(m,b)}return null}function y(p,m,g,b){for(var k=null,S=null,E=m,O=m=0,U=null;E!==null&&O<g.length;O++){E.index>O?(U=E,E=null):U=E.sibling;var z=d(p,E,g[O],b);if(z===null){E===null&&(E=U);break}e&&E&&z.alternate===null&&t(p,E),m=i(z,m,O),S===null?k=z:S.sibling=z,S=z,E=U}if(O===g.length)return r(p,E),Z&&or(p,O),k;if(E===null){for(;O<g.length;O++)E=f(p,g[O],b),E!==null&&(m=i(E,m,O),S===null?k=E:S.sibling=E,S=E);return Z&&or(p,O),k}for(E=n(p,E);O<g.length;O++)U=v(E,p,O,g[O],b),U!==null&&(e&&U.alternate!==null&&E.delete(U.key===null?O:U.key),m=i(U,m,O),S===null?k=U:S.sibling=U,S=U);return e&&E.forEach(function(ae){return t(p,ae)}),Z&&or(p,O),k}function w(p,m,g,b){var k=_n(g);if(typeof k!="function")throw Error(T(150));if(g=k.call(g),g==null)throw Error(T(151));for(var S=k=null,E=m,O=m=0,U=null,z=g.next();E!==null&&!z.done;O++,z=g.next()){E.index>O?(U=E,E=null):U=E.sibling;var ae=d(p,E,z.value,b);if(ae===null){E===null&&(E=U);break}e&&E&&ae.alternate===null&&t(p,E),m=i(ae,m,O),S===null?k=ae:S.sibling=ae,S=ae,E=U}if(z.done)return r(p,E),Z&&or(p,O),k;if(E===null){for(;!z.done;O++,z=g.next())z=f(p,z.value,b),z!==null&&(m=i(z,m,O),S===null?k=z:S.sibling=z,S=z);return Z&&or(p,O),k}for(E=n(p,E);!z.done;O++,z=g.next())z=v(E,p,O,z.value,b),z!==null&&(e&&z.alternate!==null&&E.delete(z.key===null?O:z.key),m=i(z,m,O),S===null?k=z:S.sibling=z,S=z);return e&&E.forEach(function(tt){return t(p,tt)}),Z&&or(p,O),k}function x(p,m,g,b){if(typeof g=="object"&&g!==null&&g.type===Br&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case As:e:{for(var k=g.key,S=m;S!==null;){if(S.key===k){if(k=g.type,k===Br){if(S.tag===7){r(p,S.sibling),m=s(S,g.props.children),m.return=p,p=m;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===It&&Gu(k)===S.type){r(p,S.sibling),m=s(S,g.props),m.ref=En(p,S,g),m.return=p,p=m;break e}r(p,S);break}else t(p,S);S=S.sibling}g.type===Br?(m=yr(g.props.children,p.mode,b,g.key),m.return=p,p=m):(b=di(g.type,g.key,g.props,null,p.mode,b),b.ref=En(p,m,g),b.return=p,p=b)}return l(p);case Mr:e:{for(S=g.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=Da(g,p.mode,b),m.return=p,p=m}return l(p);case It:return S=g._init,x(p,m,S(g._payload),b)}if(Rn(g))return y(p,m,g,b);if(_n(g))return w(p,m,g,b);Vs(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(p,m.sibling),m=s(m,g),m.return=p,p=m):(r(p,m),m=La(g,p.mode,b),m.return=p,p=m),l(p)):r(p,m)}return x}var cn=gh(!0),vh=gh(!1),Si=tr(null),Ni=null,Jr=null,Co=null;function To(){Co=Jr=Ni=null}function Po(e){var t=Si.current;X(Si),e._currentValue=t}function kl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function nn(e,t){Ni=e,Co=Jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oe=!0),e.firstContext=null)}function Ze(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},Jr===null){if(Ni===null)throw Error(T(308));Jr=e,Ni.dependencies={lanes:0,firstContext:e}}else Jr=Jr.next=e;return t}var mr=null;function Oo(e){mr===null?mr=[e]:mr.push(e)}function yh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Oo(t)):(r.next=s.next,s.next=r),t.interleaved=r,Et(e,n)}function Et(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $t=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Et(e,r)}return s=n.interleaved,s===null?(t.next=t,Oo(n)):(t.next=s.next,s.next=t),n.interleaved=t,Et(e,r)}function ii(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vo(e,r)}}function Ju(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ei(e,t,r,n){var s=e.updateQueue;$t=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var o=u,c=o.next;o.next=null,l===null?i=c:l.next=c,l=o;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==l&&(u===null?h.firstBaseUpdate=c:u.next=c,h.lastBaseUpdate=o))}if(i!==null){var f=s.baseState;l=0,h=c=o=null,u=i;do{var d=u.lane,v=u.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var y=e,w=u;switch(d=t,v=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(v,f,d);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,d=typeof y=="function"?y.call(v,f,d):y,d==null)break e;f=ne({},f,d);break e;case 2:$t=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,d=s.effects,d===null?s.effects=[u]:d.push(u))}else v={eventTime:v,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(c=h=v,o=f):h=h.next=v,l|=d;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;d=u,u=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(h===null&&(o=f),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);jr|=l,e.lanes=l,e.memoizedState=f}}function Qu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var Ns={},vt=tr(Ns),is=tr(Ns),as=tr(Ns);function pr(e){if(e===Ns)throw Error(T(174));return e}function Ao(e,t){switch(J(as,t),J(is,e),J(vt,Ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sl(t,e)}X(vt),J(vt,t)}function dn(){X(vt),X(is),X(as)}function wh(e){pr(as.current);var t=pr(vt.current),r=sl(t,e.type);t!==r&&(J(is,e),J(vt,r))}function Io(e){is.current===e&&(X(vt),X(is))}var te=tr(0);function Ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pa=[];function $o(){for(var e=0;e<Pa.length;e++)Pa[e]._workInProgressVersionPrimary=null;Pa.length=0}var ai=Pt.ReactCurrentDispatcher,Oa=Pt.ReactCurrentBatchConfig,_r=0,re=null,he=null,me=null,Ti=!1,Bn=!1,ls=0,Hp=0;function _e(){throw Error(T(321))}function Lo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ht(e[r],t[r]))return!1;return!0}function Do(e,t,r,n,s,i){if(_r=i,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=e===null||e.memoizedState===null?Qp:Yp,e=r(n,s),Bn){i=0;do{if(Bn=!1,ls=0,25<=i)throw Error(T(301));i+=1,me=he=null,t.updateQueue=null,ai.current=Xp,e=r(n,s)}while(Bn)}if(ai.current=Pi,t=he!==null&&he.next!==null,_r=0,me=he=re=null,Ti=!1,t)throw Error(T(300));return e}function Uo(){var e=ls!==0;return ls=0,e}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?re.memoizedState=me=e:me=me.next=e,me}function et(){if(he===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=he.next;var t=me===null?re.memoizedState:me.next;if(t!==null)me=t,he=e;else{if(e===null)throw Error(T(310));he=e,e={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},me===null?re.memoizedState=me=e:me=me.next=e}return me}function os(e,t){return typeof t=="function"?t(e):t}function Ra(e){var t=et(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=he,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var u=l=null,o=null,c=i;do{var h=c.lane;if((_r&h)===h)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(u=o=f,l=n):o=o.next=f,re.lanes|=h,jr|=h}c=c.next}while(c!==null&&c!==i);o===null?l=n:o.next=u,ht(n,t.memoizedState)||(Oe=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,re.lanes|=i,jr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Aa(e){var t=et(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);ht(i,t.memoizedState)||(Oe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function bh(){}function _h(e,t){var r=re,n=et(),s=t(),i=!ht(n.memoizedState,s);if(i&&(n.memoizedState=s,Oe=!0),n=n.queue,zo(Sh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||me!==null&&me.memoizedState.tag&1){if(r.flags|=2048,us(9,kh.bind(null,r,n,s,t),void 0,null),pe===null)throw Error(T(349));_r&30||jh(r,t,s)}return s}function jh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kh(e,t,r,n){t.value=r,t.getSnapshot=n,Nh(t)&&Eh(e)}function Sh(e,t,r){return r(function(){Nh(t)&&Eh(e)})}function Nh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ht(e,r)}catch{return!0}}function Eh(e){var t=Et(e,1);t!==null&&ct(t,e,1,-1)}function Yu(e){var t=mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:e},t.queue=e,e=e.dispatch=Jp.bind(null,re,e),[t.memoizedState,e]}function us(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ch(){return et().memoizedState}function li(e,t,r,n){var s=mt();re.flags|=e,s.memoizedState=us(1|t,r,void 0,n===void 0?null:n)}function Ji(e,t,r,n){var s=et();n=n===void 0?null:n;var i=void 0;if(he!==null){var l=he.memoizedState;if(i=l.destroy,n!==null&&Lo(n,l.deps)){s.memoizedState=us(t,r,i,n);return}}re.flags|=e,s.memoizedState=us(1|t,r,i,n)}function Xu(e,t){return li(8390656,8,e,t)}function zo(e,t){return Ji(2048,8,e,t)}function Th(e,t){return Ji(4,2,e,t)}function Ph(e,t){return Ji(4,4,e,t)}function Oh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rh(e,t,r){return r=r!=null?r.concat([e]):null,Ji(4,4,Oh.bind(null,t,e),r)}function Mo(){}function Ah(e,t){var r=et();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ih(e,t){var r=et();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function $h(e,t,r){return _r&21?(ht(r,t)||(r=Md(),re.lanes|=r,jr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oe=!0),e.memoizedState=r)}function Kp(e,t){var r=K;K=r!==0&&4>r?r:4,e(!0);var n=Oa.transition;Oa.transition={};try{e(!1),t()}finally{K=r,Oa.transition=n}}function Lh(){return et().memoizedState}function Gp(e,t,r){var n=Jt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Dh(e))Uh(t,r);else if(r=yh(e,t,r,n),r!==null){var s=Ee();ct(r,e,n,s),zh(r,t,n)}}function Jp(e,t,r){var n=Jt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))Uh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,u=i(l,r);if(s.hasEagerState=!0,s.eagerState=u,ht(u,l)){var o=t.interleaved;o===null?(s.next=s,Oo(t)):(s.next=o.next,o.next=s),t.interleaved=s;return}}catch{}finally{}r=yh(e,t,s,n),r!==null&&(s=Ee(),ct(r,e,n,s),zh(r,t,n))}}function Dh(e){var t=e.alternate;return e===re||t!==null&&t===re}function Uh(e,t){Bn=Ti=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vo(e,r)}}var Pi={readContext:Ze,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Qp={readContext:Ze,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:Ze,useEffect:Xu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,li(4194308,4,Oh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){return li(4,2,e,t)},useMemo:function(e,t){var r=mt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=mt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gp.bind(null,re,e),[n.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:Yu,useDebugValue:Mo,useDeferredValue:function(e){return mt().memoizedState=e},useTransition:function(){var e=Yu(!1),t=e[0];return e=Kp.bind(null,e[1]),mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=re,s=mt();if(Z){if(r===void 0)throw Error(T(407));r=r()}else{if(r=t(),pe===null)throw Error(T(349));_r&30||jh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Xu(Sh.bind(null,n,i,e),[e]),n.flags|=2048,us(9,kh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=mt(),t=pe.identifierPrefix;if(Z){var r=_t,n=bt;r=(n&~(1<<32-ut(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ls++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Hp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yp={readContext:Ze,useCallback:Ah,useContext:Ze,useEffect:zo,useImperativeHandle:Rh,useInsertionEffect:Th,useLayoutEffect:Ph,useMemo:Ih,useReducer:Ra,useRef:Ch,useState:function(){return Ra(os)},useDebugValue:Mo,useDeferredValue:function(e){var t=et();return $h(t,he.memoizedState,e)},useTransition:function(){var e=Ra(os)[0],t=et().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:_h,useId:Lh,unstable_isNewReconciler:!1},Xp={readContext:Ze,useCallback:Ah,useContext:Ze,useEffect:zo,useImperativeHandle:Rh,useInsertionEffect:Th,useLayoutEffect:Ph,useMemo:Ih,useReducer:Aa,useRef:Ch,useState:function(){return Aa(os)},useDebugValue:Mo,useDeferredValue:function(e){var t=et();return he===null?t.memoizedState=e:$h(t,he.memoizedState,e)},useTransition:function(){var e=Aa(os)[0],t=et().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:_h,useId:Lh,unstable_isNewReconciler:!1};function st(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Sl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ne({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qi={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ee(),s=Jt(e),i=jt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Kt(e,i,s),t!==null&&(ct(t,e,s,n),ii(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ee(),s=Jt(e),i=jt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Kt(e,i,s),t!==null&&(ct(t,e,s,n),ii(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ee(),n=Jt(e),s=jt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Kt(e,s,n),t!==null&&(ct(t,e,n,r),ii(t,e,n))}};function Zu(e,t,r,n,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!ts(r,n)||!ts(s,i):!0}function Mh(e,t,r){var n=!1,s=Zt,i=t.contextType;return typeof i=="object"&&i!==null?i=Ze(i):(s=Ae(t)?wr:Se.current,n=t.contextTypes,i=(n=n!=null)?on(e,s):Zt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ec(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Qi.enqueueReplaceState(t,t.state,null)}function Nl(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ro(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ze(i):(i=Ae(t)?wr:Se.current,s.context=on(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Sl(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Qi.enqueueReplaceState(s,s.state,null),Ei(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function hn(e,t){try{var r="",n=t;do r+=Nm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ia(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function El(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Zp=typeof WeakMap=="function"?WeakMap:Map;function Bh(e,t,r){r=jt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ri||(Ri=!0,Dl=n),El(e,t)},r}function Fh(e,t,r){r=jt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){El(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){El(e,t),typeof n!="function"&&(Gt===null?Gt=new Set([this]):Gt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function tc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Zp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=fg.bind(null,e,t,r),t.then(e,e))}function rc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=jt(-1,1),t.tag=2,Kt(r,t,1))),r.lanes|=1),e)}var eg=Pt.ReactCurrentOwner,Oe=!1;function Ne(e,t,r,n){t.child=e===null?vh(t,null,r,n):cn(t,e.child,r,n)}function sc(e,t,r,n,s){r=r.render;var i=t.ref;return nn(t,s),n=Do(e,t,r,n,i,s),r=Uo(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ct(e,t,s)):(Z&&r&&So(t),t.flags|=1,Ne(e,t,n,s),t.child)}function ic(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Go(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,qh(e,t,i,n,s)):(e=di(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:ts,r(l,n)&&e.ref===t.ref)return Ct(e,t,s)}return t.flags|=1,e=Qt(i,n),e.ref=t.ref,e.return=t,t.child=e}function qh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ts(i,n)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Oe=!0);else return t.lanes=e.lanes,Ct(e,t,s)}return Cl(e,t,r,n,s)}function Vh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Yr,ze),ze|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(Yr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,J(Yr,ze),ze|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,J(Yr,ze),ze|=n;return Ne(e,t,s,r),t.child}function Wh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,r,n,s){var i=Ae(r)?wr:Se.current;return i=on(t,i),nn(t,s),r=Do(e,t,r,n,i,s),n=Uo(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ct(e,t,s)):(Z&&n&&So(t),t.flags|=1,Ne(e,t,r,s),t.child)}function ac(e,t,r,n,s){if(Ae(r)){var i=!0;_i(t)}else i=!1;if(nn(t,s),t.stateNode===null)oi(e,t),Mh(t,r,n),Nl(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var o=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ze(c):(c=Ae(r)?wr:Se.current,c=on(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||o!==c)&&ec(t,l,n,c),$t=!1;var d=t.memoizedState;l.state=d,Ei(t,n,l,s),o=t.memoizedState,u!==n||d!==o||Re.current||$t?(typeof h=="function"&&(Sl(t,r,h,n),o=t.memoizedState),(u=$t||Zu(t,r,u,n,d,o,c))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),l.props=n,l.state=o,l.context=c,n=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,xh(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:st(t.type,u),l.props=c,f=t.pendingProps,d=l.context,o=r.contextType,typeof o=="object"&&o!==null?o=Ze(o):(o=Ae(r)?wr:Se.current,o=on(t,o));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==f||d!==o)&&ec(t,l,n,o),$t=!1,d=t.memoizedState,l.state=d,Ei(t,n,l,s);var y=t.memoizedState;u!==f||d!==y||Re.current||$t?(typeof v=="function"&&(Sl(t,r,v,n),y=t.memoizedState),(c=$t||Zu(t,r,c,n,d,y,o)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=o,n=c):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Tl(e,t,r,n,i,s)}function Tl(e,t,r,n,s,i){Wh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&Wu(t,r,!1),Ct(e,t,i);n=t.stateNode,eg.current=t;var u=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=cn(t,e.child,null,i),t.child=cn(t,null,u,i)):Ne(e,t,u,i),t.memoizedState=n.state,s&&Wu(t,r,!0),t.child}function Hh(e){var t=e.stateNode;t.pendingContext?Vu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vu(e,t.context,!1),Ao(e,t.containerInfo)}function lc(e,t,r,n,s){return un(),Eo(s),t.flags|=256,Ne(e,t,r,n),t.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kh(e,t,r){var n=t.pendingProps,s=te.current,i=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),J(te,s&1),e===null)return jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Zi(l,n,0,null),e=yr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ol(r),t.memoizedState=Pl,e):Bo(t,l));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return tg(e,t,l,n,u,s,r);if(i){i=n.fallback,l=t.mode,s=e.child,u=s.sibling;var o={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=Qt(s,o),n.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Qt(u,i):(i=yr(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Ol(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Pl,n}return i=e.child,e=i.sibling,n=Qt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Bo(e,t){return t=Zi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ws(e,t,r,n){return n!==null&&Eo(n),cn(t,e.child,null,r),e=Bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tg(e,t,r,n,s,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Ia(Error(T(422))),Ws(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Zi({mode:"visible",children:n.children},s,0,null),i=yr(i,s,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&cn(t,e.child,null,l),t.child.memoizedState=Ol(l),t.memoizedState=Pl,i);if(!(t.mode&1))return Ws(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var u=n.dgst;return n=u,i=Error(T(419)),n=Ia(i,n,void 0),Ws(e,t,l,n)}if(u=(l&e.childLanes)!==0,Oe||u){if(n=pe,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Et(e,s),ct(n,e,s,-1))}return Ko(),n=Ia(Error(T(421))),Ws(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=mg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Fe=Ht(s.nextSibling),qe=t,Z=!0,ot=null,e!==null&&(Je[Qe++]=bt,Je[Qe++]=_t,Je[Qe++]=br,bt=e.id,_t=e.overflow,br=t),t=Bo(t,n.children),t.flags|=4096,t)}function oc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),kl(e.return,t,r)}function $a(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Gh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ne(e,t,n.children,r),n=te.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oc(e,r,t);else if(e.tag===19)oc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(J(te,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ci(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),$a(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ci(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}$a(t,!0,r,null,i);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ct(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,r=Qt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Qt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function rg(e,t,r){switch(t.tag){case 3:Hh(t),un();break;case 5:wh(t);break;case 1:Ae(t.type)&&_i(t);break;case 4:Ao(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;J(Si,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(J(te,te.current&1),t.flags|=128,null):r&t.child.childLanes?Kh(e,t,r):(J(te,te.current&1),e=Ct(e,t,r),e!==null?e.sibling:null);J(te,te.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(te,te.current),n)break;return null;case 22:case 23:return t.lanes=0,Vh(e,t,r)}return Ct(e,t,r)}var Jh,Rl,Qh,Yh;Jh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rl=function(){};Qh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,pr(vt.current);var i=null;switch(r){case"input":s=el(e,s),n=el(e,n),i=[];break;case"select":s=ne({},s,{value:void 0}),n=ne({},n,{value:void 0}),i=[];break;case"textarea":s=nl(e,s),n=nl(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wi)}il(r,n);var l;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var u=s[c];for(l in u)u.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var o=n[c];if(u=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&o!==u&&(o!=null||u!=null))if(c==="style")if(u){for(l in u)!u.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in o)o.hasOwnProperty(l)&&u[l]!==o[l]&&(r||(r={}),r[l]=o[l])}else r||(i||(i=[]),i.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,u=u?u.__html:void 0,o!=null&&u!==o&&(i=i||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gn.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Y("scroll",e),i||u===o||(i=[])):(i=i||[]).push(c,o))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Yh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cn(e,t){if(!Z)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ng(e,t,r){var n=t.pendingProps;switch(No(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Ae(t.type)&&bi(),je(t),null;case 3:return n=t.stateNode,dn(),X(Re),X(Se),$o(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ot!==null&&(Ml(ot),ot=null))),Rl(e,t),je(t),null;case 5:Io(t);var s=pr(as.current);if(r=t.type,e!==null&&t.stateNode!=null)Qh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(T(166));return je(t),null}if(e=pr(vt.current),qs(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[pt]=t,n[ss]=i,e=(t.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(s=0;s<In.length;s++)Y(In[s],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":vu(n,i),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Y("invalid",n);break;case"textarea":xu(n,i),Y("invalid",n)}il(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?n.textContent!==u&&(i.suppressHydrationWarning!==!0&&Fs(n.textContent,u,e),s=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Fs(n.textContent,u,e),s=["children",""+u]):Gn.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Y("scroll",n)}switch(r){case"input":Is(n),yu(n,i,!0);break;case"textarea":Is(n),wu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=wi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[pt]=t,e[ss]=n,Jh(e,t,!1,!1),t.stateNode=e;e:{switch(l=al(r,n),r){case"dialog":Y("cancel",e),Y("close",e),s=n;break;case"iframe":case"object":case"embed":Y("load",e),s=n;break;case"video":case"audio":for(s=0;s<In.length;s++)Y(In[s],e);s=n;break;case"source":Y("error",e),s=n;break;case"img":case"image":case"link":Y("error",e),Y("load",e),s=n;break;case"details":Y("toggle",e),s=n;break;case"input":vu(e,n),s=el(e,n),Y("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ne({},n,{value:void 0}),Y("invalid",e);break;case"textarea":xu(e,n),s=nl(e,n),Y("invalid",e);break;default:s=n}il(r,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var o=u[i];i==="style"?Cd(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Nd(e,o)):i==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Jn(e,o):typeof o=="number"&&Jn(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gn.hasOwnProperty(i)?o!=null&&i==="onScroll"&&Y("scroll",e):o!=null&&co(e,i,o,l))}switch(r){case"input":Is(e),yu(e,n,!1);break;case"textarea":Is(e),wu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Xt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Zr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Zr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Yh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(T(166));if(r=pr(as.current),pr(vt.current),qs(t)){if(n=t.stateNode,r=t.memoizedProps,n[pt]=t,(i=n.nodeValue!==r)&&(e=qe,e!==null))switch(e.tag){case 3:Fs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pt]=t,t.stateNode=n}return je(t),null;case 13:if(X(te),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Z&&Fe!==null&&t.mode&1&&!(t.flags&128))ph(),un(),t.flags|=98560,i=!1;else if(i=qs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(T(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[pt]=t}else un(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),i=!1}else ot!==null&&(Ml(ot),ot=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||te.current&1?fe===0&&(fe=3):Ko())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return dn(),Rl(e,t),e===null&&rs(t.stateNode.containerInfo),je(t),null;case 10:return Po(t.type._context),je(t),null;case 17:return Ae(t.type)&&bi(),je(t),null;case 19:if(X(te),i=t.memoizedState,i===null)return je(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Cn(i,!1);else{if(fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ci(e),l!==null){for(t.flags|=128,Cn(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return J(te,te.current&1|2),t.child}e=e.sibling}i.tail!==null&&le()>fn&&(t.flags|=128,n=!0,Cn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ci(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Z)return je(t),null}else 2*le()-i.renderingStartTime>fn&&r!==1073741824&&(t.flags|=128,n=!0,Cn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,r=te.current,J(te,n?r&1|2:r&1),t):(je(t),null);case 22:case 23:return Ho(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ze&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function sg(e,t){switch(No(t),t.tag){case 1:return Ae(t.type)&&bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dn(),X(Re),X(Se),$o(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Io(t),null;case 13:if(X(te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));un()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(te),null;case 4:return dn(),null;case 10:return Po(t.type._context),null;case 22:case 23:return Ho(),null;case 24:return null;default:return null}}var Hs=!1,ke=!1,ig=typeof WeakSet=="function"?WeakSet:Set,A=null;function Qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ie(e,t,n)}else r.current=null}function Al(e,t,r){try{r()}catch(n){ie(e,t,n)}}var uc=!1;function ag(e,t){if(gl=vi,e=rh(),ko(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,u=-1,o=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var v;f!==r||s!==0&&f.nodeType!==3||(u=l+s),f!==i||n!==0&&f.nodeType!==3||(o=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(v=f.firstChild)!==null;)d=f,f=v;for(;;){if(f===e)break t;if(d===r&&++c===s&&(u=l),d===i&&++h===n&&(o=l),(v=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=v}r=u===-1||o===-1?null:{start:u,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(vl={focusedElem:e,selectionRange:r},vi=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:st(t.type,w),x);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(b){ie(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return y=uc,uc=!1,y}function Fn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Al(t,r,i)}s=s.next}while(s!==n)}}function Yi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Il(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Xh(e){var t=e.alternate;t!==null&&(e.alternate=null,Xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pt],delete t[ss],delete t[wl],delete t[Fp],delete t[qp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zh(e){return e.tag===5||e.tag===3||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $l(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wi));else if(n!==4&&(e=e.child,e!==null))for($l(e,t,r),e=e.sibling;e!==null;)$l(e,t,r),e=e.sibling}function Ll(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ll(e,t,r),e=e.sibling;e!==null;)Ll(e,t,r),e=e.sibling}var ye=null,at=!1;function At(e,t,r){for(r=r.child;r!==null;)ef(e,t,r),r=r.sibling}function ef(e,t,r){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(qi,r)}catch{}switch(r.tag){case 5:ke||Qr(r,t);case 6:var n=ye,s=at;ye=null,At(e,t,r),ye=n,at=s,ye!==null&&(at?(e=ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ye.removeChild(r.stateNode));break;case 18:ye!==null&&(at?(e=ye,r=r.stateNode,e.nodeType===8?Ca(e.parentNode,r):e.nodeType===1&&Ca(e,r),Zn(e)):Ca(ye,r.stateNode));break;case 4:n=ye,s=at,ye=r.stateNode.containerInfo,at=!0,At(e,t,r),ye=n,at=s;break;case 0:case 11:case 14:case 15:if(!ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Al(r,t,l),s=s.next}while(s!==n)}At(e,t,r);break;case 1:if(!ke&&(Qr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){ie(r,t,u)}At(e,t,r);break;case 21:At(e,t,r);break;case 22:r.mode&1?(ke=(n=ke)||r.memoizedState!==null,At(e,t,r),ke=n):At(e,t,r);break;default:At(e,t,r)}}function dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ig),t.forEach(function(n){var s=pg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function rt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:ye=u.stateNode,at=!1;break e;case 3:ye=u.stateNode.containerInfo,at=!0;break e;case 4:ye=u.stateNode.containerInfo,at=!0;break e}u=u.return}if(ye===null)throw Error(T(160));ef(i,l,s),ye=null,at=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(c){ie(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tf(t,e),t=t.sibling}function tf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),ft(e),n&4){try{Fn(3,e,e.return),Yi(3,e)}catch(w){ie(e,e.return,w)}try{Fn(5,e,e.return)}catch(w){ie(e,e.return,w)}}break;case 1:rt(t,e),ft(e),n&512&&r!==null&&Qr(r,r.return);break;case 5:if(rt(t,e),ft(e),n&512&&r!==null&&Qr(r,r.return),e.flags&32){var s=e.stateNode;try{Jn(s,"")}catch(w){ie(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,u=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&jd(s,i),al(u,l);var c=al(u,i);for(l=0;l<o.length;l+=2){var h=o[l],f=o[l+1];h==="style"?Cd(s,f):h==="dangerouslySetInnerHTML"?Nd(s,f):h==="children"?Jn(s,f):co(s,h,f,c)}switch(u){case"input":tl(s,i);break;case"textarea":kd(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Zr(s,!!i.multiple,v,!1):d!==!!i.multiple&&(i.defaultValue!=null?Zr(s,!!i.multiple,i.defaultValue,!0):Zr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ss]=i}catch(w){ie(e,e.return,w)}}break;case 6:if(rt(t,e),ft(e),n&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){ie(e,e.return,w)}}break;case 3:if(rt(t,e),ft(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zn(t.containerInfo)}catch(w){ie(e,e.return,w)}break;case 4:rt(t,e),ft(e);break;case 13:rt(t,e),ft(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vo=le())),n&4&&dc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(ke=(c=ke)||h,rt(t,e),ke=c):rt(t,e),ft(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(A=e,h=e.child;h!==null;){for(f=A=h;A!==null;){switch(d=A,v=d.child,d.tag){case 0:case 11:case 14:case 15:Fn(4,d,d.return);break;case 1:Qr(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){ie(n,r,w)}}break;case 5:Qr(d,d.return);break;case 22:if(d.memoizedState!==null){fc(f);continue}}v!==null?(v.return=d,A=v):fc(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=f.stateNode,o=f.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,u.style.display=Ed("display",l))}catch(w){ie(e,e.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){ie(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rt(t,e),ft(e),n&4&&dc(e);break;case 21:break;default:rt(t,e),ft(e)}}function ft(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zh(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Jn(s,""),n.flags&=-33);var i=cc(e);Ll(e,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=cc(e);$l(e,u,l);break;default:throw Error(T(161))}}catch(o){ie(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lg(e,t,r){A=e,rf(e)}function rf(e,t,r){for(var n=(e.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||Hs;if(!l){var u=s.alternate,o=u!==null&&u.memoizedState!==null||ke;u=Hs;var c=ke;if(Hs=l,(ke=o)&&!c)for(A=s;A!==null;)l=A,o=l.child,l.tag===22&&l.memoizedState!==null?mc(s):o!==null?(o.return=l,A=o):mc(s);for(;i!==null;)A=i,rf(i),i=i.sibling;A=s,Hs=u,ke=c}hc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):hc(e)}}function hc(e){for(;A!==null;){var t=A;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Yi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ke)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:st(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qu(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Qu(t,l,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Zn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ke||t.flags&512&&Il(t)}catch(d){ie(t,t.return,d)}}if(t===e){A=null;break}if(r=t.sibling,r!==null){r.return=t.return,A=r;break}A=t.return}}function fc(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var r=t.sibling;if(r!==null){r.return=t.return,A=r;break}A=t.return}}function mc(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Yi(4,t)}catch(o){ie(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(o){ie(t,s,o)}}var i=t.return;try{Il(t)}catch(o){ie(t,i,o)}break;case 5:var l=t.return;try{Il(t)}catch(o){ie(t,l,o)}}}catch(o){ie(t,t.return,o)}if(t===e){A=null;break}var u=t.sibling;if(u!==null){u.return=t.return,A=u;break}A=t.return}}var og=Math.ceil,Oi=Pt.ReactCurrentDispatcher,Fo=Pt.ReactCurrentOwner,Xe=Pt.ReactCurrentBatchConfig,W=0,pe=null,ce=null,xe=0,ze=0,Yr=tr(0),fe=0,cs=null,jr=0,Xi=0,qo=0,qn=null,Pe=null,Vo=0,fn=1/0,yt=null,Ri=!1,Dl=null,Gt=null,Ks=!1,Bt=null,Ai=0,Vn=0,Ul=null,ui=-1,ci=0;function Ee(){return W&6?le():ui!==-1?ui:ui=le()}function Jt(e){return e.mode&1?W&2&&xe!==0?xe&-xe:Wp.transition!==null?(ci===0&&(ci=Md()),ci):(e=K,e!==0||(e=window.event,e=e===void 0?16:Kd(e.type)),e):1}function ct(e,t,r,n){if(50<Vn)throw Vn=0,Ul=null,Error(T(185));js(e,r,n),(!(W&2)||e!==pe)&&(e===pe&&(!(W&2)&&(Xi|=r),fe===4&&Ut(e,xe)),Ie(e,n),r===1&&W===0&&!(t.mode&1)&&(fn=le()+500,Gi&&rr()))}function Ie(e,t){var r=e.callbackNode;Wm(e,t);var n=gi(e,e===pe?xe:0);if(n===0)r!==null&&ju(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ju(r),t===1)e.tag===0?Vp(pc.bind(null,e)):hh(pc.bind(null,e)),Mp(function(){!(W&6)&&rr()}),r=null;else{switch(Bd(n)){case 1:r=go;break;case 4:r=Ud;break;case 16:r=pi;break;case 536870912:r=zd;break;default:r=pi}r=df(r,nf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nf(e,t){if(ui=-1,ci=0,W&6)throw Error(T(327));var r=e.callbackNode;if(sn()&&e.callbackNode!==r)return null;var n=gi(e,e===pe?xe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ii(e,n);else{t=n;var s=W;W|=2;var i=af();(pe!==e||xe!==t)&&(yt=null,fn=le()+500,vr(e,t));do try{dg();break}catch(u){sf(e,u)}while(!0);To(),Oi.current=i,W=s,ce!==null?t=0:(pe=null,xe=0,t=fe)}if(t!==0){if(t===2&&(s=dl(e),s!==0&&(n=s,t=zl(e,s))),t===1)throw r=cs,vr(e,0),Ut(e,n),Ie(e,le()),r;if(t===6)Ut(e,n);else{if(s=e.current.alternate,!(n&30)&&!ug(s)&&(t=Ii(e,n),t===2&&(i=dl(e),i!==0&&(n=i,t=zl(e,i))),t===1))throw r=cs,vr(e,0),Ut(e,n),Ie(e,le()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(T(345));case 2:ur(e,Pe,yt);break;case 3:if(Ut(e,n),(n&130023424)===n&&(t=Vo+500-le(),10<t)){if(gi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ee(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=xl(ur.bind(null,e,Pe,yt),t);break}ur(e,Pe,yt);break;case 4:if(Ut(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-ut(n);i=1<<l,l=t[l],l>s&&(s=l),n&=~i}if(n=s,n=le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*og(n/1960))-n,10<n){e.timeoutHandle=xl(ur.bind(null,e,Pe,yt),n);break}ur(e,Pe,yt);break;case 5:ur(e,Pe,yt);break;default:throw Error(T(329))}}}return Ie(e,le()),e.callbackNode===r?nf.bind(null,e):null}function zl(e,t){var r=qn;return e.current.memoizedState.isDehydrated&&(vr(e,t).flags|=256),e=Ii(e,t),e!==2&&(t=Pe,Pe=r,t!==null&&Ml(t)),e}function Ml(e){Pe===null?Pe=e:Pe.push.apply(Pe,e)}function ug(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ht(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~qo,t&=~Xi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ut(t),n=1<<r;e[r]=-1,t&=~n}}function pc(e){if(W&6)throw Error(T(327));sn();var t=gi(e,0);if(!(t&1))return Ie(e,le()),null;var r=Ii(e,t);if(e.tag!==0&&r===2){var n=dl(e);n!==0&&(t=n,r=zl(e,n))}if(r===1)throw r=cs,vr(e,0),Ut(e,t),Ie(e,le()),r;if(r===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ur(e,Pe,yt),Ie(e,le()),null}function Wo(e,t){var r=W;W|=1;try{return e(t)}finally{W=r,W===0&&(fn=le()+500,Gi&&rr())}}function kr(e){Bt!==null&&Bt.tag===0&&!(W&6)&&sn();var t=W;W|=1;var r=Xe.transition,n=K;try{if(Xe.transition=null,K=1,e)return e()}finally{K=n,Xe.transition=r,W=t,!(W&6)&&rr()}}function Ho(){ze=Yr.current,X(Yr)}function vr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,zp(r)),ce!==null)for(r=ce.return;r!==null;){var n=r;switch(No(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bi();break;case 3:dn(),X(Re),X(Se),$o();break;case 5:Io(n);break;case 4:dn();break;case 13:X(te);break;case 19:X(te);break;case 10:Po(n.type._context);break;case 22:case 23:Ho()}r=r.return}if(pe=e,ce=e=Qt(e.current,null),xe=ze=t,fe=0,cs=null,qo=Xi=jr=0,Pe=qn=null,mr!==null){for(t=0;t<mr.length;t++)if(r=mr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}mr=null}return e}function sf(e,t){do{var r=ce;try{if(To(),ai.current=Pi,Ti){for(var n=re.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ti=!1}if(_r=0,me=he=re=null,Bn=!1,ls=0,Fo.current=null,r===null||r.return===null){fe=1,cs=t,ce=null;break}e:{var i=e,l=r.return,u=r,o=t;if(t=xe,u.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,h=u,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=rc(l);if(v!==null){v.flags&=-257,nc(v,l,u,i,t),v.mode&1&&tc(i,c,t),t=v,o=c;var y=t.updateQueue;if(y===null){var w=new Set;w.add(o),t.updateQueue=w}else y.add(o);break e}else{if(!(t&1)){tc(i,c,t),Ko();break e}o=Error(T(426))}}else if(Z&&u.mode&1){var x=rc(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),nc(x,l,u,i,t),Eo(hn(o,u));break e}}i=o=hn(o,u),fe!==4&&(fe=2),qn===null?qn=[i]:qn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Bh(i,o,t);Ju(i,p);break e;case 1:u=o;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Gt===null||!Gt.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=Fh(i,u,t);Ju(i,b);break e}}i=i.return}while(i!==null)}of(r)}catch(k){t=k,ce===r&&r!==null&&(ce=r=r.return);continue}break}while(!0)}function af(){var e=Oi.current;return Oi.current=Pi,e===null?Pi:e}function Ko(){(fe===0||fe===3||fe===2)&&(fe=4),pe===null||!(jr&268435455)&&!(Xi&268435455)||Ut(pe,xe)}function Ii(e,t){var r=W;W|=2;var n=af();(pe!==e||xe!==t)&&(yt=null,vr(e,t));do try{cg();break}catch(s){sf(e,s)}while(!0);if(To(),W=r,Oi.current=n,ce!==null)throw Error(T(261));return pe=null,xe=0,fe}function cg(){for(;ce!==null;)lf(ce)}function dg(){for(;ce!==null&&!Lm();)lf(ce)}function lf(e){var t=cf(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?of(e):ce=t,Fo.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sg(r,t),r!==null){r.flags&=32767,ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fe=6,ce=null;return}}else if(r=ng(r,t,ze),r!==null){ce=r;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);fe===0&&(fe=5)}function ur(e,t,r){var n=K,s=Xe.transition;try{Xe.transition=null,K=1,hg(e,t,r,n)}finally{Xe.transition=s,K=n}return null}function hg(e,t,r,n){do sn();while(Bt!==null);if(W&6)throw Error(T(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Hm(e,i),e===pe&&(ce=pe=null,xe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ks||(Ks=!0,df(pi,function(){return sn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Xe.transition,Xe.transition=null;var l=K;K=1;var u=W;W|=4,Fo.current=null,ag(e,r),tf(r,e),Rp(vl),vi=!!gl,vl=gl=null,e.current=r,lg(r),Dm(),W=u,K=l,Xe.transition=i}else e.current=r;if(Ks&&(Ks=!1,Bt=e,Ai=s),i=e.pendingLanes,i===0&&(Gt=null),Mm(r.stateNode),Ie(e,le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ri)throw Ri=!1,e=Dl,Dl=null,e;return Ai&1&&e.tag!==0&&sn(),i=e.pendingLanes,i&1?e===Ul?Vn++:(Vn=0,Ul=e):Vn=0,rr(),null}function sn(){if(Bt!==null){var e=Bd(Ai),t=Xe.transition,r=K;try{if(Xe.transition=null,K=16>e?16:e,Bt===null)var n=!1;else{if(e=Bt,Bt=null,Ai=0,W&6)throw Error(T(331));var s=W;for(W|=4,A=e.current;A!==null;){var i=A,l=i.child;if(A.flags&16){var u=i.deletions;if(u!==null){for(var o=0;o<u.length;o++){var c=u[o];for(A=c;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 15:Fn(8,h,i)}var f=h.child;if(f!==null)f.return=h,A=f;else for(;A!==null;){h=A;var d=h.sibling,v=h.return;if(Xh(h),h===c){A=null;break}if(d!==null){d.return=v,A=d;break}A=v}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}A=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,A=l;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,A=p;break e}A=i.return}}var m=e.current;for(A=m;A!==null;){l=A;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,A=g;else e:for(l=m;A!==null;){if(u=A,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Yi(9,u)}}catch(k){ie(u,u.return,k)}if(u===l){A=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,A=b;break e}A=u.return}}if(W=s,rr(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(qi,e)}catch{}n=!0}return n}finally{K=r,Xe.transition=t}}return!1}function gc(e,t,r){t=hn(r,t),t=Bh(e,t,1),e=Kt(e,t,1),t=Ee(),e!==null&&(js(e,1,t),Ie(e,t))}function ie(e,t,r){if(e.tag===3)gc(e,e,r);else for(;t!==null;){if(t.tag===3){gc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gt===null||!Gt.has(n))){e=hn(r,e),e=Fh(t,e,1),t=Kt(t,e,1),e=Ee(),t!==null&&(js(t,1,e),Ie(t,e));break}}t=t.return}}function fg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ee(),e.pingedLanes|=e.suspendedLanes&r,pe===e&&(xe&r)===r&&(fe===4||fe===3&&(xe&130023424)===xe&&500>le()-Vo?vr(e,0):qo|=r),Ie(e,t)}function uf(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var r=Ee();e=Et(e,t),e!==null&&(js(e,t,r),Ie(e,r))}function mg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),uf(e,r)}function pg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(t),uf(e,r)}var cf;cf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Re.current)Oe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Oe=!1,rg(e,t,r);Oe=!!(e.flags&131072)}else Oe=!1,Z&&t.flags&1048576&&fh(t,ki,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;oi(e,t),e=t.pendingProps;var s=on(t,Se.current);nn(t,r),s=Do(null,t,n,e,s,r);var i=Uo();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ae(n)?(i=!0,_i(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ro(t),s.updater=Qi,t.stateNode=s,s._reactInternals=t,Nl(t,n,e,r),t=Tl(null,t,n,!0,i,r)):(t.tag=0,Z&&i&&So(t),Ne(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(oi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=vg(n),e=st(n,e),s){case 0:t=Cl(null,t,n,e,r);break e;case 1:t=ac(null,t,n,e,r);break e;case 11:t=sc(null,t,n,e,r);break e;case 14:t=ic(null,t,n,st(n.type,e),r);break e}throw Error(T(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:st(n,s),Cl(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:st(n,s),ac(e,t,n,s,r);case 3:e:{if(Hh(t),e===null)throw Error(T(387));n=t.pendingProps,i=t.memoizedState,s=i.element,xh(e,t),Ei(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=hn(Error(T(423)),t),t=lc(e,t,n,r,s);break e}else if(n!==s){s=hn(Error(T(424)),t),t=lc(e,t,n,r,s);break e}else for(Fe=Ht(t.stateNode.containerInfo.firstChild),qe=t,Z=!0,ot=null,r=vh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(un(),n===s){t=Ct(e,t,r);break e}Ne(e,t,n,r)}t=t.child}return t;case 5:return wh(t),e===null&&jl(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,yl(n,s)?l=null:i!==null&&yl(n,i)&&(t.flags|=32),Wh(e,t),Ne(e,t,l,r),t.child;case 6:return e===null&&jl(t),null;case 13:return Kh(e,t,r);case 4:return Ao(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=cn(t,null,n,r):Ne(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:st(n,s),sc(e,t,n,s,r);case 7:return Ne(e,t,t.pendingProps,r),t.child;case 8:return Ne(e,t,t.pendingProps.children,r),t.child;case 12:return Ne(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,J(Si,n._currentValue),n._currentValue=l,i!==null)if(ht(i.value,l)){if(i.children===s.children&&!Re.current){t=Ct(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var o=u.firstContext;o!==null;){if(o.context===n){if(i.tag===1){o=jt(-1,r&-r),o.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?o.next=o:(o.next=h.next,h.next=o),c.pending=o}}i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),kl(i.return,r,t),u.lanes|=r;break}o=o.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(T(341));l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),kl(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ne(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,nn(t,r),s=Ze(s),n=n(s),t.flags|=1,Ne(e,t,n,r),t.child;case 14:return n=t.type,s=st(n,t.pendingProps),s=st(n.type,s),ic(e,t,n,s,r);case 15:return qh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:st(n,s),oi(e,t),t.tag=1,Ae(n)?(e=!0,_i(t)):e=!1,nn(t,r),Mh(t,n,s),Nl(t,n,s,r),Tl(null,t,n,!0,e,r);case 19:return Gh(e,t,r);case 22:return Vh(e,t,r)}throw Error(T(156,t.tag))};function df(e,t){return Dd(e,t)}function gg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,r,n){return new gg(e,t,r,n)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vg(e){if(typeof e=="function")return Go(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fo)return 11;if(e===mo)return 14}return 2}function Qt(e,t){var r=e.alternate;return r===null?(r=Ye(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function di(e,t,r,n,s,i){var l=2;if(n=e,typeof e=="function")Go(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Br:return yr(r.children,s,i,t);case ho:l=8,s|=8;break;case Qa:return e=Ye(12,r,t,s|2),e.elementType=Qa,e.lanes=i,e;case Ya:return e=Ye(13,r,t,s),e.elementType=Ya,e.lanes=i,e;case Xa:return e=Ye(19,r,t,s),e.elementType=Xa,e.lanes=i,e;case wd:return Zi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yd:l=10;break e;case xd:l=9;break e;case fo:l=11;break e;case mo:l=14;break e;case It:l=16,n=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=Ye(l,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function yr(e,t,r,n){return e=Ye(7,e,n,t),e.lanes=r,e}function Zi(e,t,r,n){return e=Ye(22,e,n,t),e.elementType=wd,e.lanes=r,e.stateNode={isHidden:!1},e}function La(e,t,r){return e=Ye(6,e,null,t),e.lanes=r,e}function Da(e,t,r){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jo(e,t,r,n,s,i,l,u,o){return e=new yg(e,t,r,u,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ye(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(i),e}function xg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function hf(e){if(!e)return Zt;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ae(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var r=e.type;if(Ae(r))return dh(e,r,t)}return t}function ff(e,t,r,n,s,i,l,u,o){return e=Jo(r,n,!0,e,s,i,l,u,o),e.context=hf(null),r=e.current,n=Ee(),s=Jt(r),i=jt(n,s),i.callback=t??null,Kt(r,i,s),e.current.lanes=s,js(e,s,n),Ie(e,n),e}function ea(e,t,r,n){var s=t.current,i=Ee(),l=Jt(s);return r=hf(r),t.context===null?t.context=r:t.pendingContext=r,t=jt(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Kt(s,t,l),e!==null&&(ct(e,s,l,i),ii(e,s,l)),l}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Qo(e,t){vc(e,t),(e=e.alternate)&&vc(e,t)}function wg(){return null}var mf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yo(e){this._internalRoot=e}ta.prototype.render=Yo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));ea(e,t,null,null)};ta.prototype.unmount=Yo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kr(function(){ea(null,e,null,null)}),t[Nt]=null}};function ta(e){this._internalRoot=e}ta.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&t!==0&&t<Dt[r].priority;r++);Dt.splice(r,0,e),r===0&&Hd(e)}};function Xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yc(){}function bg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=$i(l);i.call(c)}}var l=ff(t,n,e,0,null,!1,!1,"",yc);return e._reactRootContainer=l,e[Nt]=l.current,rs(e.nodeType===8?e.parentNode:e),kr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var u=n;n=function(){var c=$i(o);u.call(c)}}var o=Jo(e,0,!1,null,null,!1,!1,"",yc);return e._reactRootContainer=o,e[Nt]=o.current,rs(e.nodeType===8?e.parentNode:e),kr(function(){ea(t,o,r,n)}),o}function na(e,t,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var u=s;s=function(){var o=$i(l);u.call(o)}}ea(t,l,e,s)}else l=bg(r,t,e,s,n);return $i(l)}Fd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=An(t.pendingLanes);r!==0&&(vo(t,r|1),Ie(t,le()),!(W&6)&&(fn=le()+500,rr()))}break;case 13:kr(function(){var n=Et(e,1);if(n!==null){var s=Ee();ct(n,e,1,s)}}),Qo(e,1)}};yo=function(e){if(e.tag===13){var t=Et(e,134217728);if(t!==null){var r=Ee();ct(t,e,134217728,r)}Qo(e,134217728)}};qd=function(e){if(e.tag===13){var t=Jt(e),r=Et(e,t);if(r!==null){var n=Ee();ct(r,e,t,n)}Qo(e,t)}};Vd=function(){return K};Wd=function(e,t){var r=K;try{return K=e,t()}finally{K=r}};ol=function(e,t,r){switch(t){case"input":if(tl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ki(n);if(!s)throw Error(T(90));_d(n),tl(n,s)}}}break;case"textarea":kd(e,r);break;case"select":t=r.value,t!=null&&Zr(e,!!r.multiple,t,!1)}};Od=Wo;Rd=kr;var _g={usingClientEntryPoint:!1,Events:[Ss,Wr,Ki,Td,Pd,Wo]},Tn={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jg={bundleType:Tn.bundleType,version:Tn.version,rendererPackageName:Tn.rendererPackageName,rendererConfig:Tn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$d(e),e===null?null:e.stateNode},findFiberByHostInstance:Tn.findFiberByHostInstance||wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gs.isDisabled&&Gs.supportsFiber)try{qi=Gs.inject(jg),gt=Gs}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;We.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xo(t))throw Error(T(200));return xg(e,t,null,r)};We.createRoot=function(e,t){if(!Xo(e))throw Error(T(299));var r=!1,n="",s=mf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Jo(e,1,!1,null,null,r,!1,n,s),e[Nt]=t.current,rs(e.nodeType===8?e.parentNode:e),new Yo(t)};We.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=$d(t),e=e===null?null:e.stateNode,e};We.flushSync=function(e){return kr(e)};We.hydrate=function(e,t,r){if(!ra(t))throw Error(T(200));return na(null,e,t,!0,r)};We.hydrateRoot=function(e,t,r){if(!Xo(e))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=mf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=ff(t,null,e,1,r??null,s,!1,i,l),e[Nt]=t.current,rs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ta(t)};We.render=function(e,t,r){if(!ra(t))throw Error(T(200));return na(null,e,t,!1,r)};We.unmountComponentAtNode=function(e){if(!ra(e))throw Error(T(40));return e._reactRootContainer?(kr(function(){na(null,null,e,!1,function(){e._reactRootContainer=null,e[Nt]=null})}),!0):!1};We.unstable_batchedUpdates=Wo;We.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ra(r))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return na(e,t,r,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pf)}catch(e){console.error(e)}}pf(),md.exports=We;var kg=md.exports,xc=kg;Ga.createRoot=xc.createRoot,Ga.hydrateRoot=xc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ds.apply(this,arguments)}var Ft;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ft||(Ft={}));const wc="popstate";function Sg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return Bl("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Li(s)}return Eg(t,r,null,e)}function oe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ng(){return Math.random().toString(36).substr(2,8)}function bc(e,t){return{usr:e.state,key:e.key,idx:t}}function Bl(e,t,r,n){return r===void 0&&(r=null),ds({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xn(t):t,{state:r,key:t&&t.key||n||Ng()})}function Li(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Eg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u=Ft.Pop,o=null,c=h();c==null&&(c=0,l.replaceState(ds({},l.state,{idx:c}),""));function h(){return(l.state||{idx:null}).idx}function f(){u=Ft.Pop;let x=h(),p=x==null?null:x-c;c=x,o&&o({action:u,location:w.location,delta:p})}function d(x,p){u=Ft.Push;let m=Bl(w.location,x,p);c=h()+1;let g=bc(m,c),b=w.createHref(m);try{l.pushState(g,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(b)}i&&o&&o({action:u,location:w.location,delta:1})}function v(x,p){u=Ft.Replace;let m=Bl(w.location,x,p);c=h();let g=bc(m,c),b=w.createHref(m);l.replaceState(g,"",b),i&&o&&o({action:u,location:w.location,delta:0})}function y(x){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof x=="string"?x:Li(x);return m=m.replace(/ $/,"%20"),oe(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let w={get action(){return u},get location(){return e(s,l)},listen(x){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(wc,f),o=x,()=>{s.removeEventListener(wc,f),o=null}},createHref(x){return t(s,x)},createURL:y,encodeLocation(x){let p=y(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:v,go(x){return l.go(x)}};return w}var _c;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_c||(_c={}));function Cg(e,t,r){return r===void 0&&(r="/"),Tg(e,t,r)}function Tg(e,t,r,n){let s=typeof t=="string"?xn(t):t,i=eu(s.pathname||"/",r);if(i==null)return null;let l=gf(e);Pg(l);let u=null;for(let o=0;u==null&&o<l.length;++o){let c=Fg(i);u=zg(l[o],c)}return u}function gf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,l,u)=>{let o={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};o.relativePath.startsWith("/")&&(oe(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=Yt([n,o.relativePath]),h=r.concat(o);i.children&&i.children.length>0&&(oe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gf(i.children,t,h,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:Dg(c,i.index),routesMeta:h})};return e.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,l);else for(let o of vf(i.path))s(i,l,o)}),t}function vf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=vf(n.join("/")),u=[];return u.push(...l.map(o=>o===""?i:[i,o].join("/"))),s&&u.push(...l),u.map(o=>e.startsWith("/")&&o===""?"/":o)}function Pg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ug(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Og=/^:[\w-]+$/,Rg=3,Ag=2,Ig=1,$g=10,Lg=-2,jc=e=>e==="*";function Dg(e,t){let r=e.split("/"),n=r.length;return r.some(jc)&&(n+=Lg),t&&(n+=Ag),r.filter(s=>!jc(s)).reduce((s,i)=>s+(Og.test(i)?Rg:i===""?Ig:$g),n)}function Ug(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function zg(e,t,r){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let o=n[u],c=u===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=Mg({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},h),d=o.route;if(!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:Yt([i,f.pathname]),pathnameBase:Kg(Yt([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Yt([i,f.pathnameBase]))}return l}function Mg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Bg(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((c,h,f)=>{let{paramName:d,isOptional:v}=h;if(d==="*"){let w=u[f]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=u[f];return v&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:l,pattern:e}}function Bg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Zo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,o)=>(n.push({paramName:u,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Fg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function eu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const qg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vg=e=>qg.test(e);function Wg(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?xn(e):e,i;if(r)if(Vg(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),Zo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=kc(r.substring(1),"/"):i=kc(r,t)}else i=t;return{pathname:i,search:Gg(n),hash:Jg(s)}}function kc(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ua(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tu(e,t){let r=Hg(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ru(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=xn(e):(s=ds({},e),oe(!s.pathname||!s.pathname.includes("?"),Ua("?","pathname","search",s)),oe(!s.pathname||!s.pathname.includes("#"),Ua("#","pathname","hash",s)),oe(!s.search||!s.search.includes("#"),Ua("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let f=t.length-1;if(!n&&l.startsWith("..")){let d=l.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}u=f>=0?t[f]:"/"}let o=Wg(s,u),c=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||h)&&(o.pathname+="/"),o}const Yt=e=>e.join("/").replace(/\/\/+/g,"/"),Kg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Jg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Qg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yf=["post","put","patch","delete"];new Set(yf);const Yg=["get",...yf];new Set(Yg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hs.apply(this,arguments)}const nu=j.createContext(null),Xg=j.createContext(null),nr=j.createContext(null),sa=j.createContext(null),sr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),xf=j.createContext(null);function Zg(e,t){let{relative:r}=t===void 0?{}:t;wn()||oe(!1);let{basename:n,navigator:s}=j.useContext(nr),{hash:i,pathname:l,search:u}=bf(e,{relative:r}),o=l;return n!=="/"&&(o=l==="/"?n:Yt([n,l])),s.createHref({pathname:o,search:u,hash:i})}function wn(){return j.useContext(sa)!=null}function bn(){return wn()||oe(!1),j.useContext(sa).location}function wf(e){j.useContext(nr).static||j.useLayoutEffect(e)}function Es(){let{isDataRoute:e}=j.useContext(sr);return e?h0():e0()}function e0(){wn()||oe(!1);let e=j.useContext(nu),{basename:t,future:r,navigator:n}=j.useContext(nr),{matches:s}=j.useContext(sr),{pathname:i}=bn(),l=JSON.stringify(tu(s,r.v7_relativeSplatPath)),u=j.useRef(!1);return wf(()=>{u.current=!0}),j.useCallback(function(c,h){if(h===void 0&&(h={}),!u.current)return;if(typeof c=="number"){n.go(c);return}let f=ru(c,JSON.parse(l),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Yt([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,l,i,e])}function bf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=j.useContext(nr),{matches:s}=j.useContext(sr),{pathname:i}=bn(),l=JSON.stringify(tu(s,n.v7_relativeSplatPath));return j.useMemo(()=>ru(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function t0(e,t){return r0(e,t)}function r0(e,t,r,n){wn()||oe(!1);let{navigator:s}=j.useContext(nr),{matches:i}=j.useContext(sr),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let c=bn(),h;if(t){var f;let x=typeof t=="string"?xn(t):t;o==="/"||(f=x.pathname)!=null&&f.startsWith(o)||oe(!1),h=x}else h=c;let d=h.pathname||"/",v=d;if(o!=="/"){let x=o.replace(/^\//,"").split("/");v="/"+d.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Cg(e,{pathname:v}),w=l0(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Yt([o,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?o:Yt([o,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&w?j.createElement(sa.Provider,{value:{location:hs({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ft.Pop}},w):w}function n0(){let e=d0(),t=Qg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:s},r):null,null)}const s0=j.createElement(n0,null);class i0 extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(sr.Provider,{value:this.props.routeContext},j.createElement(xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a0(e){let{routeContext:t,match:r,children:n}=e,s=j.useContext(nu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(sr.Provider,{value:t},n)}function l0(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,u=(s=r)==null?void 0:s.errors;if(u!=null){let h=l.findIndex(f=>f.route.id&&(u==null?void 0:u[f.route.id])!==void 0);h>=0||oe(!1),l=l.slice(0,Math.min(l.length,h+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<l.length;h++){let f=l[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:d,errors:v}=r,y=f.route.loader&&d[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){o=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}return l.reduceRight((h,f,d)=>{let v,y=!1,w=null,x=null;r&&(v=u&&f.route.id?u[f.route.id]:void 0,w=f.route.errorElement||s0,o&&(c<0&&d===0?(f0("route-fallback"),y=!0,x=null):c===d&&(y=!0,x=f.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,d+1)),m=()=>{let g;return v?g=w:y?g=x:f.route.Component?g=j.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=h,j.createElement(a0,{match:f,routeContext:{outlet:h,matches:p,isDataRoute:r!=null},children:g})};return r&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?j.createElement(i0,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var _f=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_f||{}),jf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jf||{});function o0(e){let t=j.useContext(nu);return t||oe(!1),t}function u0(e){let t=j.useContext(Xg);return t||oe(!1),t}function c0(e){let t=j.useContext(sr);return t||oe(!1),t}function kf(e){let t=c0(),r=t.matches[t.matches.length-1];return r.route.id||oe(!1),r.route.id}function d0(){var e;let t=j.useContext(xf),r=u0(),n=kf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function h0(){let{router:e}=o0(_f.UseNavigateStable),t=kf(jf.UseNavigateStable),r=j.useRef(!1);return wf(()=>{r.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hs({fromRouteId:t},i)))},[e,t])}const Sc={};function f0(e,t,r){Sc[e]||(Sc[e]=!0)}function m0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fl(e){let{to:t,replace:r,state:n,relative:s}=e;wn()||oe(!1);let{future:i,static:l}=j.useContext(nr),{matches:u}=j.useContext(sr),{pathname:o}=bn(),c=Es(),h=ru(t,tu(u,i.v7_relativeSplatPath),o,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:s}),[c,f,s,r,n]),null}function De(e){oe(!1)}function p0(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ft.Pop,navigator:i,static:l=!1,future:u}=e;wn()&&oe(!1);let o=t.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:o,navigator:i,static:l,future:hs({v7_relativeSplatPath:!1},u)}),[o,u,i,l]);typeof n=="string"&&(n=xn(n));let{pathname:h="/",search:f="",hash:d="",state:v=null,key:y="default"}=n,w=j.useMemo(()=>{let x=eu(h,o);return x==null?null:{location:{pathname:x,search:f,hash:d,state:v,key:y},navigationType:s}},[o,h,f,d,v,y,s]);return w==null?null:j.createElement(nr.Provider,{value:c},j.createElement(sa.Provider,{children:r,value:w}))}function g0(e){let{children:t,location:r}=e;return t0(ql(t),r)}new Promise(()=>{});function ql(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(n,s)=>{if(!j.isValidElement(n))return;let i=[...t,s];if(n.type===j.Fragment){r.push.apply(r,ql(n.props.children,i));return}n.type!==De&&oe(!1),!n.props.index||!n.props.children||oe(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ql(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}function v0(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function y0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function x0(e,t){return e.button===0&&(!t||t==="_self")&&!y0(e)}const w0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b0="6";try{window.__reactRouterVersion=b0}catch{}const _0="startTransition",Nc=fm[_0];function j0(e){let{basename:t,children:r,future:n,window:s}=e,i=j.useRef();i.current==null&&(i.current=Sg({window:s,v5Compat:!0}));let l=i.current,[u,o]=j.useState({action:l.action,location:l.location}),{v7_startTransition:c}=n||{},h=j.useCallback(f=>{c&&Nc?Nc(()=>o(f)):o(f)},[o,c]);return j.useLayoutEffect(()=>l.listen(h),[l,h]),j.useEffect(()=>m0(n),[n]),j.createElement(p0,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:l,future:n})}const k0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M=j.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:u,target:o,to:c,preventScrollReset:h,viewTransition:f}=t,d=v0(t,w0),{basename:v}=j.useContext(nr),y,w=!1;if(typeof c=="string"&&S0.test(c)&&(y=c,k0))try{let g=new URL(window.location.href),b=c.startsWith("//")?new URL(g.protocol+c):new URL(c),k=eu(b.pathname,v);b.origin===g.origin&&k!=null?c=k+b.search+b.hash:w=!0}catch{}let x=Zg(c,{relative:s}),p=N0(c,{replace:l,state:u,target:o,preventScrollReset:h,relative:s,viewTransition:f});function m(g){n&&n(g),g.defaultPrevented||p(g)}return j.createElement("a",Vl({},d,{href:y||x,onClick:w||i?n:m,ref:r,target:o}))});var Ec;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ec||(Ec={}));var Cc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Cc||(Cc={}));function N0(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:u}=t===void 0?{}:t,o=Es(),c=bn(),h=bf(e,{relative:l});return j.useCallback(f=>{if(x0(f,r)){f.preventDefault();let d=n!==void 0?n:Li(c)===Li(h);o(e,{replace:d,state:s,preventScrollReset:i,relative:l,viewTransition:u})}},[c,o,h,n,s,r,e,i,l,u])}function ia(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function E0(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(h){try{c(n.next(h))}catch(f){l(f)}}function o(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):s(h.value).then(u,o)}c((n=n.apply(e,t||[])).next())})}const C0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class su extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class T0 extends su{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tc extends su{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pc extends su{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wl||(Wl={}));class P0{constructor(t,{headers:r={},customFetch:n,region:s=Wl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=C0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return E0(this,arguments,void 0,function*(r,n={}){var s;let i,l;try{const{headers:u,method:o,body:c,signal:h,timeout:f}=n;let d={},{region:v}=n;v||(v=this.region);const y=new URL(`${this.url}/${r}`);v&&v!=="any"&&(d["x-region"]=v,y.searchParams.set("forceFunctionRegion",v));let w;c&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(d["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(d["Content-Type"]="application/json",w=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?w=JSON.stringify(c):w=c;let x=h;f&&(l=new AbortController,i=setTimeout(()=>l.abort(),f),h?(x=l.signal,h.addEventListener("abort",()=>l.abort())):x=l.signal);const p=yield this.fetch(y.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),u),body:w,signal:x}).catch(k=>{throw new T0(k)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new Tc(p);if(!p.ok)throw new Pc(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield p.json():g==="application/octet-stream"||g==="application/pdf"?b=yield p.blob():g==="text/event-stream"?b=p:g==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(u){return{data:null,error:u,response:u instanceof Pc||u instanceof Tc?u.context:void 0}}finally{i&&clearTimeout(i)}})}}var O0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},R0=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let l=null,u=null,o=null,c=i.status,h=i.statusText;if(i.ok){var f,d;if(r.method!=="HEAD"){var v;const p=await i.text();p===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=p:u=JSON.parse(p))}const w=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&x&&x.length>1&&(o=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,o=null,c=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var y;const w=await i.text();try{l=JSON.parse(w),Array.isArray(l)&&i.status===404&&(u=[],l=null,c=200,h="OK")}catch{i.status===404&&w===""?(c=204,h="No Content"):l={message:w}}if(l&&r.isMaybeSingle&&(!(l==null||(y=l.details)===null||y===void 0)&&y.includes("0 rows"))&&(l=null,c=200,h="OK"),l&&r.shouldThrowOnError)throw new O0(l)}return{error:l,data:u,count:o,status:c,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var l;let u="";const o=i==null?void 0:i.cause;if(o){var c,h,f,d;const y=(c=o==null?void 0:o.message)!==null&&c!==void 0?c:"",w=(h=o==null?void 0:o.code)!==null&&h!==void 0?h:"";u=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,u+=`

Caused by: ${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"Error"}: ${y}`,w&&(u+=` (${w})`),o!=null&&o.stack&&(u+=`
${o.stack}`)}else{var v;u=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},A0=class extends R0{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),o=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${o}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Oc=new RegExp("[,()]");var Dr=class extends A0{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Oc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Oc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},I0=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:u,headers:o}=this.cloneRequestState();return u.searchParams.set("select",l),n&&o.append("Prefer",`count=${n}`),new Dr({method:s,url:u,headers:o,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(u.length>0){const o=[...new Set(u)].map(c=>`"${c}"`);i.searchParams.set("columns",o.join(","))}}return new Dr({method:s,url:i,headers:l,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const l="POST",{url:u,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),n&&o.append("Prefer",`count=${n}`),s||o.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);u.searchParams.set("columns",h.join(","))}}return new Dr({method:l,url:u,headers:o,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Dr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Dr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},$0=class Sf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new I0(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Sf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var l;let u;const o=new URL(`${this.url}/rpc/${t}`);let c;const h=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(h)),f=n&&Object.values(r).some(h);f?(u="POST",c=r):n||s?(u=n?"HEAD":"GET",Object.entries(r).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{o.searchParams.append(v,y)})):(u="POST",c=r);const d=new Headers(this.headers);return f?d.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&d.set("Prefer",`count=${i}`),new Dr({method:u,url:o,headers:d,schema:this.schemaName,body:c,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class L0{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const D0="2.91.1",U0=`realtime-js/${D0}`,z0="1.0.0",Nf="2.0.0",Rc=Nf,Hl=1e4,M0=1e3,B0=100;var Lt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Lt||(Lt={}));var de;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(de||(de={}));var lt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lt||(lt={}));var Kl;(function(e){e.websocket="websocket"})(Kl||(Kl={}));var dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dr||(dr={}));class F0{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,n){var s,i;const l=t.topic,u=(s=t.ref)!==null&&s!==void 0?s:"",o=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+u.length+l.length+c.length+f.length,v=new ArrayBuffer(this.HEADER_LENGTH+d);let y=new DataView(v),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,o.length),y.setUint8(w++,u.length),y.setUint8(w++,l.length),y.setUint8(w++,c.length),y.setUint8(w++,f.length),y.setUint8(w++,r),Array.from(o,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(u,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(l,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(c,p=>y.setUint8(w++,p.charCodeAt(0))),Array.from(f,p=>y.setUint8(w++,p.charCodeAt(0)));var x=new Uint8Array(v.byteLength+n.byteLength);return x.set(new Uint8Array(v),0),x.set(new Uint8Array(n),v.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,l,u,o]=n;return r({join_ref:s,ref:i,topic:l,event:u,payload:o})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),l=r.getUint8(3),u=r.getUint8(4);let o=this.HEADER_LENGTH+4;const c=n.decode(t.slice(o,o+s));o=o+s;const h=n.decode(t.slice(o,o+i));o=o+i;const f=n.decode(t.slice(o,o+l));o=o+l;const d=t.slice(o,t.byteLength),v=u===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,y={type:this.BROADCAST_EVENT,event:h,payload:v};return l>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Ef{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(G||(G={}));const Ac=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=q0(l,e,t,s),i),{}):{}},q0=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?Cf(i,l):Gl(l)},Cf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return K0(t,r)}switch(e){case G.bool:return V0(t);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return W0(t);case G.json:case G.jsonb:return H0(t);case G.timestamp:return G0(t);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return Gl(t);default:return Gl(t)}},Gl=e=>e,V0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},W0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},H0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},K0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>Cf(t,u))}return e},G0=e=>typeof e=="string"?e.replace(" ","T"):e,Tf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class za{constructor(t,r,n={},s=Hl){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ic;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ic||(Ic={}));class Wn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wn.syncState(this.state,s,i,l),this.pendingDiffs.forEach(o=>{this.state=Wn.syncDiff(this.state,o,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wn.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},o={};return this.map(i,(c,h)=>{l[c]||(o[c]=h)}),this.map(l,(c,h)=>{const f=i[c];if(f){const d=h.map(x=>x.presence_ref),v=f.map(x=>x.presence_ref),y=h.filter(x=>v.indexOf(x.presence_ref)<0),w=f.filter(x=>d.indexOf(x.presence_ref)<0);y.length>0&&(u[c]=y),w.length>0&&(o[c]=w)}else u[c]=h}),this.syncDiff(i,{joins:u,leaves:o},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,o)=>{var c;const h=(c=t[u])!==null&&c!==void 0?c:[];if(t[u]=this.cloneDeep(o),h.length>0){const f=t[u].map(v=>v.presence_ref),d=h.filter(v=>f.indexOf(v.presence_ref)<0);t[u].unshift(...d)}n(u,h,o)}),this.map(l,(u,o)=>{let c=t[u];if(!c)return;const h=o.map(f=>f.presence_ref);c=c.filter(f=>h.indexOf(f.presence_ref)<0),t[u]=c,s(u,c,o),c.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $c;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($c||($c={}));var Hn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hn||(Hn={}));var xt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class Xr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=de.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new za(this,lt.join,this.params,this.timeout),this.rejoinTimer=new Ef(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=de.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=de.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Wn(this),this.broadcastEndpointURL=Tf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==de.closed){const{config:{broadcast:l,presence:u,private:o}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Hn.PRESENCE]&&this.bindings[Hn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},d={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(xt.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(xt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,p=[];for(let m=0;m<x;m++){const g=w[m],{filter:{event:b,schema:k,table:S,filter:E}}=g,O=v&&v[m];if(O&&O.event===b&&Xr.isFilterValueEqual(O.schema,k)&&Xr.isFilterValueEqual(O.table,S)&&Xr.isFilterValueEqual(O.filter,E))p.push(Object.assign(Object.assign({},g),{id:O.id}));else{this.unsubscribe(),this.state=de.errored,t==null||t(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(xt.SUBSCRIBED);return}}).receive("error",v=>{this.state=de.errored,t==null||t(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===de.joined&&t===Hn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let o=u.statusText;try{const c=await u.json();o=c.error||c.message||o}catch{}return Promise.reject(new Error(o))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,o;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=de.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new za(this,lt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=de.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new za(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>B0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:o,leave:c,join:h}=lt;if(n&&[u,o,c,h].indexOf(l)>=0&&n!==this._joinRef())return;let d=this._onMessage(l,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var y,w,x;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(w=v.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(v=>v.callback(d,n)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var y,w,x,p,m,g,b,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const S=v.id,E=(y=v.filter)===null||y===void 0?void 0:y.event;return S&&((w=r.ids)===null||w===void 0?void 0:w.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))&&(!(!((p=v.filter)===null||p===void 0)&&p.table)||v.filter.table===((m=r.data)===null||m===void 0?void 0:m.table))}else{const S=(b=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((k=r==null?void 0:r.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof d=="object"&&"ids"in d){const y=d.data,{schema:w,table:x,commit_timestamp:p,type:m,errors:g}=y;d=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(y))}v.callback(d,n)})}_isClosed(){return this.state===de.closed}_isJoined(){return this.state===de.joined}_isJoining(){return this.state===de.joining}_isLeaving(){return this.state===de.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lt.close,{},t)}_onError(t){this._on(lt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=de.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ac(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ac(t.columns,t.old_record)),r}}const Ma=()=>{},Js={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J0=[1e3,2e3,5e3,1e4],Q0=1e4,Y0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class X0{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hl,this.transport=null,this.heartbeatIntervalMs=Js.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ma,this.ref=0,this.reconnectTimer=null,this.vsn=Rc,this.logger=Ma,this.conn=null,this.sendBuffer=[],this.serializer=new F0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Kl.websocket}`,this.httpEndpoint=Tf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=L0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lt.connecting:return dr.Connecting;case Lt.open:return dr.Open;case Lt.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Xr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var o;(o=this.conn)===null||o===void 0||o.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(M0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Js.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",o=i.status||"";this.log("receive",`${o} ${n} ${s} ${u}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Lt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lt.open||this.conn.readyState===Lt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(lt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Y0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:U0};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(lt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ef(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Js.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,o,c,h,f,d,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Hl,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Js.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Ma,this.vsn=(o=t==null?void 0:t.vsn)!==null&&o!==void 0?o:Rc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:y=>J0[y-1]||Q0,this.vsn){case z0:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(y,w)=>w(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,w)=>w(JSON.parse(y));break;case Nf:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var fs=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Z0(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function ev(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function tv(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:l}){const u=Z0(e.baseUrl,n,s),o=await ev(e.auth),c=await t(u,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...o,...l},body:i?JSON.stringify(i):void 0}),h=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),d=f&&h?JSON.parse(h):h;if(!c.ok){const v=f?d:void 0,y=v==null?void 0:v.error;throw new fs((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:v})}return{status:c.status,headers:c.headers,data:d}}}}function Qs(e){return e.join("")}var rv=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Qs(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qs(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qs(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qs(e.namespace)}`}),!0}catch(t){if(t instanceof fs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof fs&&r.status===409)return;throw r}}};function Or(e){return e.join("")}var nv=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Or(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof fs&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof fs&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},sv=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=tv({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new rv(this.client,t),this.tableOps=new nv(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},aa=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ee(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var iv=class extends aa{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jl=class extends aa{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const iu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),av=()=>Response,Ql=e=>{if(Array.isArray(e))return e.map(r=>Ql(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ql(n)}),t},lv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ov=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ms(e){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ms(e)}function uv(e,t){if(ms(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ms(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cv(e){var t=uv(e,"string");return ms(t)=="symbol"?t:t+""}function dv(e,t,r){return(t=cv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lc(Object(r),!0).forEach(function(n){dv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Ba=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},hv=async(e,t,r)=>{e instanceof await av()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new iv(Ba(n),s,i))}).catch(n=>{t(new Jl(Ba(n),n))}):t(new Jl(Ba(e),e))},fv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(lv(n)?(s.headers=L({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),L(L({},s),r))};async function Cs(e,t,r,n,s,i){return new Promise((l,u)=>{e(r,fv(t,n,s,i)).then(o=>{if(!o.ok)throw o;return n!=null&&n.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>hv(o,u,n))})}async function ps(e,t,r,n){return Cs(e,"GET",t,r,n)}async function it(e,t,r,n,s){return Cs(e,"POST",t,n,s,r)}async function Yl(e,t,r,n,s){return Cs(e,"PUT",t,n,s,r)}async function mv(e,t,r,n){return Cs(e,"HEAD",t,L(L({},r),{},{noResolveJson:!0}),n)}async function au(e,t,r,n,s){return Cs(e,"DELETE",t,n,s,r)}var pv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}}};let Pf;Pf=Symbol.toStringTag;var gv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Pf]="BlobDownloadBuilder",this.promise=null}asStream(){return new pv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}}};const vv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var yv=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=iu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const l=L(L({},Dc),n);let u=L(L({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),o&&i.append("metadata",s.encodeMetadata(o)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),o&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(o))):(i=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,o&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(o))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(u=L(L({},u),n.headers));const c=s._removeEmptyFolders(t),h=s._getFinalPath(c),f=await(e=="PUT"?Yl:it)(s.fetch,`${s.url}/object/${h}`,i,L({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ee(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),l=s._getFinalPath(i),u=new URL(s.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let o;const c=L({upsert:Dc.upsert},n),h=L(L({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType),{data:{path:i,fullPath:(await Yl(s.fetch,u.toString(),o,{headers:h})).Key},error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(ee(o))return{data:null,error:o};throw o}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=L({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await it(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(r.url+i.url),u=l.searchParams.get("token");if(!u)throw new aa("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await it(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await it(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await it(n.fetch,`${n.url}/object/sign/${s}`,L({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await it(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>L(L({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),l=()=>ps(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new gv(l,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Ql(await ps(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await mv(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ee(n)&&n instanceof Jl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${u}`)}}}async remove(e){var t=this;try{return{data:await au(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=L(L(L({},vv),t),{},{prefix:e||""});return{data:await it(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=L({},e);return{data:await it(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Of="2.91.1",Rf={"X-Client-Info":`storage-js/${Of}`};var xv=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=L(L({},Rf),t),this.fetch=iu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await ps(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ps(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await it(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Yl(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await au(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},wv=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},Rf),t),this.fetch=iu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await it(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await ps(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await au(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!ov(e))throw new aa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new sv({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const l=s[i];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(o){if(n)throw o;return{data:null,error:o}}}}})}};const lu={"X-Client-Info":`storage-js/${Of}`,"Content-Type":"application/json"};var Af=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Me(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Fa=class extends Af{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bv=class extends Af{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ou=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_v=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Uc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jv=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Fa(Uc(i),n,l))}).catch(()=>{const i=n+"";t(new Fa(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Fa(s.statusText||`HTTP ${n} error`,n,i))}}else t(new bv(Uc(e),e))},kv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(_v(n)?(s.headers=L({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,L(L({},s),r)):s};async function Sv(e,t,r,n,s,i){return new Promise((l,u)=>{e(r,kv(t,n,s,i)).then(o=>{if(!o.ok)throw o;if(n!=null&&n.noResolveJson)return o;const c=o.headers.get("content-type");return!c||!c.includes("application/json")?{}:o.json()}).then(o=>l(o)).catch(o=>jv(o,u,n))})}async function Be(e,t,r,n,s){return Sv(e,"POST",t,n,s,r)}var Nv=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},lu),t),this.fetch=ou(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Be(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Be(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}},Ev=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},lu),t),this.fetch=ou(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Be(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Be(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Be(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}},Cv=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},lu),t),this.fetch=ou(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Be(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Be(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}},Tv=class extends Cv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Pv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Pv=class extends Nv{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Ov(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ov=class extends Ev{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Rv=class extends xv{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new yv(this.url,this.headers,e,this.fetch)}get vectors(){return new Tv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wv(this.url+"/iceberg",this.headers,this.fetch)}};const If="2.91.1",Ur=30*1e3,Xl=3,qa=Xl*Ur,Av="http://localhost:9999",Iv="supabase.auth.token",$v={"X-Client-Info":`gotrue-js/${If}`},Zl="X-Supabase-Api-Version",$f={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Lv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dv=10*60*1e3;class gs extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function I(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Uv extends gs{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function zv(e){return I(e)&&e.name==="AuthApiError"}class hr extends gs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ot extends gs{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ue extends Ot{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mv(e){return I(e)&&e.name==="AuthSessionMissingError"}class Rr extends Ot{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends Ot{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xs extends Ot{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bv(e){return I(e)&&e.name==="AuthImplicitGrantRedirectError"}class zc extends Ot{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fv extends Ot{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class eo extends Ot{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Va(e){return I(e)&&e.name==="AuthRetryableFetchError"}class Mc extends Ot{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class to extends Ot{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bc=` 	
\r=`.split(""),qv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Bc.length;t+=1)e[Bc[t].charCodeAt(0)]=-2;for(let t=0;t<Di.length;t+=1)e[Di[t].charCodeAt(0)]=t;return e})();function Fc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Di[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Di[n]),t.queuedBits-=6}}function Lf(e,t,r){const n=qv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qc(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{Hv(l,n,r)};for(let l=0;l<e.length;l+=1)Lf(e.charCodeAt(l),s,i);return t.join("")}function Vv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Wv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Vv(n,t)}}function Hv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function an(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Lf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Kv(e){const t=[];return Wv(e,r=>t.push(r)),new Uint8Array(t)}function gr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Fc(s,r,n)),Fc(null,r,n),t.join("")}function Gv(e){return Math.round(Date.now()/1e3)+e}function Jv(){return Symbol("auth-callback")}const ve=()=>typeof window<"u"&&typeof document<"u",ir={tested:!1,writable:!1},Df=()=>{if(!ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ir.tested)return ir.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ir.tested=!0,ir.writable=!0}catch{ir.tested=!0,ir.writable=!1}return ir.writable};function Qv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Uf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ar=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ge=async(e,t)=>{await e.removeItem(t)};class la{constructor(){this.promise=new la.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}la.promiseConstructor=Promise;function Wa(e){const t=e.split(".");if(t.length!==3)throw new to("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Lv.test(t[n]))throw new to("JWT not in base64url format");return{header:JSON.parse(qc(t[0])),payload:JSON.parse(qc(t[1])),signature:an(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function ey(e){return("0"+e.toString(16)).substr(-2)}function ty(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,ey).join("")}async function ry(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ny(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ry(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ar(e,t,r=!1){const n=ty();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await zr(e,`${t}-code-verifier`,s);const i=await ny(n);return[i,n===i?"plain":"s256"]}const sy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iy(e){const t=e.headers.get(Zl);if(!t||!t.match(sy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ay(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ly(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ir(e){if(!oy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ha(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uy(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Vc(e){return JSON.parse(JSON.stringify(e))}const cr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cy=[502,503,504];async function Wc(e){var t;if(!Yv(e))throw new eo(cr(e),0);if(cy.includes(e.status))throw new eo(cr(e),e.status);let r;try{r=await e.json()}catch(i){throw new hr(cr(i),i)}let n;const s=iy(e);if(s&&s.getTime()>=$f["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Mc(cr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ue}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Mc(cr(r),e.status,r.weak_password.reasons);throw new Uv(cr(r),e.status||500,n)}const dy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function $(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Zl]||(i[Zl]=$f["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await hy(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(o):{data:Object.assign({},o),error:null}}async function hy(e,t,r,n,s,i){const l=dy(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(o){throw console.error(o),new eo(cr(o),0)}if(u.ok||await Wc(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(o){await Wc(o)}}function nt(e){var t;let r=null;py(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Gv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Hc(e){const t=nt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fy(e){return{data:e,error:null}}function my(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=ia(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},o=Object.assign({},l);return{data:{properties:u,user:o},error:null}}function Kc(e){return e}function py(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ka=["global","local","others"];class gy{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Uf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ka[0]){if(Ka.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ka.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ia(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:my,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(I(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,o;try{const c={nextPage:null,lastPage:0,total:0},h=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kc});if(h.error)throw h.error;const f=await h.json(),d=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(o=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&o!==void 0?o:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);c[`${x}Page`]=w}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(I(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ir(t);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ir(t);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:zt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ir(t);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:zt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ir(t.userId);try{const{data:r,error:n}=await $(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ir(t.userId),Ir(t.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,o;try{const c={nextPage:null,lastPage:0,total:0},h=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kc});if(h.error)throw h.error;const f=await h.json(),d=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(o=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&o!==void 0?o:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);c[`${x}Page`]=w}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(I(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}}function Gc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const $r={debug:!!(globalThis&&Df()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vy extends zf{}async function yy(e,t,r){$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),$r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{$r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw $r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($r.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function xy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Mf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function wy(e){return parseInt(e,16)}function by(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function _y(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:o,resources:c,scheme:h,uri:f,version:d}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=Mf(e.address),y=h?`${h}://${n}`:n,w=e.statement?`${e.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${v}

${w}`;let p=`URI: ${f}
Version: ${d}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),u&&(p+=`
Not Before: ${u.toISOString()}`),o&&(p+=`
Request ID: ${o}`),c){let m=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);m+=`
- ${g}`}p+=m}return`${x}
${p}`}class ue extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ui extends ue{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function jy({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ue({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Bf(l)){if(i.rp.id!==l)return new ue({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ky({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ue({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Bf(n)){if(r.rpId!==n)return new ue({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Sy{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Ny=new Sy;function Ey(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ia(e,["challenge","user","excludeCredentials"]),i=an(t).buffer,l=Object.assign(Object.assign({},r),{id:an(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const c=n[o];u.excludeCredentials[o]=Object.assign(Object.assign({},c),{id:an(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return u}function Cy(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ia(e,["challenge","allowCredentials"]),s=an(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:an(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function Ty(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:gr(new Uint8Array(e.response.attestationObject)),clientDataJSON:gr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Py(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:gr(new Uint8Array(s.authenticatorData)),clientDataJSON:gr(new Uint8Array(s.clientDataJSON)),signature:gr(new Uint8Array(s.signature)),userHandle:s.userHandle?gr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Jc(){var e,t;return!!(ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Oy(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ui("Browser returned unexpected credential type",t)}:{data:null,error:new Ui("Empty credential response",t)}}catch(t){return{data:null,error:jy({error:t,options:e})}}}async function Ry(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ui("Browser returned unexpected credential type",t)}:{data:null,error:new Ui("Empty credential response",t)}}catch(t){return{data:null,error:ky({error:t,options:e})}}}const Ay={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Iy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=zi(u,l):n[i]=zi(l)}else n[i]=l}return n}function $y(e,t){return zi(Ay,e,t||{})}function Ly(e,t){return zi(Iy,e,t||{})}class Dy{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const o=s??Ny.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:c}=l.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(l.webauthn.type){case"create":{const c=$y(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await Oy({publicKey:c,signal:o});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const c=Ly(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await Ry(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:c,signal:o}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(l){return I(l)?{data:null,error:l}:{data:null,error:new hr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new gs("rpId is required for WebAuthn authentication")};try{if(!Jc())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:o}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:o.type,rpId:r,rpOrigins:n,credential_response:o.credential_response}})}catch(l){return I(l)?{data:null,error:l}:{data:null,error:new hr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new gs("rpId is required for WebAuthn registration")};try{if(!Jc())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===t&&d.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:o,error:c}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return o?this._verify({factorId:l.id,challengeId:o.challengeId,webauthn:{rpId:r,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(l){return I(l)?{data:null,error:l}:{data:null,error:new hr("Unexpected error in register",l)}}}}xy();const Uy={url:Av,storageKey:Iv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$v,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Qc(e,t,r){return await r()}const Lr={};class vs{get jwks(){var t,r;return(r=(t=Lr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Lr[this.storageKey]=Object.assign(Object.assign({},Lr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Lr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lr[this.storageKey]=Object.assign(Object.assign({},Lr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Uy),t);if(this.storageKey=i.storageKey,this.instanceID=(r=vs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,vs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ve()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new gy({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Uf(i.fetch),this.lock=i.lock||Qc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ve()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yy:this.lock=Qc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Dy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Df()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${If}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ve()&&(r=Qv(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ve()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Bv(i)){const o=(t=i.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return I(r)?this._returnResult({error:r}):this._returnResult({error:new hr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:nt}),{data:l,error:u}=i;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const o=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(i){if(I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:h,password:f,options:d}=t;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Ar(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:v,code_challenge_method:y},xform:nt})}else if("phone"in t){const{phone:h,password:f,options:d}=t;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:nt})}else throw new Ys("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return await ge(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const o=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Hc})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Hc})}else throw new Ys("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Rr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,o,c,h,f,d;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:w,wallet:x,statement:p,options:m}=t;let g;if(ve())if(typeof x=="object")g=x;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")g=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=x}const b=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),k=await g.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Mf(k[0]);let E=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const U=await g.request({method:"eth_chainId"});E=wy(U)}const O={domain:b.host,address:S,statement:p,uri:b.href,version:"1",chainId:E,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=m==null?void 0:m.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=_y(O),y=await g.request({method:"personal_sign",params:[by(v),S]})}try{const{data:w,error:x}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=t.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:nt});if(x)throw x;if(!w||!w.session||!w.user){const p=new Rr;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(I(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,l,u,o,c,h,f,d,v;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:x,wallet:p,statement:m,options:g}=t;let b;if(ve())if(typeof p=="object")b=p;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))b=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const S=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(h=g==null?void 0:g.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await b.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:x,error:p}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:gr(w)},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:nt});if(p)throw p;if(!x||!x.session||!x.user){const m=new Rr;return this._returnResult({data:{user:null,session:null},error:m})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:p})}catch(x){if(I(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await ar(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Fv;const{data:i,error:l}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:nt});if(await ge(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const u=new Rr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:nt}),{data:o,error:c}=u;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const h=new Rr;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:c})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:o}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Ar(this.storage,this.storageKey));const{error:f}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=o==null?void 0:o.data)!==null&&r!==void 0?r:{},create_user:(n=o==null?void 0:o.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:u,options:o}=t,{data:c,error:h}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Ys("You must provide either an email or phone number.")}catch(u){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:nt});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,c=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(s){if(I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,l;try{let u=null,o=null;this.flowType==="pkce"&&([u,o]=await Ar(this.storage,this.storageKey));const c=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:o}),headers:this.headers,xform:fy});return!((i=c.data)===null||i===void 0)&&i.url&&ve()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(u){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ue;const{error:s}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(I(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await $(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await $(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Ys("You must provide either an email or phone number and a type")}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<qa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await ar(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Ha()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=uy(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zt}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zt})})}catch(r){if(I(r))return Mv(r)&&(await this._removeSession(),await ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ue;const l=s.session;let u=null,o=null;this.flowType==="pkce"&&t.email!=null&&([u,o]=await Ar(this.storage,this.storageKey));const{data:c,error:h}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:o}),jwt:l.access_token,xform:zt});if(h)throw h;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ue;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Wa(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(I(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ue;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ve())throw new Xs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new zc("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:o,token_type:c}=t;if(!i||!u||!l||!c)throw new Xs("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(u);let d=h+f;o&&(d=parseInt(o));const v=d-h;v*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const y=d-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,d,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,d,h);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:d,refresh_token:l,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:t.type},error:null})}catch(n){if(I(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ar(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(zv(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Jv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ar(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,o,c,h;const{data:f,error:d}=i;if(d)throw d;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return ve()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(I(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:o,access_token:c,nonce:h}=t,f=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:o,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nt}),{data:d,error:v}=f;return v?this._returnResult({data:{user:null,session:null},error:v}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Rr}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:v}))}catch(s){if(await ge(this.storage,`${this.storageKey}-code-verifier`),I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Zv(async s=>(s>0&&await Xv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:nt})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Va(i)&&Date.now()+l-n<Ur})}catch(n){if(this._debug(r,"error",n),I(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ve()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ar(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await zr(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Ha()}else if(s&&!s.user&&!s.user){const l=await ar(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await ge(this.storage,this.storageKey+"-user"),await zr(this.storage,this.storageKey,s)):s.user=Ha()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<qa;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${qa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Va(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new la;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Ue;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),I(i)){const l={data:null,error:i};return Va(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(o){i.push(o)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ge(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await zr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Vc(s);await zr(this.storage,this.storageKey,i)}else{const s=Vc(r);await zr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ge(this.storage,this.storageKey),await ge(this.storage,this.storageKey+"-code-verifier"),await ge(this.storage,this.storageKey+"-user"),this.userStorage&&await ge(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${Xl} ticks`),s<=Xl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ar(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await $(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:c}=await $(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&o.type==="totp"&&(!((s=o==null?void 0:o.totp)===null||s===void 0)&&s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ty(t.webauthn.credential_response):Py(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:o}=await $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:o}))})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=await $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Ey(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Cy(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Wa(n.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const c=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const l=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const l=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&ve()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(t){if(I(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+Dv>s)return n;const{data:i,error:l}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:y}=await this.getSession();if(y||!v.session)return this._returnResult({data:null,error:y});n=v.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:o}}=Wa(n);r!=null&&r.allowExpired||ay(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:l},error:null}}const h=ly(s.alg),f=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,l,Kv(`${u}.${o}`)))throw new to("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}}vs.nextInstanceID={};const zy=vs,My="2.91.1";let $n="";typeof Deno<"u"?$n="deno":typeof document<"u"?$n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$n="react-native":$n="node";const By={"X-Client-Info":`supabase-js-${$n}/${My}`},Fy={headers:By},qy={schema:"public"},Vy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wy={};function ys(e){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(e)}function Hy(e,t){if(ys(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ky(e){var t=Hy(e,"string");return ys(t)=="symbol"?t:t+""}function Gy(e,t,r){return(t=Ky(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yc(Object(r),!0).forEach(function(n){Gy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Jy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qy=()=>Headers,Yy=(e,t,r)=>{const n=Jy(r),s=Qy();return async(i,l)=>{var u;const o=(u=await t())!==null&&u!==void 0?u:e;let c=new s(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),n(i,se(se({},l),{},{headers:c}))}};function Xy(e){return e.endsWith("/")?e:e+"/"}function Zy(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:o,auth:c,realtime:h,global:f}=t,d={db:se(se({},o),s),auth:se(se({},c),i),realtime:se(se({},h),l),storage:{},global:se(se(se({},f),u),{},{headers:se(se({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}function ex(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xy(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var tx=class extends zy{constructor(e){super(e)}},rx=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=ex(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,u={db:qy,realtime:Wy,auth:se(se({},Vy),{},{storageKey:l}),global:Fy},o=Zy(r??{},u);if(this.storageKey=(n=o.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=o.global.headers)!==null&&s!==void 0?s:{},o.accessToken)this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=o.auth)!==null&&c!==void 0?c:{},this.headers,o.global.fetch)}this.fetch=Yy(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(se({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new $0(new URL("rest/v1",i).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new Rv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new P0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:l,lock:u,debug:o,throwOnError:c},h,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tx({url:this.authUrl.href,headers:se(se({},d),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:l,lock:u,debug:o,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new X0(this.realtimeUrl.href,se(se({},e),{},{params:se(se({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const nx=(e,t,r)=>new rx(e,t,r);function sx(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}sx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ix="https://uitplgqukaxrribgrpvv.supabase.co",Ff="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpdHBsZ3F1a2F4cnJpYmdycHZ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjE1OTAsImV4cCI6MjA4NDkzNzU5MH0.5ifr6_Tl9mjnWeiaWJ2ICmOgasMRDlaoG0ok3lNu700",B=nx(ix,Ff),ax=()=>Ff,qf=j.createContext({}),Rt=()=>j.useContext(qf);function lx({children:e}){const[t,r]=j.useState(null),[n,s]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{B.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),d!=null&&d.user?u(d.user.id):l(!1)});const{data:{subscription:f}}=B.auth.onAuthStateChange((d,v)=>{r((v==null?void 0:v.user)??null),v!=null&&v.user?u(v.user.id):(s(null),l(!1))});return()=>f.unsubscribe()},[]);const u=async f=>{const{data:d}=await B.from("profiles").select("*").eq("id",f).single();s(d),l(!1)},o=async(f,d,v,y)=>{const{data:w,error:x}=await B.auth.signUp({email:f,password:d,options:{data:{full_name:v,phone:y}}});if(x)throw x;return w},c=async(f,d)=>{const{data:v,error:y}=await B.auth.signInWithPassword({email:f,password:d});if(y)throw y;return v},h=async()=>{await B.auth.signOut(),r(null),s(null)};return a.jsx(qf.Provider,{value:{user:t,profile:n,loading:i,isAdmin:(n==null?void 0:n.role)==="admin",isConfigured:ax(),signUp:o,signIn:c,signOut:h},children:e})}var ox={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ux=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cx=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:u,...o},c)=>j.createElement("svg",{ref:c,...ox,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:`lucide lucide-${ux(e)}`,...o},[...t.map(([h,f])=>j.createElement(h,f)),...(Array.isArray(u)?u:[u])||[]]));return r.displayName=`${e}`,r};var q=cx;const Vf=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),uu=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Sr=q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Wf=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),xr=q("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Hf=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),cu=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Nr=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),dx=q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ro=q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),oa=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),hx=q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Xc=q("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),fx=q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Zc=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),mx=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),no=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ed=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ua=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ca=q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),px=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xs=q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Er=q("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Kf=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),mn=q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),kt=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Tt=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ts=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),gx=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),vx=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Mi=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ws=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),bs=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),da=q("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),yx=q("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Ps=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dt={menu470:{id:"menu470",name:"Menu 470",pricePerHead:470,pricingTiers:{60:470,50:490,40:540,30:590},options:[{name:"Menu A",items:["Green Salad w/ grilled fish in mustard sauce","Chicken Tim w/ asparagus","Braised Chinese Spareribs","Pancit special w/ red egg","Chow Pat Chen","Fried Rice/Plain Rice","Broken Window","Leche Flan"]},{name:"Menu B",items:["Chicken Macaroni Salad","Crispy Chicken w/ kropeks","Fish Fillet w/ black beans sauce","Seafood Marinara","Barbecued roast pork belly","Fried Rice/Plain Rice","Blitz Torte","Choco Zambo"]},{name:"Menu C",items:["Pomelo Salad","Chicken Afritada","Pork pieces w/ chili sauce","Sauteed Chicken w/ mixed vegetables","Beef w/ onions","Fried Rice/Plain Rice","Moist Chocolate Cake","Mango Float"]},{name:"Menu D",items:["Potato Apple Salad","Chinese Humba","Chicken Canneloni","Stir Fried vegetables w/ quail egg","Beef w/ mushroom sauce","Fried Rice/Plain Rice","Brownies","Rainbow Delight"]}]},menu510:{id:"menu510",name:"Menu 510",pricePerHead:510,pricingTiers:{60:510,50:530,40:580,30:630},options:[{name:"Menu A",items:["Roast Beef w/ sweet sauce","Three Kinds of mushroom w/ broccoli","Pork Pizza w/ Mozzarella Cheese","Fish Fillet w/ tar tar sauce","Penne Carbonara","Fried Rice/Plain Rice","Mango Pandan","Custard Cake"]},{name:"Menu B",items:["Papo Chicken","Barbecued Roast Pork Belly","Seafood Mixed Vegetable w/ tofu","Fish Fillet w/ soy sauce","Sotanghon Guisado","Fried Rice/Plain Rice","Dubos Enganos","Buko Lychee"]},{name:"Menu C",items:["Hungarian Rolled Porkloin","Beef Tapa","Chicken Kebab w/ peanut sauce","Baked Ziti","Garlic Peppered Fish","Fried Rice/Plain Rice","Choco Toffee Cake","Ube Cake"]},{name:"Menu D",items:["Stuffed Shrimp w/ sweet & sour dip","Spinach Lasagna","Pork w/ coconut cream","Chicken Cordon Bleu","Fish Fillet w/ oyster sauce","Arroz Valenciana/Plain Rice","Choco Cream Cheesecake","Maja Blanca"]}]},menu560:{id:"menu560",name:"Menu 560",pricePerHead:560,pricingTiers:{60:560,50:580,40:630,30:680},options:[{name:"Filipino Buffet",items:["Eggplant & Nangka salad","Pickled Green Mango w/ dilis","Roast Pork Liempo w/ special herbs","Kare-Kare w/ bagoong","Baked Crabmeat","Sinugbang Isda w/ vinegar sauce","Chicken w/ barbecue sauce","Garlic Rice/Plain Rice","Beko Bayot","Mango Sago"]},{name:"Asian Fusion",items:["Ngocong Soup","Beef Pochero","Chinese Lumpia","Misua Guisado","Pad Thai","Lasagna","Callos","Chinese Valenciana/Plain Rice","Japanese Cheesecake","Coffee Jelly"]},{name:"International Buffet",items:["Asian Mandarin Chicken Salad","Waldorf Salad","Chicken Galantina","Ox Tongue w/ cooked ham","Chicken Bacon Alfredo","Beef Morcon","Grilled Fish w/ lemon butter sauce","Paella/Plain Rice","Strawberry Cheesecake","Avocado Pie"]}]},menu660:{id:"menu660",name:"Menu 660",pricePerHead:660,pricingTiers:{60:660,50:680,40:730,30:780},options:[{name:"Filipino & Asian Fusion",items:["Mango & Crabstick Salad","Korean Galbi Ribs","Chicken w/ barbecue sauce","Spicy Squid","Fettuccine w/ grilled chicken","Seafood Roll Salad","Plain Rice/Fried Rice","Fruit Salad","Cookies & Cream Cheesecake"]},{name:"International",items:["Green Vegetable salad","Mediterranean Salad","Ox tongue w/ mushroom sauce","Crunchy Chicken w/ plum sauce","Roast beef w/ gravy","Baked Fish w/ mozzarella","Paella/Plain Rice","Choco Peach Cream Cake","Blueberry Cheesecake"]}]},menu810:{id:"menu810",name:"Menu 810 (Premium)",pricePerHead:810,pricingTiers:{60:810,50:830,40:880,30:930},options:[{name:"Premium Buffet",items:["Salad Bar","Japanese Sushi Rolls","Grilled Beef Short Rib (Carving)","Chicken Relleno","Baked Fish w/ mozzarella","Ox Tongue w/ mushroom sauce","Spicy Spareribs","Prawn Tempura","Penne Carbonara","Assorted fresh fruits","Blitz Torte","Mini Fruit Tart","Blueberry Cheesecake"]}]}},pn=[{id:"water",name:"Water (5 gallons)",price:50,unit:"per 5 gallons"},{id:"ice",name:"Ice (10 kilos)",price:150,unit:"per bag"},{id:"halohalo",name:"Halo-halo Bar",price:4e3,unit:"good for 50"},{id:"crepe",name:"Crepe Station",price:4e3,unit:"good for 50"},{id:"fruitshake",name:"Fresh Fruit Shake Bar",price:4e3,unit:"good for 50"},{id:"sushi",name:"Sushi Platter",price:4e3,unit:"good for 15-20"},{id:"prawns",name:"Prawn Tempura (Small)",price:4500,unit:"order"},{id:"prawnm",name:"Prawn Tempura (Medium)",price:6400,unit:"order"},{id:"prawnl",name:"Prawn Tempura (Large)",price:8800,unit:"order"},{id:"taco",name:"Taco Station",price:3e3,unit:"good for 50"},{id:"burrito",name:"Burrito Station",price:4e3,unit:"good for 50"},{id:"salad",name:"Salad Bar",price:4e3,unit:"good for 50"}],Kn=(e,t)=>{const r=dt[e];return r?t>=60?r.pricingTiers[60]:t>=50?r.pricingTiers[50]:t>=40?r.pricingTiers[40]:r.pricingTiers[30]:0},Bi=(e,t,r=[])=>{const s=Kn(e,t)*t,i=r.reduce((l,u)=>{const o=pn.find(c=>c.id===u.id);return l+(o?o.price*(u.quantity||1):0)},0);return s+i};function xx(){const{user:e}=Rt();return a.jsxs("div",{children:[a.jsx("section",{className:"bg-gradient-to-br from-red-700 via-red-800 to-red-900 text-white py-20 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsx("div",{className:"bg-white rounded-full p-4 w-40 h-40 flex items-center justify-center mx-auto mb-6 shadow-lg",children:a.jsx("img",{src:"/logo-red.png",alt:"Red Carpet Catering",className:"h-28 w-auto"})}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Red Carpet Catering"}),a.jsx("p",{className:"text-xl text-red-200 mb-8 max-w-2xl mx-auto",children:"Premium food and catering services for all your special occasions"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e?a.jsx(M,{to:"/book",className:"bg-white text-red-700 px-8 py-4 rounded-xl font-semibold text-lg hover:bg-red-50 shadow-lg",children:"Book Now"}):a.jsx(M,{to:"/signup",className:"bg-white text-red-700 px-8 py-4 rounded-xl font-semibold text-lg hover:bg-red-50 shadow-lg",children:"Get Started"}),a.jsx(M,{to:"/menu",className:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-white/10",children:"View Menu"})]})]})}),a.jsx("section",{className:"py-16 px-4 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12",children:"Why Choose Us?"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(yx,{className:"text-red-700",size:32})}),a.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Delicious Food"}),a.jsx("p",{className:"text-gray-600",children:"Wide variety of Filipino, Asian, and International cuisines"})]}),a.jsxs("div",{className:"text-center p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(bs,{className:"text-red-700",size:32})}),a.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Professional Staff"}),a.jsx("p",{className:"text-gray-600",children:"Trained and courteous wait staff for excellent service"})]}),a.jsxs("div",{className:"text-center p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Sr,{className:"text-red-700",size:32})}),a.jsx("h3",{className:"font-semibold text-xl mb-2",children:"Complete Packages"}),a.jsx("p",{className:"text-gray-600",children:"Tables, chairs, linens, and centerpieces included"})]})]})]})}),a.jsx("section",{className:"py-16 px-4 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12",children:"Our Menu Packages"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(dt).slice(0,3).map(t=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-700 to-red-800 text-white p-6",children:[a.jsx("h3",{className:"font-bold text-xl",children:t.name}),a.jsx("p",{className:"text-red-200",children:"Starting at"}),a.jsxs("p",{className:"text-3xl font-bold",children:["",t.pricePerHead,a.jsx("span",{className:"text-lg font-normal",children:"/head"})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("p",{className:"text-gray-600 mb-4",children:[t.options.length," menu options"]}),a.jsxs(M,{to:"/menu",className:"text-red-700 font-medium flex items-center gap-1 hover:gap-2",children:["View Details ",a.jsx(Nr,{size:18})]})]})]},t.id))}),a.jsx("div",{className:"text-center mt-8",children:a.jsxs(M,{to:"/menu",className:"inline-flex items-center gap-2 bg-red-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-red-800",children:["View All Packages ",a.jsx(Nr,{size:20})]})})]})}),a.jsx("section",{className:"py-16 px-4 bg-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Contact Us"}),a.jsx("div",{className:"bg-gray-50 rounded-2xl p-8 mb-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(kt,{className:"text-red-700",size:24}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"0917-187-6510"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Smart"})]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(kt,{className:"text-red-700",size:24}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"0926-664-2839"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Globe"})]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(kt,{className:"text-red-700",size:24}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"(032) 383-4122"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Landline"})]})]})]})}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[a.jsx("p",{className:"text-red-800 font-medium",children:"5,000 deposit required for all bookings"}),a.jsx("p",{className:"text-red-600 text-sm",children:"Non-refundable but consumable"})]})]})})]})}function wx(){const{user:e}=Rt(),[t,r]=j.useState(null);return a.jsx("div",{className:"py-12 px-4",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Our Menu Packages"}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"All packages include tables, chairs with covers, buffet table with centerpiece, wait staff, utensils, and one round of drinks."})]}),a.jsx("div",{className:"space-y-6 mb-12",children:Object.values(dt).map(n=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>r(t===n.id?null:n.id),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50",children:[a.jsxs("div",{className:"text-left",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n.name}),a.jsxs("p",{className:"text-red-600 font-semibold text-lg",children:["",n.pricePerHead,"/head ",a.jsx("span",{className:"text-gray-500 font-normal text-sm",children:"(60+ pax)"})]})]}),t===n.id?a.jsx(dx,{size:24,className:"text-gray-400"}):a.jsx(Hf,{size:24,className:"text-gray-400"})]}),t===n.id&&a.jsxs("div",{className:"border-t border-gray-100 p-6",children:[a.jsxs("div",{className:"bg-red-50 rounded-xl p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:"Pricing per Head"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:["60+ pax: ",a.jsxs("span",{className:"font-medium",children:["",n.pricingTiers[60]]})]}),a.jsxs("div",{children:["50 pax: ",a.jsxs("span",{className:"font-medium",children:["",n.pricingTiers[50]]})]}),a.jsxs("div",{children:["40 pax: ",a.jsxs("span",{className:"font-medium",children:["",n.pricingTiers[40]]})]}),a.jsxs("div",{children:["30 pax: ",a.jsxs("span",{className:"font-medium",children:["",n.pricingTiers[30]]})]})]})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.options.map((s,i)=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:s.name}),s.items?a.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:s.items.map((l,u)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(xr,{size:14,className:"text-red-500 mt-1 flex-shrink-0"}),l]},u))}):a.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[s.appetizer&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Appetizer:"})," ",s.appetizer.join(", ")]}),s.mainCourse&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Main Course:"})," ",s.mainCourse.join(", ")]}),s.dessert&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Dessert:"})," ",s.dessert.join(", ")]})]})]},i))})]})]},n.id))}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-12",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add-on Stations"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:pn.map(n=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:n.name}),a.jsx("p",{className:"text-sm text-gray-500",children:n.unit})]}),a.jsxs("p",{className:"font-semibold text-red-700",children:["",n.price.toLocaleString()]})]},n.id))})]}),a.jsx("div",{className:"text-center",children:e?a.jsx(M,{to:"/book",className:"inline-block bg-red-700 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-red-800",children:"Book Now"}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Sign up or log in to place your order"}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx(M,{to:"/signup",className:"bg-red-700 text-white px-8 py-3 rounded-xl font-medium hover:bg-red-800",children:"Sign Up"}),a.jsx(M,{to:"/login",className:"border-2 border-red-700 text-red-700 px-8 py-3 rounded-xl font-medium hover:bg-red-50",children:"Log In"})]})]})})]})})}function bx(){const[e,t]=j.useState(""),[r,n]=j.useState(""),[s,i]=j.useState(""),[l,u]=j.useState(!1),{signIn:o}=Rt(),c=Es(),h=async f=>{f.preventDefault(),i(""),u(!0);try{await o(e,r),c("/")}catch(d){i(d.message||"Failed to sign in")}finally{u(!1)}};return a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4 py-12",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"bg-white rounded-full p-3 w-24 h-24 flex items-center justify-center mx-auto mb-4 shadow-md border border-gray-100",children:a.jsx("img",{src:"/logo-red.png",alt:"Red Carpet Catering",className:"h-16 w-auto"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-500",children:"Sign in to your account"})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[a.jsx(Vf,{size:20}),s]}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ua,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"email",value:e,onChange:f=>t(f.target.value),placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(no,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"password",value:r,onChange:f=>n(f.target.value),placeholder:"",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full bg-red-700 text-white py-3 rounded-xl font-medium hover:bg-red-800 disabled:opacity-50",children:l?"Signing in...":"Sign In"})]}),a.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["Don't have an account? ",a.jsx(M,{to:"/signup",className:"text-red-700 font-medium hover:underline",children:"Sign up"})]})]})})})}function _x(){const[e,t]=j.useState({fullName:"",email:"",phone:"",password:"",confirmPassword:""}),[r,n]=j.useState(""),[s,i]=j.useState(!1),[l,u]=j.useState(!1),{signUp:o}=Rt(),c=f=>t(d=>({...d,[f.target.name]:f.target.value})),h=async f=>{if(f.preventDefault(),n(""),e.password!==e.confirmPassword){n("Passwords do not match");return}if(e.password.length<6){n("Password must be at least 6 characters");return}u(!0);try{await o(e.email,e.password,e.fullName,e.phone),i(!0)}catch(d){n(d.message||"Failed to create account")}finally{u(!1)}};return s?a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4 py-12",children:a.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Wf,{className:"text-green-600",size:32})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Account Created!"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"You can now sign in to your account."}),a.jsx(M,{to:"/login",className:"inline-block bg-red-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-red-800",children:"Go to Login"})]})}):a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4 py-12",children:a.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"bg-white rounded-full p-3 w-24 h-24 flex items-center justify-center mx-auto mb-4 shadow-md border border-gray-100",children:a.jsx("img",{src:"/logo-red.png",alt:"Red Carpet Catering",className:"h-16 w-auto"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Create Account"})]}),r&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[a.jsx(Vf,{size:20}),r]}),a.jsxs("form",{onSubmit:h,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(ws,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"text",name:"fullName",value:e.fullName,onChange:c,placeholder:"Juan Dela Cruz",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ua,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"email",name:"email",value:e.email,onChange:c,placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a.jsxs("div",{className:"relative",children:[a.jsx(kt,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"tel",name:"phone",value:e.phone,onChange:c,placeholder:"09XX-XXX-XXXX",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(no,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"password",name:"password",value:e.password,onChange:c,placeholder:"",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(no,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:c,placeholder:"",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full bg-red-700 text-white py-3 rounded-xl font-medium hover:bg-red-800 disabled:opacity-50",children:l?"Creating...":"Sign Up"})]}),a.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["Already have an account? ",a.jsx(M,{to:"/login",className:"text-red-700 font-medium hover:underline",children:"Sign in"})]})]})})}const td=[{id:"salad",name:"Salad",pick:1,color:"bg-green-100 text-green-800"},{id:"main",name:"Main Dish",pick:3,color:"bg-red-100 text-red-800",includes:["main_pork","main_fish","main_beef","main_chicken"]},{id:"side",name:"Sides",pick:2,color:"bg-orange-100 text-orange-800",includes:["side_vegetable","side_pasta"]},{id:"rice",name:"Rice",pick:2,color:"bg-amber-100 text-amber-800"},{id:"dessert",name:"Dessert",pick:2,color:"bg-pink-100 text-pink-800"}];function jx(){const{user:e,profile:t,isAdmin:r}=Rt(),n=Es(),[s,i]=j.useState(1),[l,u]=j.useState(!1),[o,c]=j.useState(""),[h,f]=j.useState([]),[d,v]=j.useState({venue:"",date:"",time:"",selectedPackage:"",selectedMenuOption:"",numberOfPax:60,addOns:[],motif:"",specialRequests:"",customerName:r?"":(t==null?void 0:t.full_name)||"",customerPhone:r?"":(t==null?void 0:t.phone)||"",customerEmail:r?"":(e==null?void 0:e.email)||"",customDishes:{}});j.useEffect(()=>{y()},[]);const y=async()=>{const{data:_}=await B.from("dishes").select("*").eq("available",!0).order("name");f(_||[])},w=()=>new Date().toISOString().split("T")[0],x=_=>{if(!_)return!1;const C=new Date(_),R=new Date;return R.setHours(0,0,0,0),C.setHours(0,0,0,0),C>=R},p=(_,C)=>v(R=>({...R,[_]:C})),m=_=>{const C=_.target.value;x(C)?(p("date",C),c("")):c("Please select a future date. Past dates are not allowed.")},g=_=>{const C=d.addOns.find(R=>R.id===_.id);p("addOns",C?d.addOns.filter(R=>R.id!==_.id):[...d.addOns,{id:_.id,quantity:1}])},b=(_,C)=>p("addOns",d.addOns.map(R=>R.id===_?{...R,quantity:Math.max(1,C)}:R)),k=_=>_.includes?h.filter(C=>_.includes.includes(C.category)):h.filter(C=>C.category===_.id),S=_=>d.customDishes[_]||[],E=(_,C,R)=>{const V=d.customDishes[_]||[],H=V.find(Q=>Q.id===C.id);let be;H?be=V.filter(Q=>Q.id!==C.id):V.length>=R?be=[...V.slice(1),{id:C.id,name:C.name,category:C.category}]:be=[...V,{id:C.id,name:C.name,category:C.category}],p("customDishes",{...d.customDishes,[_]:be})},O=_=>_.includes?"Pork, Fish, Beef, or Chicken":_.id==="side"?"Vegetable or Pasta":"",U=async()=>{var _,C;if(!x(d.date)){c("Cannot book for past dates. Please select a future date.");return}u(!0),c("");try{const R=r?d.customerName:(t==null?void 0:t.full_name)||((_=e.user_metadata)==null?void 0:_.full_name)||"Customer",V=r?d.customerPhone:(t==null?void 0:t.phone)||((C=e.user_metadata)==null?void 0:C.phone)||"",H=r?d.customerEmail:e.email,be=Object.values(d.customDishes).flat(),{error:Q}=await B.from("bookings").insert([{user_id:r?null:e.id,customer_name:R,customer_phone:V,customer_email:H,venue:d.venue,event_date:d.date,event_time:d.time,menu_package:d.selectedPackage,menu_option:d.selectedMenuOption,number_of_pax:d.numberOfPax,add_ons:d.addOns,custom_dishes:be,motif:d.motif,special_requests:d.specialRequests,total_amount:Bi(d.selectedPackage,d.numberOfPax,d.addOns),status:"pending"}]);if(Q)throw Q;n(r?"/admin/bookings":"/my-orders")}catch(R){c(R.message)}finally{u(!1)}},D=[()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Event Details"}),r&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4",children:[a.jsx("p",{className:"text-blue-700 font-medium mb-3",children:" Customer Information (Admin Booking)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ws,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"text",value:d.customerName,onChange:_=>p("customerName",_.target.value),placeholder:"Customer full name",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),a.jsxs("div",{className:"relative",children:[a.jsx(kt,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"tel",value:d.customerPhone,onChange:_=>p("customerPhone",_.target.value),placeholder:"09XX XXX XXXX",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ua,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"email",value:d.customerEmail,onChange:_=>p("customerEmail",_.target.value),placeholder:"email@example.com",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Venue Address *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ca,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("textarea",{value:d.venue,onChange:_=>p("venue",_.target.value),placeholder:"Complete address",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 min-h-[100px]"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"date",value:d.date,onChange:m,min:w(),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]}),o&&o.includes("date")&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),a.jsxs("div",{className:"relative",children:[a.jsx(oa,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"time",value:d.time,onChange:_=>p("time",_.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),()=>{var _;return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Select Menu Package"}),a.jsx("div",{className:"space-y-3",children:Object.values(dt).map(C=>a.jsx("button",{onClick:()=>{p("selectedPackage",C.id),p("selectedMenuOption",""),p("customDishes",{})},className:`w-full p-4 rounded-xl border-2 text-left ${d.selectedPackage===C.id?"border-red-700 bg-red-50":"border-gray-200 hover:border-red-300"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:C.name}),a.jsxs("p",{className:"text-red-600",children:["",C.pricePerHead,"/head"]})]}),a.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${d.selectedPackage===C.id?"border-red-700 bg-red-700":"border-gray-300"}`,children:d.selectedPackage===C.id&&a.jsx(xr,{size:14,className:"text-white"})})]})},C.id))}),d.selectedPackage&&a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-red-700 uppercase mb-3",children:"Select Menu Option (Base Template)"}),a.jsx("div",{className:"space-y-2",children:(_=dt[d.selectedPackage])==null?void 0:_.options.map((C,R)=>a.jsx("button",{onClick:()=>p("selectedMenuOption",C.name),className:`w-full p-3 rounded-lg text-left ${d.selectedMenuOption===C.name?"bg-red-700 text-white":"bg-white border border-gray-200 hover:bg-red-50"}`,children:C.name},R))})]})]})},()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Customize Your Menu"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Swap dishes to your preference within each category"})]}),td.map(_=>{const C=k(_),R=S(_.id),V=O(_);return a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:_.name}),V&&a.jsx("p",{className:"text-xs text-gray-500",children:V})]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.color}`,children:[R.length," / ",_.pick," selected"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:C.map(H=>{const be=R.some(Q=>Q.id===H.id);return a.jsxs("button",{onClick:()=>E(_.id,H,_.pick),className:`p-3 rounded-lg text-left flex items-center justify-between ${be?"bg-red-700 text-white":"bg-white border border-gray-200 hover:border-red-300"}`,children:[a.jsx("span",{className:"text-sm",children:H.name}),be&&a.jsx(xr,{size:16})]},H.id)})}),C.length===0&&a.jsx("p",{className:"text-gray-400 text-center py-4",children:"No dishes available in this category"})]},_.id)}),a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(Zc,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),a.jsxs("div",{className:"text-sm text-amber-800",children:[a.jsx("p",{className:"font-medium",children:"Customization Tips"}),a.jsx("p",{children:"Select your preferred dishes. If you don't select enough, the default from your menu option will be used."})]})]})]}),()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Guests & Add-ons"}),a.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[a.jsx("label",{className:"block text-sm font-semibold text-red-700 mb-3",children:"Number of Pax (Min. 30)"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[d.numberOfPax," guests"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["",Kn(d.selectedPackage,d.numberOfPax),"/head"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>p("numberOfPax",Math.max(30,d.numberOfPax-5)),className:"w-10 h-10 rounded-full bg-white border flex items-center justify-center hover:bg-gray-50",children:a.jsx(xs,{size:18})}),a.jsx("button",{onClick:()=>p("numberOfPax",d.numberOfPax+5),className:"w-10 h-10 rounded-full bg-red-700 text-white flex items-center justify-center hover:bg-red-800",children:a.jsx(Tt,{size:18})})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-red-200 flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"font-semibold text-red-700",children:["",(Kn(d.selectedPackage,d.numberOfPax)*d.numberOfPax).toLocaleString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Add-on Stations"}),a.jsx("div",{className:"space-y-2",children:pn.map(_=>{const C=d.addOns.find(R=>R.id===_.id);return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[a.jsxs("button",{onClick:()=>g(_),className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${C?"bg-red-700 border-red-700":"border-gray-300"}`,children:C&&a.jsx(xr,{size:12,className:"text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-800",children:_.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["",_.price.toLocaleString()]})]})]}),C&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>b(_.id,C.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(xs,{size:12})}),a.jsx("span",{className:"w-6 text-center text-sm",children:C.quantity}),a.jsx("button",{onClick:()=>b(_.id,C.quantity+1),className:"w-6 h-6 rounded-full bg-red-700 text-white flex items-center justify-center",children:a.jsx(Tt,{size:12})})]})]},_.id)})})]})]}),()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Motif & Requests"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Motif/Theme"}),a.jsxs("div",{className:"relative",children:[a.jsx(Kf,{className:"absolute left-3 top-3 text-gray-400",size:20}),a.jsx("input",{type:"text",value:d.motif,onChange:_=>p("motif",_.target.value),placeholder:"e.g., Blue and Gold, Rustic",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),a.jsx("textarea",{value:d.specialRequests,onChange:_=>p("specialRequests",_.target.value),placeholder:"Any special requirements...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 min-h-[120px]"})]}),a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(Zc,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),a.jsxs("div",{className:"text-sm text-amber-800",children:[a.jsx("p",{className:"font-medium",children:"Booking Policy"}),a.jsx("p",{children:"5,000 deposit required. Non-refundable but consumable."})]})]})]}),()=>{const _=dt[d.selectedPackage],C=Kn(d.selectedPackage,d.numberOfPax),R=Bi(d.selectedPackage,d.numberOfPax,d.addOns),V=r?d.customerName:(t==null?void 0:t.full_name)||"Customer",H=r?d.customerPhone:(t==null?void 0:t.phone)||"",be=Object.values(d.customDishes).flat();return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Review Order"}),r&&a.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg text-sm font-medium",children:' Admin Booking - Status will be set to "Pending"'}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-5 border border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-red-200",children:[a.jsx("div",{className:"w-12 h-12 bg-red-700 rounded-full flex items-center justify-center text-white font-bold",children:"RC"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:V}),a.jsx("p",{className:"text-sm text-gray-500",children:H})]})]}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Date & Time"}),a.jsxs("span",{className:"font-medium",children:[d.date," at ",d.time]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Venue"}),a.jsx("span",{className:"font-medium text-right max-w-[60%]",children:d.venue})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Motif"}),a.jsx("span",{className:"font-medium",children:d.motif||"-"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Order Details"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:_==null?void 0:_.name}),a.jsx("span",{children:d.selectedMenuOption})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:[d.numberOfPax," pax  ",C]}),a.jsxs("span",{className:"font-medium",children:["",(C*d.numberOfPax).toLocaleString()]})]}),d.addOns.map(Q=>{const Le=pn.find(Ge=>Ge.id===Q.id);return a.jsxs("div",{className:"flex justify-between text-gray-600",children:[a.jsxs("span",{children:[Le==null?void 0:Le.name," ",Q.quantity]}),a.jsxs("span",{children:["",(((Le==null?void 0:Le.price)||0)*Q.quantity).toLocaleString()]})]},Q.id)})]})]}),be.length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx(da,{size:18})," Custom Menu Selection"]}),a.jsx("div",{className:"space-y-2",children:td.map(Q=>{const Le=d.customDishes[Q.id]||[];return Le.length===0?null:a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:Q.name}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Le.map(Ge=>a.jsx("span",{className:"bg-white px-3 py-1 rounded-full text-sm border",children:Ge.name},Ge.id))})]},Q.id)})})]}),a.jsxs("div",{className:"bg-red-700 text-white rounded-xl p-5",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-2xl font-bold",children:["",R.toLocaleString()]})]}),a.jsx("p",{className:"text-red-200 text-sm mt-1",children:"Deposit: 5,000"})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o})]})}],$e=()=>s===1?x(d.date)?r?d.customerName&&d.customerPhone&&d.venue&&d.date&&d.time:d.venue&&d.date&&d.time:!1:s===2?d.selectedPackage&&d.selectedMenuOption:!0;return a.jsx("div",{className:"py-8 px-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-700 to-red-800 text-white p-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:r?"Book for Customer":"Book Catering"}),a.jsxs("p",{className:"text-red-200",children:["Step ",s," of 6"]})]}),a.jsx("div",{className:"flex justify-center gap-2 py-4 bg-gray-50",children:[1,2,3,4,5,6].map(_=>a.jsx("div",{className:`h-2 rounded-full ${_===s?"bg-red-700 w-8":_<s?"bg-red-300 w-3":"bg-gray-200 w-3"}`},_))}),a.jsx("div",{className:"p-6",children:D[s-1]()}),a.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[s>1&&a.jsxs("button",{onClick:()=>i(_=>_-1),className:"flex-1 py-3 border-2 border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-50 flex items-center justify-center gap-2",children:[a.jsx(cu,{size:20})," Back"]}),s<6?a.jsxs("button",{onClick:()=>i(_=>_+1),disabled:!$e(),className:"flex-1 py-3 bg-red-700 text-white rounded-xl font-medium hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:["Continue ",a.jsx(Nr,{size:20})]}):a.jsxs("button",{onClick:U,disabled:l,className:"flex-1 py-3 bg-red-700 text-white rounded-xl font-medium hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(vx,{size:20})," ",l?"Submitting...":"Submit Order"]})]})]})})})}function Gf({booking:e,onClose:t,onSave:r,isAdmin:n=!1}){const[s,i]=j.useState({customer_name:"",customer_phone:"",customer_email:"",venue:"",event_date:"",event_time:"",menu_package:"",menu_option:"",number_of_pax:60,add_ons:[],motif:"",special_requests:"",status:"pending"}),[l,u]=j.useState(!1),[o,c]=j.useState("");j.useEffect(()=>{e&&i({customer_name:e.customer_name||"",customer_phone:e.customer_phone||"",customer_email:e.customer_email||"",venue:e.venue||"",event_date:e.event_date||"",event_time:e.event_time||"",menu_package:e.menu_package||"",menu_option:e.menu_option||"",number_of_pax:e.number_of_pax||60,add_ons:e.add_ons||[],motif:e.motif||"",special_requests:e.special_requests||"",status:e.status||"pending"})},[e]);const h=(x,p)=>i(m=>({...m,[x]:p})),f=x=>{const p=s.add_ons.find(m=>m.id===x.id);h("add_ons",p?s.add_ons.filter(m=>m.id!==x.id):[...s.add_ons,{id:x.id,quantity:1}])},d=(x,p)=>{h("add_ons",s.add_ons.map(m=>m.id===x?{...m,quantity:Math.max(1,p)}:m))},v=async()=>{if(!s.venue||!s.event_date||!s.event_time){c("Please fill in all required fields");return}const x=new Date(s.event_date),p=new Date;if(p.setHours(0,0,0,0),x<p){c("Cannot set booking date in the past");return}u(!0),c("");try{const m=Bi(s.menu_package,s.number_of_pax,s.add_ons),{error:g}=await B.from("bookings").update({customer_name:s.customer_name,customer_phone:s.customer_phone,customer_email:s.customer_email,venue:s.venue,event_date:s.event_date,event_time:s.event_time,menu_package:s.menu_package,menu_option:s.menu_option,number_of_pax:s.number_of_pax,add_ons:s.add_ons,motif:s.motif,special_requests:s.special_requests,total_amount:m,status:n?s.status:e.status,updated_at:new Date().toISOString()}).eq("id",e.id);if(g)throw g;r()}catch(m){c(m.message)}finally{u(!1)}},y=Kn(s.menu_package,s.number_of_pax),w=Bi(s.menu_package,s.number_of_pax,s.add_ons);return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-700 to-red-800 text-white p-4 flex items-center justify-between flex-shrink-0",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Edit Booking"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-red-600 rounded-full",children:a.jsx(Ps,{size:24})})]}),a.jsxs("div",{className:"overflow-y-auto flex-1 p-6 space-y-6",children:[o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),n&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Customer Information"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),a.jsx("input",{type:"text",value:s.customer_name,onChange:x=>h("customer_name",x.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:s.customer_phone,onChange:x=>h("customer_phone",x.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:s.customer_email,onChange:x=>h("customer_email",x.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]})]}),n&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),a.jsxs("select",{value:s.status,onChange:x=>h("status",x.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Event Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Venue Address *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ca,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("textarea",{value:s.venue,onChange:x=>h("venue",x.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg min-h-[80px]",placeholder:"Complete address"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sr,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"date",value:s.event_date,onChange:x=>h("event_date",x.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time *"}),a.jsxs("div",{className:"relative",children:[a.jsx(oa,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"time",value:s.event_time,onChange:x=>h("event_time",x.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Menu Package"}),a.jsx("div",{className:"space-y-2",children:Object.values(dt).map(x=>a.jsx("button",{onClick:()=>{h("menu_package",x.id),h("menu_option","")},className:`w-full p-3 rounded-lg border-2 text-left ${s.menu_package===x.id?"border-red-700 bg-red-50":"border-gray-200 hover:border-red-300"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:x.name}),a.jsxs("span",{className:"text-red-600 ml-2",children:["",x.pricePerHead,"/head"]})]}),s.menu_package===x.id&&a.jsx(xr,{size:20,className:"text-red-700"})]})},x.id))}),s.menu_package&&dt[s.menu_package]&&a.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Menu Option"}),a.jsx("div",{className:"space-y-2",children:dt[s.menu_package].options.map((x,p)=>a.jsx("button",{onClick:()=>h("menu_option",x.name),className:`w-full p-2 rounded-lg text-left ${s.menu_option===x.name?"bg-red-700 text-white":"bg-white border hover:bg-red-50"}`,children:x.name},p))})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Number of Guests"}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[s.number_of_pax," pax"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["",y,"/head"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>h("number_of_pax",Math.max(30,s.number_of_pax-5)),className:"w-10 h-10 rounded-full bg-white border flex items-center justify-center hover:bg-gray-50",children:a.jsx(xs,{size:18})}),a.jsx("button",{onClick:()=>h("number_of_pax",s.number_of_pax+5),className:"w-10 h-10 rounded-full bg-red-700 text-white flex items-center justify-center hover:bg-red-800",children:a.jsx(Tt,{size:18})})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Add-ons"}),a.jsx("div",{className:"space-y-2",children:pn.map(x=>{const p=s.add_ons.find(m=>m.id===x.id);return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("button",{onClick:()=>f(x),className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${p?"bg-red-700 border-red-700":"border-gray-300"}`,children:p&&a.jsx(xr,{size:12,className:"text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-800",children:x.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["",x.price.toLocaleString()]})]})]}),p&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(x.id,p.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(xs,{size:12})}),a.jsx("span",{className:"w-6 text-center text-sm",children:p.quantity}),a.jsx("button",{onClick:()=>d(x.id,p.quantity+1),className:"w-6 h-6 rounded-full bg-red-700 text-white flex items-center justify-center",children:a.jsx(Tt,{size:12})})]})]},x.id)})})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif/Theme"}),a.jsxs("div",{className:"relative",children:[a.jsx(Kf,{className:"absolute left-3 top-3 text-gray-400",size:18}),a.jsx("input",{type:"text",value:s.motif,onChange:x=>h("motif",x.target.value),placeholder:"e.g., Blue and Gold",className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Requests"}),a.jsx("input",{type:"text",value:s.special_requests,onChange:x=>h("special_requests",x.target.value),placeholder:"Any special requirements",className:"w-full px-4 py-2 border rounded-lg"})]})]}),a.jsx("div",{className:"bg-red-700 text-white rounded-xl p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total"}),a.jsxs("span",{className:"text-2xl font-bold",children:["",w.toLocaleString()]})]})})]}),a.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-3 flex-shrink-0",children:[a.jsx("button",{onClick:t,className:"flex-1 py-3 border-2 border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-100",children:"Cancel"}),a.jsxs("button",{onClick:v,disabled:l,className:"flex-1 py-3 bg-red-700 text-white rounded-xl font-medium hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(Ts,{size:20}),l?"Saving...":"Save Changes"]})]})]})})}function kx(){const{user:e}=Rt(),[t,r]=j.useState([]),[n,s]=j.useState(!0),[i,l]=j.useState(null);j.useEffect(()=>{u()},[e]);const u=async()=>{if(e)try{const{data:f}=await B.from("bookings").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});r(f||[])}catch(f){console.error("Error:",f)}finally{s(!1)}},o=f=>({pending:"bg-amber-100 text-amber-800",confirmed:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-800",c=f=>{if(f.status==="completed"||f.status==="cancelled")return!1;const d=new Date(f.event_date),v=new Date;return v.setHours(0,0,0,0),d>=v},h=()=>{l(null),u()};return n?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-700"})}):a.jsxs("div",{className:"py-8 px-4",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"My Orders"}),a.jsx("p",{className:"text-gray-500",children:"Track your catering bookings"})]}),a.jsxs(M,{to:"/book",className:"bg-red-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-red-800 flex items-center gap-2",children:["New Booking ",a.jsx(Nr,{size:20})]})]}),t.length===0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx(Er,{className:"mx-auto text-gray-300 mb-4",size:64}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No bookings yet"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Start planning your next event!"}),a.jsxs(M,{to:"/book",className:"inline-flex items-center gap-2 bg-red-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-red-800",children:["Book Now ",a.jsx(Nr,{size:20})]})]}):a.jsx("div",{className:"space-y-4",children:t.map(f=>{var v;const d=dt[f.menu_package];return a.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o(f.status)}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)}),c(f)&&a.jsxs("button",{onClick:()=>l(f),className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:[a.jsx(mn,{size:16})," Edit"]})]}),a.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:(d==null?void 0:d.name)||f.menu_package}),a.jsx("p",{className:"text-gray-500",children:f.menu_option})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",(v=f.total_amount)==null?void 0:v.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[f.number_of_pax," pax"]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Sr,{size:16,className:"text-red-600"}),a.jsx("span",{children:f.event_date})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(oa,{size:16,className:"text-red-600"}),a.jsx("span",{children:f.event_time})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(ca,{size:16,className:"text-red-600"}),a.jsx("span",{className:"truncate",children:f.venue})]})]}),f.add_ons&&f.add_ons.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add-ons:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.add_ons.map(y=>{const w=pn.find(x=>x.id===y.id);return w&&a.jsxs("span",{className:"bg-gray-100 px-3 py-1 rounded-full text-sm",children:[w.name," ",y.quantity]},y.id)})})]}),f.motif&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Motif:"})," ",f.motif]})})]})},f.id)})})]}),i&&a.jsx(Gf,{booking:i,onClose:()=>l(null),onSave:h,isAdmin:!1})]})}function Sx(){const[e,t]=j.useState({totalBookings:0,pendingBookings:0,totalStaff:0,totalEquipment:0}),[r,n]=j.useState([]),[s,i]=j.useState(!0),[l,u]=j.useState(new Date),[o,c]=j.useState(null);j.useEffect(()=>{h()},[]);const h=async()=>{try{const[{count:k},{count:S},{count:E},{count:O},{data:U}]=await Promise.all([B.from("bookings").select("*",{count:"exact",head:!0}),B.from("bookings").select("*",{count:"exact",head:!0}).eq("status","pending"),B.from("staff").select("*",{count:"exact",head:!0}),B.from("equipment").select("*",{count:"exact",head:!0}),B.from("bookings").select("*").order("event_date",{ascending:!0})]);t({totalBookings:k||0,pendingBookings:S||0,totalStaff:E||0,totalEquipment:O||0}),n(U||[])}catch(k){console.error("Error:",k)}finally{i(!1)}},f=k=>{const S=k.getFullYear(),E=k.getMonth(),O=new Date(S,E,1),z=new Date(S,E+1,0).getDate(),ae=O.getDay();return{daysInMonth:z,startingDay:ae}},d=k=>{const S=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`;return r.filter(E=>E.event_date===S)},v=()=>u(new Date(l.getFullYear(),l.getMonth()-1)),y=()=>u(new Date(l.getFullYear(),l.getMonth()+1)),w=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],{daysInMonth:p,startingDay:m}=f(l),g=k=>({pending:"bg-amber-500",confirmed:"bg-blue-500",completed:"bg-green-500",cancelled:"bg-red-500"})[k]||"bg-gray-500",b=k=>{const S=new Date;return k===S.getDate()&&l.getMonth()===S.getMonth()&&l.getFullYear()===S.getFullYear()};return a.jsx("div",{className:"py-8 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-500",children:"Manage bookings, staff, and equipment"})]}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsxs(M,{to:"/admin/bookings",className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(ro,{className:"text-red-700",size:24})}),a.jsx("span",{className:"text-3xl font-bold text-gray-800",children:e.totalBookings})]}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Total Bookings"})]}),a.jsxs(M,{to:"/admin/bookings",className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:a.jsx(oa,{className:"text-amber-700",size:24})}),a.jsx("span",{className:"text-3xl font-bold text-amber-600",children:e.pendingBookings})]}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Pending"})]}),a.jsxs(M,{to:"/admin/staff",className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:a.jsx(bs,{className:"text-blue-700",size:24})}),a.jsx("span",{className:"text-3xl font-bold text-gray-800",children:e.totalStaff})]}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Staff"})]}),a.jsxs(M,{to:"/admin/equipment",className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Er,{className:"text-green-700",size:24})}),a.jsx("span",{className:"text-3xl font-bold text-gray-800",children:e.totalEquipment})]}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Equipment"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Sr,{size:24,className:"text-red-700"})," Booking Calendar"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(cu,{size:20})}),a.jsxs("span",{className:"font-semibold text-lg w-40 text-center",children:[w[l.getMonth()]," ",l.getFullYear()]}),a.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(Nr,{size:20})})]})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:x.map(k=>a.jsx("div",{className:"text-center text-sm font-semibold text-gray-500 py-2",children:k},k))}),a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:m}).map((k,S)=>a.jsx("div",{className:"h-24 bg-gray-50 rounded-lg"},`empty-${S}`)),Array.from({length:p}).map((k,S)=>{const E=S+1,O=d(E),U=O.length>0;return a.jsxs("div",{onClick:()=>U&&c({day:E,bookings:O}),className:`h-24 rounded-lg border p-2 ${b(E)?"border-red-500 border-2":"border-gray-200"} ${U?"cursor-pointer hover:border-red-400 hover:shadow-md":""} ${U?"bg-red-50":"bg-white"}`,children:[a.jsx("div",{className:`text-sm font-medium ${b(E)?"text-red-700":"text-gray-700"}`,children:E}),U&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:"bg-red-700 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:O.length}),a.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:O.slice(0,3).map((z,ae)=>a.jsx("div",{className:`w-2 h-2 rounded-full ${g(z.status)}`,title:z.status},ae))})]})]},E)})]}),a.jsxs("div",{className:"flex items-center gap-6 mt-4 pt-4 border-t",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),a.jsx("span",{className:"text-sm",children:"Pending"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-sm",children:"Confirmed"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-sm",children:"Completed"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("span",{className:"text-sm",children:"Cancelled"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsxs(M,{to:"/admin/bookings",className:"bg-gradient-to-br from-red-700 to-red-800 text-white rounded-2xl p-6 hover:shadow-lg",children:[a.jsx(ro,{size:32,className:"mb-3"}),a.jsx("h3",{className:"font-bold text-lg",children:"Manage Bookings"}),a.jsx("p",{className:"text-red-200 text-sm",children:"Assign staff, tables, chairs"})]}),a.jsxs(M,{to:"/admin/staff",className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-2xl p-6 hover:shadow-lg",children:[a.jsx(bs,{size:32,className:"mb-3"}),a.jsx("h3",{className:"font-bold text-lg",children:"Manage Staff"}),a.jsx("p",{className:"text-blue-200 text-sm",children:"Add, edit, availability"})]}),a.jsxs(M,{to:"/admin/equipment",className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-2xl p-6 hover:shadow-lg",children:[a.jsx(Er,{size:32,className:"mb-3"}),a.jsx("h3",{className:"font-bold text-lg",children:"Manage Equipment"}),a.jsx("p",{className:"text-green-200 text-sm",children:"Tables, chairs, inventory"})]}),a.jsxs(M,{to:"/admin/menu",className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-2xl p-6 hover:shadow-lg",children:[a.jsx(da,{size:32,className:"mb-3"}),a.jsx("h3",{className:"font-bold text-lg",children:"Manage Menu"}),a.jsx("p",{className:"text-purple-200 text-sm",children:"Dishes & packages"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-red-700 text-white p-4 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold",children:[w[l.getMonth()]," ",o.day,", ",l.getFullYear(),a.jsxs("span",{className:"ml-2 bg-white/20 px-2 py-1 rounded-full text-sm",children:[o.bookings.length," event(s)"]})]}),a.jsx("button",{onClick:()=>c(null),className:"p-1 hover:bg-red-800 rounded-full",children:a.jsx(Ps,{size:24})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[60vh] p-4 space-y-3",children:o.bookings.map(k=>{var S;return a.jsxs(M,{to:"/admin/bookings",className:"block p-4 bg-gray-50 rounded-xl hover:bg-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:k.customer_name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${g(k.status)}`,children:k.status})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.venue]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.event_time]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.number_of_pax," pax"]}),a.jsxs("p",{className:"text-sm font-semibold text-red-700 mt-2",children:["",(S=k.total_amount)==null?void 0:S.toLocaleString()]})]},k.id)})})]})})]})})}function Nx(){var tt,Ke;const[e,t]=j.useState([]),[r,n]=j.useState([]),[s,i]=j.useState([]),[l,u]=j.useState(!0),[o,c]=j.useState(null),[h,f]=j.useState(null),[d,v]=j.useState(""),[y,w]=j.useState("all"),[x,p]=j.useState(null),[m,g]=j.useState(!1);j.useEffect(()=>{b()},[]);const b=async()=>{try{const P=new Date,N=P.toISOString().split("T")[0],D=P.toTimeString().slice(0,5);await B.from("bookings").update({status:"completed"}).eq("status","confirmed").or(`event_date.lt.${N},and(event_date.eq.${N},event_time.lt.${D})`);const[$e,_,C]=await Promise.all([B.from("bookings").select("*").order("event_date",{ascending:!0}),B.from("staff").select("*").order("name"),B.from("equipment").select("*").order("category, name")]);t($e.data||[]),n(_.data||[]),i(C.data||[])}catch(P){console.error("Error:",P)}finally{u(!1)}},k=async(P,N)=>{await B.from("bookings").update({status:N}).eq("id",P),t(D=>D.map($e=>$e.id===P?{...$e,status:N}:$e))},S=async()=>{if(o){g(!0);try{await B.from("bookings").update({assigned_staff:o.assigned_staff,assigned_equipment:o.assigned_equipment,status:o.status}).eq("id",o.id),t(P=>P.map(N=>N.id===o.id?o:N)),alert("Saved!")}catch{alert("Error saving")}finally{g(!1)}}},E=(P,N)=>{if(!o)return;const D=o.assigned_staff||[],_=D.find(C=>C.id===P.id)?D.filter(C=>C.id!==P.id):[...D,{id:P.id,name:P.name,role:N}];c({...o,assigned_staff:_})},O=(P,N)=>{if(!o)return;const D=o.assigned_equipment||{};if(N<=0){const{[P]:$e,..._}=D;c({...o,assigned_equipment:_})}else c({...o,assigned_equipment:{...D,[P]:N}})},U=P=>({pending:"bg-amber-100 text-amber-700",confirmed:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"})[P]||"bg-gray-100 text-gray-700",z=()=>{f(null),b()},ae=e.filter(P=>{var N,D;return(((N=P.customer_name)==null?void 0:N.toLowerCase().includes(d.toLowerCase()))||((D=P.venue)==null?void 0:D.toLowerCase().includes(d.toLowerCase())))&&(y==="all"||P.status===y)});return l?a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-700 rounded-full animate-spin"})}):a.jsx("div",{className:"py-8 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsx(M,{to:"/admin",className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(uu,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Manage Bookings"}),a.jsx("p",{className:"text-gray-500",children:"Assign staff and equipment"})]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sticky top-24",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"relative mb-3",children:[a.jsx(gx,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Search...",value:d,onChange:P=>v(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("select",{value:y,onChange:P=>w(P.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:[ae.map(P=>{var N;return a.jsxs("button",{onClick:()=>c(P),className:`w-full p-3 rounded-xl text-left ${(o==null?void 0:o.id)===P.id?"bg-red-50 border-2 border-red-700":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:"font-medium text-gray-800 truncate",children:P.customer_name}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${U(P.status)}`,children:P.status})]}),a.jsx("p",{className:"text-sm text-gray-500",children:P.event_date}),a.jsxs("p",{className:"text-sm text-gray-500",children:[P.number_of_pax," pax  ",(N=P.total_amount)==null?void 0:N.toLocaleString()]})]},P.id)}),ae.length===0&&a.jsx("p",{className:"text-center text-gray-500 py-4",children:"No bookings"})]})]})}),a.jsx("div",{className:"lg:col-span-2",children:o?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-700 to-red-800 text-white p-6",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:o.customer_name}),a.jsxs("p",{className:"text-red-200",children:[(tt=dt[o.menu_package])==null?void 0:tt.name,"  ",o.menu_option]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>f(o),className:"bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-1",children:[a.jsx(mn,{size:16})," Edit"]}),a.jsxs("select",{value:o.status,onChange:P=>{k(o.id,P.target.value),c({...o,status:P.target.value})},className:"bg-white/20 text-white border-0 rounded-lg px-3 py-1 text-sm",children:[a.jsx("option",{value:"pending",className:"text-gray-800",children:"Pending"}),a.jsx("option",{value:"confirmed",className:"text-gray-800",children:"Confirmed"}),a.jsx("option",{value:"completed",className:"text-gray-800",children:"Completed"}),a.jsx("option",{value:"cancelled",className:"text-gray-800",children:"Cancelled"})]})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Event"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{className:"flex items-start gap-2",children:[a.jsx(Sr,{size:16,className:"text-gray-400 mt-0.5"}),o.event_date," at ",o.event_time]}),a.jsxs("p",{className:"flex items-start gap-2",children:[a.jsx(ca,{size:16,className:"text-gray-400 mt-0.5"}),o.venue]}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(bs,{size:16,className:"text-gray-400"}),o.number_of_pax," guests"]}),o.motif&&a.jsxs("p",{children:[" ",o.motif]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Contact"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(kt,{size:16,className:"text-gray-400"}),o.customer_phone]}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(ua,{size:16,className:"text-gray-400"}),o.customer_email]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("p",{className:"text-lg font-bold text-red-700",children:["Total: ",(Ke=o.total_amount)==null?void 0:Ke.toLocaleString()]})})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Assign Staff"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"text-sm text-gray-500 mb-2 block",children:"Head Waiter"}),a.jsx("button",{onClick:()=>p("head_waiter"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-left hover:border-red-400 hover:bg-red-50",children:(o.assigned_staff||[]).filter(P=>P.role==="head_waiter").length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:(o.assigned_staff||[]).filter(P=>P.role==="head_waiter").map(P=>a.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:P.name},P.id))}):a.jsx("span",{className:"text-gray-400",children:"+ Select Head Waiter"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-500 mb-2 block",children:"Service Staff"}),a.jsx("button",{onClick:()=>p("service"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-left hover:border-red-400 hover:bg-red-50",children:(o.assigned_staff||[]).filter(P=>P.role==="service").length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:(o.assigned_staff||[]).filter(P=>P.role==="service").map(P=>a.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-700 rounded-full text-sm",children:P.name},P.id))}):a.jsx("span",{className:"text-gray-400",children:"+ Select Service Staff"})})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Assign Tables & Chairs"}),a.jsx("div",{className:"space-y-2",children:s.map(P=>{const N=(o.assigned_equipment||{})[P.id]||0;return a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:P.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[P.quantity," available"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>O(P.id,N-1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:a.jsx(xs,{size:14})}),a.jsx("span",{className:"w-8 text-center font-medium",children:N}),a.jsx("button",{onClick:()=>O(P.id,N+1),disabled:N>=P.quantity,className:"w-8 h-8 rounded-full bg-red-700 text-white flex items-center justify-center hover:bg-red-800 disabled:opacity-50",children:a.jsx(Tt,{size:14})})]})]},P.id)})})]}),a.jsxs("button",{onClick:S,disabled:m,className:"w-full py-3 bg-red-700 text-white rounded-xl font-medium hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(Ts,{size:20})," ",m?"Saving...":"Save Assignment"]})]})]}):a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Sr,{size:40,className:"text-gray-400"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Select a Booking"}),a.jsx("p",{className:"text-gray-500",children:"Click on a booking to view and assign"})]})})]}),x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-red-700 text-white p-4 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold",children:["Select ",x==="head_waiter"?"Head Waiter":"Service Staff"]}),a.jsx("button",{onClick:()=>p(null),className:"p-1 hover:bg-red-800 rounded-full",children:a.jsx(Ps,{size:24})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:r.filter(P=>x==="head_waiter"?P.role==="head_waiter":P.role!=="head_waiter").map(P=>{const N=((o==null?void 0:o.assigned_staff)||[]).some(D=>D.id===P.id);return a.jsxs("button",{onClick:()=>E(P,x),disabled:!P.available,className:`w-full p-4 flex items-center justify-between border-b border-gray-100 ${P.available?"hover:bg-red-50":"opacity-50"} ${N?"bg-red-100":""}`,children:[a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-800",children:P.name}),P.note&&a.jsx("p",{className:"text-xs text-gray-500",children:P.note}),!P.available&&a.jsx("p",{className:"text-xs text-red-500",children:"Unavailable"})]}),N&&a.jsx(xr,{size:20,className:"text-red-700"})]},P.id)})}),a.jsx("div",{className:"p-4 border-t",children:a.jsx("button",{onClick:()=>p(null),className:"w-full py-2 bg-red-700 text-white rounded-lg font-medium",children:"Done"})})]})}),h&&a.jsx(Gf,{booking:h,onClose:()=>f(null),onSave:z,isAdmin:!0})]})})}const Zs=[{id:"salad",name:"Salad",color:"bg-green-100 text-green-800"},{id:"main_pork",name:"Main - Pork",color:"bg-red-100 text-red-800"},{id:"main_fish",name:"Main - Fish/Seafood",color:"bg-blue-100 text-blue-800"},{id:"main_beef",name:"Main - Beef",color:"bg-amber-100 text-amber-800"},{id:"main_chicken",name:"Main - Chicken",color:"bg-yellow-100 text-yellow-800"},{id:"side_vegetable",name:"Side - Vegetable",color:"bg-emerald-100 text-emerald-800"},{id:"side_pasta",name:"Side - Pasta",color:"bg-orange-100 text-orange-800"},{id:"rice",name:"Rice",color:"bg-stone-100 text-stone-800"},{id:"dessert",name:"Dessert",color:"bg-pink-100 text-pink-800"}];function Ex(){const[e,t]=j.useState("dishes"),[r,n]=j.useState([]),[s,i]=j.useState([]),[l,u]=j.useState(!0),[o,c]=j.useState(null),[h,f]=j.useState(null),[d,v]=j.useState({name:"",category:"salad",description:""}),[y,w]=j.useState({name:"",price_per_head:0,price_tier_60:0,price_tier_50:0,price_tier_40:0,price_tier_30:0,description:""}),[x,p]=j.useState(!1),[m,g]=j.useState(!1),[b,k]=j.useState("all");j.useEffect(()=>{S()},[]);const S=async()=>{try{const[{data:N},{data:D}]=await Promise.all([B.from("dishes").select("*").order("category, name"),B.from("menu_packages").select("*").order("sort_order")]);n(N||[]),i(D||[])}catch(N){console.error("Error:",N)}finally{u(!1)}},E=async()=>{if(!d.name)return alert("Please enter dish name");const{error:N}=await B.from("dishes").insert([d]);if(N)return alert("Error: "+N.message);v({name:"",category:"salad",description:""}),p(!1),S()},O=async()=>{if(!o)return;const{error:N}=await B.from("dishes").update({name:o.name,category:o.category,description:o.description,available:o.available}).eq("id",o.id);if(N)return alert("Error: "+N.message);c(null),S()},U=async N=>{confirm("Delete this dish?")&&(await B.from("dishes").delete().eq("id",N),S())},z=async()=>{if(!y.name||!y.price_per_head)return alert("Please fill in all required fields");const{error:N}=await B.from("menu_packages").insert([{...y,sort_order:s.length+1}]);if(N)return alert("Error: "+N.message);w({name:"",price_per_head:0,price_tier_60:0,price_tier_50:0,price_tier_40:0,price_tier_30:0,description:""}),g(!1),S()},ae=async()=>{if(!h)return;const{error:N}=await B.from("menu_packages").update(h).eq("id",h.id);if(N)return alert("Error: "+N.message);f(null),S()},tt=async N=>{confirm("Delete this package? This cannot be undone.")&&(await B.from("menu_packages").delete().eq("id",N),S())},Ke=N=>Zs.find(D=>D.id===N)||{name:N,color:"bg-gray-100 text-gray-800"},P=b==="all"?r:r.filter(N=>N.category===b);return l?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-700"})}):a.jsx("div",{className:"py-8 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Menu Management"}),a.jsx("p",{className:"text-gray-500",children:"Add, edit, and manage dishes and packages"})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>t("dishes"),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium ${e==="dishes"?"bg-red-700 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(da,{size:20})," Dishes (",r.length,")"]}),a.jsxs("button",{onClick:()=>t("packages"),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium ${e==="packages"?"bg-red-700 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(Er,{size:20})," Packages (",s.length,")"]})]}),e==="dishes"&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>k("all"),className:`px-3 py-1 rounded-full text-sm ${b==="all"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"All"}),Zs.map(N=>a.jsx("button",{onClick:()=>k(N.id),className:`px-3 py-1 rounded-full text-sm ${b===N.id?N.color+" ring-2 ring-offset-1":"bg-gray-100"}`,children:N.name},N.id))]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-red-700 text-white px-4 py-2 rounded-lg hover:bg-red-800",children:[a.jsx(Tt,{size:20})," Add Dish"]})]}),x&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Add New Dish"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Dish name *",value:d.name,onChange:N=>v({...d,name:N.target.value}),className:"px-3 py-2 border rounded-lg"}),a.jsx("select",{value:d.category,onChange:N=>v({...d,category:N.target.value}),className:"px-3 py-2 border rounded-lg",children:Zs.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))}),a.jsx("input",{type:"text",placeholder:"Description (optional)",value:d.description,onChange:N=>v({...d,description:N.target.value}),className:"px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Save Dish"}),a.jsx("button",{onClick:()=>p(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Cancel"})]})]}),a.jsx("div",{className:"space-y-2",children:P.map(N=>a.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg ${N.available?"bg-gray-50":"bg-gray-100 opacity-60"}`,children:(o==null?void 0:o.id)===N.id?a.jsxs("div",{className:"flex-1 flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"text",value:o.name,onChange:D=>c({...o,name:D.target.value}),className:"flex-1 px-3 py-2 border rounded-lg min-w-[200px]"}),a.jsx("select",{value:o.category,onChange:D=>c({...o,category:D.target.value}),className:"px-3 py-2 border rounded-lg",children:Zs.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:o.available,onChange:D=>c({...o,available:D.target.checked})}),"Available"]}),a.jsx("button",{onClick:O,className:"p-2 bg-green-600 text-white rounded-lg",children:a.jsx(Ts,{size:18})}),a.jsx("button",{onClick:()=>c(null),className:"p-2 bg-gray-200 rounded-lg",children:a.jsx(Ps,{size:18})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Ke(N.category).color}`,children:Ke(N.category).name}),a.jsx("span",{className:N.available?"":"line-through",children:N.name})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>c(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:a.jsx(mn,{size:18})}),a.jsx("button",{onClick:()=>U(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(Mi,{size:18})})]})]})},N.id))})]}),e==="packages"&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Menu Packages"}),a.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 bg-red-700 text-white px-4 py-2 rounded-lg hover:bg-red-800",children:[a.jsx(Tt,{size:20})," Add Package"]})]}),m&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Add New Package"}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Package name *",value:y.name,onChange:N=>w({...y,name:N.target.value}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Base price/head *",value:y.price_per_head||"",onChange:N=>w({...y,price_per_head:parseInt(N.target.value)||0}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Price (60+ pax)",value:y.price_tier_60||"",onChange:N=>w({...y,price_tier_60:parseInt(N.target.value)||0}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Price (50-59 pax)",value:y.price_tier_50||"",onChange:N=>w({...y,price_tier_50:parseInt(N.target.value)||0}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Price (40-49 pax)",value:y.price_tier_40||"",onChange:N=>w({...y,price_tier_40:parseInt(N.target.value)||0}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",placeholder:"Price (30-39 pax)",value:y.price_tier_30||"",onChange:N=>w({...y,price_tier_30:parseInt(N.target.value)||0}),className:"px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{onClick:z,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Save Package"}),a.jsx("button",{onClick:()=>g(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Cancel"})]})]}),a.jsx("div",{className:"space-y-4",children:s.map(N=>a.jsx("div",{className:`border rounded-xl p-4 ${N.available?"":"bg-gray-100 opacity-60"}`,children:(h==null?void 0:h.id)===N.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx("input",{type:"text",value:h.name,onChange:D=>f({...h,name:D.target.value}),className:"px-3 py-2 border rounded-lg"}),a.jsx("input",{type:"number",value:h.price_per_head,onChange:D=>f({...h,price_per_head:parseInt(D.target.value)||0}),className:"px-3 py-2 border rounded-lg",placeholder:"Base price"}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:h.available,onChange:D=>f({...h,available:D.target.checked})})," Available"]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"60+ pax"}),a.jsx("input",{type:"number",value:h.price_tier_60,onChange:D=>f({...h,price_tier_60:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"50-59 pax"}),a.jsx("input",{type:"number",value:h.price_tier_50,onChange:D=>f({...h,price_tier_50:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"40-49 pax"}),a.jsx("input",{type:"number",value:h.price_tier_40,onChange:D=>f({...h,price_tier_40:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"30-39 pax"}),a.jsx("input",{type:"number",value:h.price_tier_30,onChange:D=>f({...h,price_tier_30:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ae,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Save"}),a.jsx("button",{onClick:()=>f(null),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Cancel"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:N.name}),a.jsxs("p",{className:"text-red-700 font-medium",children:["",N.price_per_head,"/head"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Tiers: ",N.price_tier_60," (60+) | ",N.price_tier_50," (50+) | ",N.price_tier_40," (40+) | ",N.price_tier_30," (30+)"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>f(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:a.jsx(mn,{size:18})}),a.jsx("button",{onClick:()=>tt(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(Mi,{size:18})})]})]})},N.id))})]})]})})}function Cx(){const[e,t]=j.useState([]),[r,n]=j.useState(!0),[s,i]=j.useState(!1),[l,u]=j.useState(null),[o,c]=j.useState({name:"",role:"service",note:"",available:!0});j.useEffect(()=>{h()},[]);const h=async()=>{const{data:m}=await B.from("staff").select("*").order("role, name");t(m||[]),n(!1)},f=async m=>{m.preventDefault(),l?await B.from("staff").update(o).eq("id",l.id):await B.from("staff").insert([o]),h(),y()},d=async(m,g)=>{await B.from("staff").update({available:!g}).eq("id",m),t(b=>b.map(k=>k.id===m?{...k,available:!g}:k))},v=async m=>{confirm("Delete?")&&(await B.from("staff").delete().eq("id",m),t(g=>g.filter(b=>b.id!==m)))},y=()=>{i(!1),u(null),c({name:"",role:"service",note:"",available:!0})},w=m=>{u(m),c({name:m.name,role:m.role,note:m.note||"",available:m.available}),i(!0)},x={head_waiter:e.filter(m=>m.role==="head_waiter"),service:e.filter(m=>m.role==="service"),extra:e.filter(m=>m.role==="extra"),student:e.filter(m=>m.role==="student")},p={head_waiter:"Head Waiters & Assistants",service:"Service Staff",extra:"Extra Staff",student:"Students"};return r?a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-700 rounded-full animate-spin"})}):a.jsx("div",{className:"py-8 px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(M,{to:"/admin",className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(uu,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Staff Management"}),a.jsxs("p",{className:"text-gray-500",children:[e.length," members"]})]})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-red-700 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-800 flex items-center gap-2",children:[a.jsx(Tt,{size:20})," Add Staff"]})]}),s&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:l?"Edit Staff":"Add Staff"}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:o.name,onChange:m=>c({...o,name:m.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a.jsxs("select",{value:o.role,onChange:m=>c({...o,role:m.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg",children:[a.jsx("option",{value:"head_waiter",children:"Head Waiter / Assistant"}),a.jsx("option",{value:"service",children:"Service Staff"}),a.jsx("option",{value:"extra",children:"Extra Staff"}),a.jsx("option",{value:"student",children:"Student"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),a.jsx("input",{type:"text",value:o.note,onChange:m=>c({...o,note:m.target.value}),placeholder:"e.g., Assistant, Marketing",className:"w-full px-4 py-2 border border-gray-200 rounded-lg"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"avail",checked:o.available,onChange:m=>c({...o,available:m.target.checked}),className:"w-4 h-4 text-red-700 rounded"}),a.jsx("label",{htmlFor:"avail",className:"text-sm text-gray-700",children:"Available"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:y,className:"flex-1 py-2 border border-gray-200 rounded-lg font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 py-2 bg-red-700 text-white rounded-lg font-medium hover:bg-red-800 flex items-center justify-center gap-2",children:[a.jsx(Ts,{size:18})," Save"]})]})]})]}),Object.entries(x).map(([m,g])=>g.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-700 uppercase tracking-wide mb-4",children:[p[m]," (",g.length,")"]}),a.jsx("div",{className:"space-y-2",children:g.map(b=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${b.available?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:a.jsx(ws,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:b.name}),b.note&&a.jsx("p",{className:"text-xs text-gray-500",children:b.note})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(b.id,b.available),className:`px-3 py-1 rounded-full text-sm font-medium ${b.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.available?"Available":"Unavailable"}),a.jsx("button",{onClick:()=>w(b),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg",children:a.jsx(mn,{size:16})}),a.jsx("button",{onClick:()=>v(b.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:a.jsx(Mi,{size:16})})]})]},b.id))})]},m)),e.length===0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx(ws,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No staff yet. Add your first member above."})]})]})})}function Tx(){const[e,t]=j.useState([]),[r,n]=j.useState(!0),[s,i]=j.useState(!1),[l,u]=j.useState(null),[o,c]=j.useState({name:"",category:"Buffet",quantity:0});j.useEffect(()=>{h()},[]);const h=async()=>{const{data:x}=await B.from("equipment").select("*").order("category, name");t(x||[]),n(!1)},f=async x=>{x.preventDefault(),l?await B.from("equipment").update(o).eq("id",l.id):await B.from("equipment").insert([o]),h(),v()},d=async x=>{confirm("Delete?")&&(await B.from("equipment").delete().eq("id",x),t(p=>p.filter(m=>m.id!==x)))},v=()=>{i(!1),u(null),c({name:"",category:"Buffet",quantity:0})},y=x=>{u(x),c({name:x.name,category:x.category,quantity:x.quantity}),i(!0)},w=[...new Set(e.map(x=>x.category))];return r?a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-700 rounded-full animate-spin"})}):a.jsx("div",{className:"py-8 px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(M,{to:"/admin",className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(uu,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Equipment Management"}),a.jsx("p",{className:"text-gray-500",children:"Tables, chairs, and inventory"})]})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-red-700 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-800 flex items-center gap-2",children:[a.jsx(Tt,{size:20})," Add Equipment"]})]}),s&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:l?"Edit Equipment":"Add Equipment"}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:o.name,onChange:x=>c({...o,name:x.target.value}),placeholder:"e.g., Round Table, Chair",required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),a.jsxs("select",{value:o.category,onChange:x=>c({...o,category:x.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg",children:[a.jsx("option",{value:"Buffet",children:"Buffet"}),a.jsx("option",{value:"Bar",children:"Bar"}),a.jsx("option",{value:"Seating",children:"Seating"}),a.jsx("option",{value:"Linens",children:"Linens"}),a.jsx("option",{value:"Others",children:"Others"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),a.jsx("input",{type:"number",min:"0",value:o.quantity,onChange:x=>c({...o,quantity:parseInt(x.target.value)||0}),required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:v,className:"flex-1 py-2 border border-gray-200 rounded-lg font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 py-2 bg-red-700 text-white rounded-lg font-medium hover:bg-red-800 flex items-center justify-center gap-2",children:[a.jsx(Ts,{size:18})," Save"]})]})]})]}),w.map(x=>{const p=e.filter(m=>m.category===x);return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-700 uppercase tracking-wide mb-4",children:[x," (",p.length,")"]}),a.jsx("div",{className:"space-y-2",children:p.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:a.jsx(Er,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:m.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Total: ",m.quantity]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[m.quantity," available"]}),a.jsx("button",{onClick:()=>y(m),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg",children:a.jsx(mn,{size:16})}),a.jsx("button",{onClick:()=>d(m.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:a.jsx(Mi,{size:16})})]})]},m.id))})]},x)}),e.length===0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx(Er,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No equipment yet. Add tables, chairs above."})]})]})})}function Px(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-gray-50 py-12 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(hx,{className:"text-red-700",size:40})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Setup Required"}),a.jsx("p",{className:"text-gray-600",children:"Connect your Supabase database to get started"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 bg-red-700 text-white rounded-full flex items-center justify-center text-sm",children:"1"}),"Create a Supabase Project"]}),a.jsxs("ol",{className:"space-y-3 text-gray-600 ml-10",children:[a.jsxs("li",{children:["Go to ",a.jsxs("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-red-700 hover:underline inline-flex items-center gap-1",children:["supabase.com ",a.jsx(Xc,{size:14})]})]}),a.jsx("li",{children:"Sign up or log in to your account"}),a.jsx("li",{children:'Click "New Project" and fill in the details'}),a.jsx("li",{children:"Wait for your database to be created (takes ~2 minutes)"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 bg-red-700 text-white rounded-full flex items-center justify-center text-sm",children:"2"}),"Run the Database Schema"]}),a.jsxs("p",{className:"text-gray-600 mb-4 ml-10",children:["Go to SQL Editor in your Supabase dashboard and run the SQL from ",a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"database-schema.sql"})]}),a.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-xl p-4 text-sm overflow-x-auto ml-10",children:a.jsx("pre",{children:`-- This creates all the tables needed:
-- profiles, bookings, staff, equipment

-- See database-schema.sql file for full SQL`})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 bg-red-700 text-white rounded-full flex items-center justify-center text-sm",children:"3"}),"Get Your API Keys"]}),a.jsxs("ol",{className:"space-y-3 text-gray-600 ml-10",children:[a.jsx("li",{children:"Go to Project Settings  API"}),a.jsxs("li",{children:["Copy your ",a.jsx("strong",{children:"Project URL"})]}),a.jsxs("li",{children:["Copy your ",a.jsx("strong",{children:"anon/public"})," key"]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 bg-red-700 text-white rounded-full flex items-center justify-center text-sm",children:"4"}),"Configure Environment Variables"]}),a.jsxs("p",{className:"text-gray-600 mb-4 ml-10",children:["Create a ",a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:".env"})," file in your project root:"]}),a.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-xl p-4 text-sm overflow-x-auto ml-10",children:a.jsx("pre",{children:`VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here`})}),a.jsxs("p",{className:"text-gray-500 text-sm mt-4 ml-10",children:["Or edit ",a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"src/lib/supabase.js"})," directly with your credentials."]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 bg-red-700 text-white rounded-full flex items-center justify-center text-sm",children:"5"}),"Create Admin User"]}),a.jsxs("ol",{className:"space-y-3 text-gray-600 ml-10",children:[a.jsx("li",{children:"Sign up through the app normally"}),a.jsx("li",{children:"Go to Supabase Dashboard  Table Editor  profiles"}),a.jsxs("li",{children:["Find your user and change ",a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"role"}),' from "customer" to "admin"']})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[a.jsxs("h3",{className:"font-semibold text-green-800 flex items-center gap-2 mb-2",children:[a.jsx(Wf,{size:20}),"You're All Set!"]}),a.jsx("p",{className:"text-green-700",children:"After completing these steps, restart your development server and refresh the page."})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("a",{href:"https://supabase.com/docs",target:"_blank",rel:"noopener noreferrer",className:"text-red-700 hover:underline inline-flex items-center gap-1",children:["Supabase Documentation ",a.jsx(Xc,{size:14})]})})]})})}function Ox(){const{user:e,profile:t,isAdmin:r,signOut:n}=Rt(),[s,i]=j.useState(!1),[l,u]=j.useState(!1),o=Es(),c=async()=>{await n(),o("/"),u(!1)};return a.jsxs("nav",{className:"bg-gradient-to-r from-red-700 to-red-900 text-white shadow-lg sticky top-0 z-50",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(M,{to:"/",className:"flex items-center gap-3",children:a.jsx("img",{src:"/logo-white.png",alt:"Red Carpet Catering",className:"h-12 w-auto brightness-0 invert"})})}),a.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[a.jsx(M,{to:"/",className:"hover:text-red-200",children:"Home"}),a.jsx(M,{to:"/menu",className:"hover:text-red-200",children:"Menu"}),e?a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/book",className:"hover:text-red-200",children:"Book Now"}),a.jsx(M,{to:"/my-orders",className:"hover:text-red-200",children:"My Orders"}),r&&a.jsx(M,{to:"/admin",className:"bg-white/20 px-3 py-1 rounded-full hover:bg-white/30",children:"Admin"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!l),className:"flex items-center gap-2 bg-white/20 px-3 py-2 rounded-lg hover:bg-white/30",children:[a.jsx(ws,{size:18}),a.jsx("span",{className:"max-w-[100px] truncate",children:(t==null?void 0:t.full_name)||"User"}),a.jsx(Hf,{size:16})]}),l&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 text-gray-800",children:[a.jsxs("div",{className:"px-4 py-2 border-b",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.full_name}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),a.jsxs("button",{onClick:c,className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-red-600",children:[a.jsx(ed,{size:16}),"Sign Out"]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/login",className:"hover:text-red-200",children:"Login"}),a.jsx(M,{to:"/signup",className:"bg-white text-red-700 px-4 py-2 rounded-lg font-medium hover:bg-red-50",children:"Sign Up"})]})]}),a.jsx("div",{className:"md:hidden flex items-center",children:a.jsx("button",{onClick:()=>i(!s),className:"p-2",children:s?a.jsx(Ps,{size:24}):a.jsx(px,{size:24})})})]})}),s&&a.jsxs("div",{className:"md:hidden bg-red-800 border-t border-red-600 px-4 py-4 space-y-3",children:[a.jsx(M,{to:"/",onClick:()=>i(!1),className:"block py-2",children:"Home"}),a.jsx(M,{to:"/menu",onClick:()=>i(!1),className:"block py-2",children:"Menu"}),e?a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/book",onClick:()=>i(!1),className:"block py-2",children:"Book Now"}),a.jsx(M,{to:"/my-orders",onClick:()=>i(!1),className:"block py-2",children:"My Orders"}),r&&a.jsx(M,{to:"/admin",onClick:()=>i(!1),className:"block py-2",children:"Admin"}),a.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-red-200 pt-3 border-t border-red-600",children:[a.jsx(ed,{size:16}),"Sign Out"]})]}):a.jsxs("div",{className:"pt-3 border-t border-red-600 space-y-2",children:[a.jsx(M,{to:"/login",onClick:()=>i(!1),className:"block py-2",children:"Login"}),a.jsx(M,{to:"/signup",onClick:()=>i(!1),className:"block bg-white text-red-700 px-4 py-2 rounded-lg text-center font-medium",children:"Sign Up"})]})]})]})}function Rx(){return a.jsx("footer",{className:"bg-gray-900 text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsx("img",{src:"/logo-white.png",alt:"Red Carpet Catering",className:"h-16 w-auto brightness-0 invert"})}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Premium catering services for all occasions."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-lg mb-4",children:"Contact Us"}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(kt,{size:16,className:"text-red-500"}),"0917-187-6510"]}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(kt,{size:16,className:"text-red-500"}),"0926-664-2839"]}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(kt,{size:16,className:"text-red-500"}),"(032) 383-4122"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-lg mb-4",children:"Booking Info"}),a.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4",children:[a.jsxs("p",{className:"text-sm text-gray-300 mb-2",children:[a.jsx("strong",{children:"Deposit:"})," 5,000"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Non-refundable but consumable."})]})]})]}),a.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400 text-sm",children:a.jsxs("p",{children:[" ",new Date().getFullYear()," Red Carpet Food and Catering Services"]})})]})})}function Jf(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-700 rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})}const Ax=[{path:"/admin",icon:mx,label:"Dashboard",exact:!0},{path:"/admin/bookings",icon:ro,label:"Bookings"},{path:"/admin/staff",icon:bs,label:"Staff"},{path:"/admin/equipment",icon:Er,label:"Equipment"},{path:"/admin/menu",icon:da,label:"Menu"}];function Pn({children:e}){const t=bn(),[r,n]=j.useState(!1),s=i=>i.exact?t.pathname===i.path:t.pathname.startsWith(i.path);return a.jsxs("div",{className:"flex min-h-[calc(100vh-64px)]",children:[a.jsxs("aside",{className:`bg-gray-900 text-white transition-all duration-300 ${r?"w-16":"w-64"} flex flex-col`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[!r&&a.jsx("span",{className:"font-bold text-lg",children:"Admin Panel"}),a.jsx("button",{onClick:()=>n(!r),className:"p-2 hover:bg-gray-800 rounded-lg",children:r?a.jsx(Nr,{size:20}):a.jsx(cu,{size:20})})]}),a.jsx("nav",{className:"flex-1 p-2 space-y-1",children:Ax.map(i=>a.jsxs(M,{to:i.path,className:`flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${s(i)?"bg-red-700 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[a.jsx(i.icon,{size:20,className:"flex-shrink-0"}),!r&&a.jsx("span",{children:i.label})]},i.path))}),a.jsx("div",{className:"p-2 border-t border-gray-700",children:a.jsxs(M,{to:"/",className:"flex items-center gap-3 px-3 py-3 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-colors",children:[a.jsx(fx,{size:20,className:"flex-shrink-0"}),!r&&a.jsx("span",{children:"Back to Site"})]})})]}),a.jsx("main",{className:"flex-1 bg-gray-100 overflow-auto",children:e})]})}const lr=({children:e,adminOnly:t=!1})=>{const{user:r,isAdmin:n,loading:s}=Rt();return s?a.jsx(Jf,{}):r?t&&!n?a.jsx(Fl,{to:"/",replace:!0}):e:a.jsx(Fl,{to:"/login",replace:!0})};function Ix(){const{loading:e,isConfigured:t}=Rt();return e?a.jsx(Jf,{}):t?a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx(Ox,{}),a.jsx("main",{className:"flex-grow",children:a.jsxs(g0,{children:[a.jsx(De,{path:"/",element:a.jsx(xx,{})}),a.jsx(De,{path:"/menu",element:a.jsx(wx,{})}),a.jsx(De,{path:"/login",element:a.jsx(bx,{})}),a.jsx(De,{path:"/signup",element:a.jsx(_x,{})}),a.jsx(De,{path:"/book",element:a.jsx(lr,{children:a.jsx(jx,{})})}),a.jsx(De,{path:"/my-orders",element:a.jsx(lr,{children:a.jsx(kx,{})})}),a.jsx(De,{path:"/admin",element:a.jsx(lr,{adminOnly:!0,children:a.jsx(Pn,{children:a.jsx(Sx,{})})})}),a.jsx(De,{path:"/admin/bookings",element:a.jsx(lr,{adminOnly:!0,children:a.jsx(Pn,{children:a.jsx(Nx,{})})})}),a.jsx(De,{path:"/admin/staff",element:a.jsx(lr,{adminOnly:!0,children:a.jsx(Pn,{children:a.jsx(Cx,{})})})}),a.jsx(De,{path:"/admin/equipment",element:a.jsx(lr,{adminOnly:!0,children:a.jsx(Pn,{children:a.jsx(Tx,{})})})}),a.jsx(De,{path:"/admin/menu",element:a.jsx(lr,{adminOnly:!0,children:a.jsx(Pn,{children:a.jsx(Ex,{})})})}),a.jsx(De,{path:"*",element:a.jsx(Fl,{to:"/",replace:!0})})]})}),a.jsx(Rx,{})]}):a.jsx(Px,{})}Ga.createRoot(document.getElementById("root")).render(a.jsx(hd.StrictMode,{children:a.jsx(j0,{children:a.jsx(lx,{children:a.jsx(Ix,{})})})}));
